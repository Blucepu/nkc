!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t=new Vue({el:"#app",data:{submitted:!1,passed:"",paper:"",created:!1,category:"",questions:[],countdown:"",timeOut:!1,countToday:0,countOneDay:0},methods:{format:NKC.methods.format,compute:function(){var t=this.paper.toc,e=Date.now()-new Date(t).getTime();(e=60*this.category.time*1e3-e)<0&&(e=0,this.timeOut=!0);var n=Math.floor(e/6e4),o=Math.floor((e-60*n*1e3)/1e3);n<10&&(n="0"+n),o<10&&(o="0"+o),this.countdown=n+" 分钟 "+o+" 秒 "},submit:function(){for(var e=0;e<this.questions.length;e++){if(void 0===this.questions[e].answer){if(!1===confirm("您还有未作答的题目，确认要提交试卷吗？"))return;break}}this.submitted=!0,nkcAPI("/exam/paper/"+t.paper._id,"post",{questions:this.questions}).then((function(e){t.passed=e.passed})).catch((function(e){screenTopWarning(e),t.submitted=!1}))}},mounted:function(){var e=window.location.href;-1!==e.indexOf("?")?e+="&t="+Date.now():e+="?t="+Date.now(),nkcAPI(e,"GET",{}).then((function(e){t.paper=e.paper,t.created=!!e.created,t.category=e.category,t.countToday=e.countToday,t.countOneDay=e.examSettings.countOneDay;for(var n=e.questions,o=0;o<n.length;o++){var s=n[o];s.content_=NKC.methods.custom_xss_process(NKC.methods.mdToHtml(o+1+"、"+s.content)),s.ans_=[];for(var a=0;a<s.ans.length;a++)s.ans_[a]=NKC.methods.custom_xss_process(NKC.methods.mdToHtml(["A","B","C","D"][a]+". "+s.ans[a]))}t.questions=n,setInterval((function(){t.compute()}),500),setTimeout((function(){NKC.methods.renderFormula()}),500)})).catch((function(t){screenTopWarning(t)}))}})}));
