!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function e(t,e){return void 0===e&&(e=0),t=(t+="").replace("￥",""),t=(t=parseFloat(t)).toFixed(e),parseFloat(t)}function r(){for(var t=$(".cart-product"),r=0,n=0;n<t.length;n++){var c=t.eq(n),o=e(c.find(".fact-price").text(),2)*e(c.find(".data-param-count").text());c.find("label input").prop("checked")&&(r+=o),c.find(".data-param-prices").text("￥"+o.toFixed(2))}$(".cart-total-price").find(".cart-price-number").text("￥"+r.toFixed(2))}function n(){for(var t=$(".cart-product input"),e=$(".cart-total-price"),n=t.length,c=0,o=0;o<n;o++){t.eq(o).prop("checked")&&c++}c>0?e.show():e.hide(),r()}t(window,{selectAll:function(t){for(var e=$("input[data-index='"+t+"']"),r=e.length,c=0,o=0;o<r;o++){e.eq(o).prop("checked")&&c++}c!==r?e.prop("checked",!0):e.prop("checked",!1),n()},getNumber:e,changeCount:function(t,e){var n=$(".data-param-count[data-product-id='"+e+"']");t="up"===t?"addCount":"reduceCount",nkcAPI("/shop/cart/"+e,"PUT",{type:t}).then((function(t){n.text(t.count),r()})).catch(sweetError)},computePrice:r,deleteCart:function(t){nkcAPI("/shop/cart/"+t,"DELETE").then((function(){window.location.reload()})).catch(sweetError)},showButton:n,next:function(){for(var t=$(".cart-product input"),e=[],r=0;r<t.length;r++){var n=t.eq(r);n.prop("checked")&&e.push(n.attr("data-product-id"))}NKC.methods.visitUrl("/shop/bill?cartsId="+e.join("-"))}})}));
