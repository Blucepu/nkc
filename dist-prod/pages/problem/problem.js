!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(){return(e=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var n=$("#data").text();function t(){var e=$("#title").text(),n=$("#content").text(),t=$("#log").val(),o=$("#QQ").val(),r=$("#email").val();return $("#logDev").html(NKC.methods.mdToHtmlSafe(t)),$("pre code").each((function(e,n){NKC.methods.highlightBlock(n)})),{t:e,c:n,QQ:o,email:r,restorLog:t}}function o(e,n){var o=t();o.resolved=$('input[name="select"]').prop("checked");var r=document.getElementById("typeId");if(!r)throw"selector error";o.name=r.value,o.remindUser=!1,o.resolved&&(o.reminded=$("input[name='remind']").prop("checked")),nkcAPI("/problem/list/"+e,"PUT",o).then((function(){if(n)return n();screenTopAlert("保存成功")})).catch((function(e){screenTopWarning(e.error||e)}))}function r(){var e=$("input[name='select']"),n=$("#remind");e.prop("checked")?n.show():n.hide()}window.data=JSON.parse(n),t(),$("#title, #content, #reason, #solution, #QQ, #email, #log").on("input",(function(){t()})),$((function(){NKC.methods.initImageViewer(".problem-images")})),r(),e(window,{update:t,submit:o,deleteProblem:function(e){!1!==confirm("确定要删除该问题？")&&nkcAPI("/problem/list/"+e,"delete",{}).then((function(){screenTopAlert("删除成功"),setTimeout((function(){openToNewLocation("/problem/list")}),1e3)})).catch((function(e){screenTopWarning(e.error||e)}))},changeType:function(e){o(e)},checkMark:r})}));
