!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";localStorage.setItem("apptype","app");var e,t,n=[],o=!1;function i(e,t){api.sendEvent({name:e,extra:t||{}})}apiready=function(){o=!0;for(var e=0;e<n.length;e++)n[e]()},window.ready=function(){return new Promise((function(e,t){o?e():n.push(e)}))},e=document.querySelectorAll("a[href]"),t=document.querySelectorAll("img[data-type=view]"),Array.prototype.forEach.call(e,(function(e){e.addEventListener("click",(function(e){this.href.indexOf("/r/")>-1||"reload"!==this.getAttribute("data-type")&&(e.preventDefault(),NKC.methods.openOnlinePage(this.href))}))})),Array.prototype.forEach.call(t,(function(e){e.addEventListener("click",(function(){this.src&&i("openImage",{url:this.src})}))})),window.ready().then((function(){var e,t;try{e=document.getElementsByTagName("title")[0].text}catch(t){e="来自科创的分享"}try{t=document.getElementsByName("description")[0].getAttribute("content")}catch(e){t="倡导科学理性，发展科技爱好"}i("siteMetaReady",{title:e,description:t,url:window.location.href});var n=window.localStorage.getItem("withE");api.refreshHeaderLoadDone(),"/editor"!==window.location.pathname&&api.setRefreshHeaderInfo({bgColor:"#eeeeee",textColor:"#aaaaaa",textDown:"下拉刷新",textUp:"松开刷新",textLoading:"加载中，请稍候",showTime:!1},(function(e,t){window.location.reload()})),n&&api.addEventListener({name:"keyback"},(function(e,t){api.confirm({title:"确定要退出吗？",msg:"",buttons:["确定","取消"]},(function(e,t){e?1==e.buttonIndex&&api.closeWin():api.closeWin()}))})),window.localStorage.removeItem("withE")}))}));
