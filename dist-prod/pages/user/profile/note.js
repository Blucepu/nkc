!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t=NKC.methods.getDataById("subUsersId"),e=new Vue({el:"#note",data:{uid:NKC.configs.uid,threads:t.threads,timeout:null},mounted:function(){window.floatUserPanel&&window.floatUserPanel.initPanel()},methods:{getUrl:NKC.methods.tools.getUrl,visitUrl:NKC.methods.visitUrl,fromNow:NKC.methods.fromNow,modifyNote:function(t){t.edit=!t.edit,t.edit&&setTimeout((function(){e.textareaAutoResize(t)}),50)},saveNewNote:function(t){var n=t._id,o=t.newContent,i=t.targetId,r=t.type;Promise.resolve().then((function(){if(!o)throw"请输入笔记内容";return nkcAPI("/note","POST",{_id:n,type:r,targetId:i,content:o})})).then((function(n){t.notes.push(n.noteContent),t.newContent="",e.addNote(t),e.textareaAutoResize(t,"note")})).catch(sweetError)},addNote:function(t){t.edit=!t.edit},deleteNote:function(t,e){sweetQuestion("确定要执行删除操作？").then((function(){var t=e.noteId,n=e._id;return nkcAPI("/note/".concat(t,"/c/").concat(n),"DELETE")})).then((function(){var n=t.notes.indexOf(e);-1!==n&&t.notes.splice(n,1)})).catch(sweetError)},saveContent:function(t){var n=t.content,o=t.noteId,i=t._id;nkcAPI("/note/".concat(o,"/c/").concat(i),"PUT",{content:n}).then((function(n){t.html=n.noteContentHTML,e.resetTextarea(t)})).catch(sweetError)},getTextarea:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.$refs[e+t._id][0]},resetTextarea:function(t,e){t.edit=!1,this.textareaAutoResize(t,e)},textareaAutoResize:function(t,e){var n=this.getTextarea(t,e);48<n.scrollHeight?n.style.height=n.scrollHeight+"px":n.style.height="4rem"}}});window.noteApp=e}));
