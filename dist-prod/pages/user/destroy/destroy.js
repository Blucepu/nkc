!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=NKC.methods.getDataById("data"),i=new Vue({el:"#app",data:{verifyEmail:e.verifyEmail,verifyMobile:e.verifyMobile,verifyPassword:e.verifyPassword,mobileCode:"",emailCode:"",password:"",passed:!e.verifyEmail&&!e.verifyMobile&&!e.verifyPassword,mobileTime:0,emailTime:0},computed:{disableVerifyButton:function(){var e=this.verifyEmail,i=this.verifyMobile,o=this.verifyPassword,t=this.mobileCode,s=this.emailCode,r=this.password;return o&&!r||e&&!s||i&&!t}},methods:{reduceTime:function(e){var i=this;setTimeout((function(){i[e]--,i[e]>0&&i.reduceTime(e)}),1e3)},sendEmailCode:function(){if(!(this.emailTime>0)){var e=this;NKC.methods.sendEmailCode("destroy").then((function(){sweetSuccess("验证码已发送"),e.emailTime=120,e.reduceTime("emailTime")})).catch(sweetError)}},sendMobileCode:function(){if(!(this.mobileTime>0)){var e=this;NKC.methods.sendMobileCode("destroy").then((function(){sweetSuccess("验证码已发送"),e.mobileTime=120,e.reduceTime("mobileTime")})).catch(sweetError)}},verify:function(){var e=this,i=this.emailCode,o=this.mobileCode,t=this.password;nkcAPI("/u/".concat(NKC.configs.uid,"/destroy"),"POST",{type:"verify",form:{emailCode:i,mobileCode:o,password:t}}).then((function(){e.passed=!0})).catch(sweetError)},submit:function(){var e=this.emailCode,i=this.mobileCode,o=this.password;sweetQuestion("确定即会注销，注销后短期内不能使用原有用户名重新注册，你将不能再对该账号、积分、发表的内容进行处置，你想好了吗？").then((function(){return nkcAPI("/u/".concat(NKC.configs.uid,"/destroy"),"POST",{type:"destroy",form:{emailCode:e,mobileCode:i,password:o}})})).then((function(){NKC.configs.isApp?emitEvent("logout"):window.location.href="/"})).catch(sweetError)}}});window.app=i}));
