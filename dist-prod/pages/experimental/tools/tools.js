!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=new NKC.modules.CommonModal;new Vue({el:"#app",data:{selected:!1},methods:{editTool:function(n,a,o,t,l,c,u,i){e.open((function(n){var a=new FormData;n.forEach((function(e){a.append(e.name,e.value)})),a.append("_id",i),nkcUploadFile("/tools/update","post",a,(function(e,n){})).then((function(){asyncSweetSuccess("修改成功",{autoHide:!1}),e.close()})).then((function(){return location.reload()})).catch(asyncSweetError)}),{title:"修改工具信息",data:[{dom:"input",label:"版本号",name:"version",value:n,placeholder:"1.0"},{dom:"input",label:"工具名",name:"name",value:a,placeholder:"必填"},{dom:"input",label:"简介",name:"summary",value:o,placeholder:"可缺省"},{dom:"input",label:"作者",name:"author",value:l,placeholder:"缺省显示为[匿名]"},{dom:"input",label:"作者uid",name:"uid",value:t,placeholder:"可缺省"},{dom:"input",label:"入口文件",name:"entry",value:c,placeholder:"必填，默认/index.html"},{dom:"radio",label:"是否是站外站点",value:u,name:"isOtherSite",radios:[{name:"是",value:!0},{name:"否",value:!1}]},{dom:"input",label:"工具压缩包",type:"file",name:"file",accept:".zip"}]})},deleteTool:function(e,n){sweetConfirm("确定要删除 ".concat(n," 吗？（此操作不可恢复）")).then((function(){return nkcAPI("/tools/delete?_id="+e,"DELETE")})).then((function(){return asyncSweetSuccess("删除成功",{autoHide:!1})})).then((function(){return location.reload()})).catch(asyncSweetError)},addTool:function(){e.open((function(n){var a=new FormData;n.forEach((function(e){a.append(e.name,e.value)})),nkcUploadFile("/tools/upload","post",a,(function(e,n){console.log(n)})).then((function(){asyncSweetSuccess("上传成功",{autoHide:!1}),e.close()})).then((function(){return location.reload()})).catch(asyncSweetError)}),{title:"上传工具",data:[{dom:"input",label:"版本号",name:"version",value:"",placeholder:"1.0"},{dom:"input",label:"工具名",name:"name",value:"",placeholder:"必填"},{dom:"input",label:"简介",name:"summary",value:"",placeholder:"可缺省"},{dom:"input",label:"作者",name:"author",value:"",placeholder:"缺省显示为[匿名]"},{dom:"input",label:"作者uid",name:"uid",value:"",placeholder:"可缺省"},{dom:"input",label:"入口文件",name:"entry",value:"",placeholder:"必填，默认/index.html"},{dom:"radio",label:"是否是站外站点",value:!1,name:"isOtherSite",radios:[{name:"是",value:!0},{name:"否",value:!1}]},{dom:"input",label:"工具压缩包",type:"file",name:"file",accept:".zip"}]})},hideTool:function(e,n,a){sweetConfirm(a?"要解除屏蔽 ".concat(n," 吗？"):"确定要屏蔽 ".concat(n," 吗？（可以随时解除屏蔽）")).then((function(){return nkcAPI("/tools/hide?_id="+e,"DELETE")})).then((function(){return asyncSweetSuccess(a?"已解除":"已屏蔽",{autoHide:!1})})).then((function(){return location.reload()})).catch(asyncSweetError)},enableSiteTool:function(){nkcAPI("/tools/enableSiteTools","POST").then((function(e){return asyncSweetSuccess(e.message,{autoHide:!1})})).then((function(){return location.reload()})).catch(asyncSweetError)}}}),window.CommonModal=e}));
