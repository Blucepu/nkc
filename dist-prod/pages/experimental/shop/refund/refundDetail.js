!function(r){"function"==typeof define&&define.amd?define(r):r()}((function(){"use strict";var r=new Vue({el:"#app",data:{agree:"",error:"",info:"",password:"",user:"",order:"",refund:"",refunds:[],reason:"",type:"",displayInput:!1},computed:{orderOriginPrice:function(){for(var r=0,e=0;e<this.order.params.length;e++)r+=this.order.params[e].productPrice;return r},param:function(){var r;if(this.refund.paramId&&(r=this.refund.paramId),!r)return"";for(var e=0;e<this.order.params.length;e++)if(this.order.params[e].costId===r)return this.order.params[e];return""},status:function(){var r=this.refunds[this.refunds.length-1];return r.logs[r.logs.length-1]},product:function(){if(this.order)return this.order.product},productParam:function(){if(this.order)return this.order.productParam},seller:function(){if(this.order)return this.order.product.user},params:function(){return this.order.params}},mounted:function(){var r=document.getElementById("data");r=JSON.parse(r.innerHTML),this.order=r.order,this.user=r.user,this.refunds=r.refunds,r.refund?this.refund=r.refund:this.displayInput=!0},methods:{format:NKC.methods.format,clearInfo:function(){this.error="",this.info=""},viewCert:function(r){window.open("/shop/cert/"+r._id)},submit:function(){this.clearInfo();var e=this.agree,n=this.reason,t=this.password;return""===e?this.error="请选择同意或拒绝":!1===e&&""===n?this.error="请输入拒绝理由":(e=e?"agree":"disagree",void nkcAPI("/e/settings/shop/refunds/"+e,"POST",{orderId:this.order.orderId,reason:this.reason,password:t}).then((function(){window.location.reload()})).catch((function(e){r.error=e.error||e})))},agreeR:function(){nkcAPI("/e/settings/shop/refunds/agree","POST",{orderId:this.order.orderId,type:"agreeR",reason:this.reason}).then((function(){window.location.reload()})).catch((function(r){screenTopWarning(r)}))},disagreeR:function(){console.log("不同意"),nkcAPI("/e/settings/shop/refunds/disagree","POST",{orderId:this.order.orderId,reason:this.reason}).then((function(){window.location.reload()})).catch((function(r){screenTopWarning(r)}))},refundType:function(r){return{money:"退款",product:"退货",all:"退款+退货"}[r]}}})}));
