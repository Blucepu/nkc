!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(){return(e=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var n=$("#data").text();function t(e){for(var n=0;n<types.length;n++)if(types[n].displayName===e)return types[n]._id}function r(){for(var e=$('input[name="selectOperation"]'),n=[],t=0;t<e.length;t++){var r=e.eq(t);r.prop("checked")&&n.push(r.attr("data-operation"))}return n}function o(){return t($("#operationSelect").val())}window.types=void 0,n&&(n=JSON.parse(n),window.types=n.types),$('input[name="selectOperation"]').iCheck({checkboxClass:"icheckbox_minimal-red"}),e(window,{data:n,getIdByDisplayName:t,addOperationType:function(){var e=prompt("请输入分类名：","");if(null===e);else{if(""===e)return screenTopWarning("分类名不能为空");nkcAPI("/e/settings/operation","POST",{displayName:e}).then((function(){window.location.reload()})).catch((function(e){screenTopAlert(e.error||e)}))}},modifyOperationType:function(e,n){if(e)if(null===(n=prompt("请输入新的类名：",n)));else{if(""===n)return screenTopWarning("分类名不能为空");nkcAPI("/e/settings/operation/"+e,"PUT",{displayName:n,operation:"modifyDisplayName"}).then((function(){window.location.reload()})).catch((function(e){screenTopWarning(e.error||e)}))}},deleteOperationType:function(e){e&&!1!==confirm("确认要删除当前分类？")&&nkcAPI("/e/settings/operation/"+e,"DELETE",{}).then((function(){openToNewLocation("/e/settings/operation")})).catch((function(e){screenTopAlert(e.error||e)}))},getSelectedOperations:r,getTypeId:o,moveOperations:function(){var e=r();if(0===e.length)return screenTopWarning("未选择任何操作");var n=o();if(!n)return screenTopWarning("数据错误，请刷新");nkcAPI("/e/settings/operation/"+n,"PUT",{operations:e,operation:"moveOperations"}).then((function(){screenTopAlert("移动成功")})).catch((function(e){screenTopAlert(e.error||e)}))},deleteOperations:function(e){var n=r();if(0===n.length)return screenTopWarning("未选择任何操作");nkcAPI("/e/settings/operation/"+e,"PUT",{operations:n,operation:"deleteOperations"}).then((function(){screenTopAlert("移除成功")})).catch((function(e){screenTopAlert(e.error||e)}))},editorOperation:function(e,n,t){if(null!==(n=prompt("请输入操作说明：",n))){if(""===n)return screenTopWarning("操作说明不能为空");if(null!==(t=prompt("请输入错误提示：",t)))return""===t?screenTopWarning("错误提示不能为空"):void nkcAPI("/e/settings/operation","PUT",{operationId:e,description:n,errInfo:t}).then((function(){screenTopAlert("修改成功")})).catch((function(e){screenTopAlert(e.error||e)}))}}})}));
