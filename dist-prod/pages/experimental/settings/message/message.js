!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=new Vue({el:"#app",data:{type:"limit",messageSettings:"",messageTypes:[],selectedMessageType:"",messageTypesLanguage:{},roles:[],grades:[],error:"",info:""},methods:{lang:function(e){return this.messageTypesLanguage[e]||e},selectType:function(e){this.selectedMessageType=e,this.clearErrorInfo()},clearErrorInfo:function(){this.error="",this.info=""},save:function(s){this.clearErrorInfo(),nkcAPI("/e/settings/message","PUT",{type:"modifyMessageType",messageType:s}).then((function(){e.info="保存成功"})).catch((function(s){e.error=s.error||s}))},submit:function(){var s={roles:e.roles,grades:e.grades,type:"modifySendLimit"};if(s.messageSettings=this.messageSettings,!s.messageSettings.systemLimitInfo||!s.messageSettings.customizeLimitInfo||!s.messageSettings.mandatoryLimitInfo)return screenTopWarning("请输入受限提示");nkcAPI("/e/settings/message","PUT",s).then((function(){screenTopAlert("保存成功")})).catch((function(e){screenTopWarning(e.error||e)}))},removeFromArr:function(e,s){e.splice(s,1)},addSizeLimit:function(){this.messageSettings.sizeLimit.others.push({ext:"",size:0})}},mounted:function(){var e=NKC.methods.getDataById("data");this.messageTypesLanguage=e.messageTypesLanguage,this.grades=e.grades,this.roles=e.roles,this.messageTypes=e.messageTypes,this.messageSettings=e.messageSettings,this.messageTypes.length>0&&(this.selectedMessageType=this.messageTypes[0])}})}));
