!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var t=NKC.methods.getDataById("data"),s={};t.users.map((function(e){e.showDetail=!1,s[e.uid]=e}));var n=new Vue({el:"#app",data:{t:t.t,searchType:t.searchType||"username",searchContent:t.searchContent||"",users:t.users,usersObj:s,roles:t.roles,selectedUsersId:[]},computed:{selectedUsers:function(){var e=this.usersObj;return this.selectedUsersId.map((function(t){return e[t]}))},isChecked:function(){return this.selectedUsersId.length===this.users.length}},methods:{format:NKC.methods.format,getUrl:NKC.methods.tools.getUrl,getIpUrl:NKC.methods.tools.getIpUrl,search:function(){var e=this.t,t=this.searchType,s=this.searchContent;s||sweetError("请输入搜索内容"),window.location.href="/e/settings/user?t=".concat(e,"&c=").concat(t,",").concat(s)},switchDetail:function(e){e.showDetail=!e.showDetail},editUser:function(e){window.ModifyAccountInfo||(window.ModifyAccountInfo=new NKC.modules.ModifyAccountInfo),window.ModifyAccountInfo.open({uid:e.uid})},toDisableUser:function(e,t,s,n){var o;return o="all"===t?[].concat(this.selectedUsersId):[n.uid],Promise.resolve().then((function(){if(!o.length)throw"未选择用户";return nkcAPI("/e/settings/user","PUT",{type:e,usersId:o,disable:!!s})})).then((function(){sweetSuccess("执行成功")})).catch((function(e){console.log(e),sweetError(e)}))},disableUsers:function(e,t,s){this.toDisableUser("disable",e,t,s)},hiddenUsersHome:function(e,t,s){this.toDisableUser("hidden",e,t,s)},selectAllUsers:function(){var e=this.users,t=this.isChecked;this.selectedUsersId=t?[]:e.map((function(e){return e.uid}))}},mounted:function(){setTimeout((function(){floatUserPanel.initPanel()}),500)}});e(window,{usersObj:s,app:n})}));
