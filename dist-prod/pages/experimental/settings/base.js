!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";window.submitBase=function(){var e={websiteName:$("#websiteName").val(),websiteAbbr:$("#websiteAbbr").val(),github:$("#github").val(),record:$("#record").val(),copyright:$("#copyright").val(),description:$("#description").val(),keywords:$("#keywords").val(),brief:$("#brief").val(),telephone:$("#telephone").val()};nkcAPI("/e/settings/base","PUT",e).then((function(){screenTopAlert("保存成功"),setTimeout((function(){window.location.reload()}),1e3)})).catch((function(e){screenTopWarning(e.error||e)}))};var e=new Vue({el:"#app",data:{serverSettings:"",keywords:"",error:"",info:"",tempSiteIcon:"",shouldUploadSiteIcon:!1},mounted:function(){var e=NKC.methods.getDataById("data");this.serverSettings=e.serverSettings,this.keywords=(e.serverSettings.keywords||"").join(",");var t=this;setTimeout((function(){NKC.methods.initSelectColor((function(e){t.serverSettings.backgroundColor=e}))}),300)},methods:{save:function(){this.error="",this.info="";var t=this.serverSettings;t.keywords=this.keywords;var n=this.$refs.selectSiteIconInput.files[0],i=new FormData;return i.append("siteicon",n),i.append("settings",JSON.stringify(t)),nkcUploadFile("/e/settings/base","PUT",i).then((function(){this.shouldUploadSiteIcon=!1,sweetSuccess("保存成功")})).catch((function(t){e.error=t.error||t}))},remove:function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},moveUp:function(e,t){var n=e.indexOf(t);Vue.set(e,n,e[n-1]),Vue.set(e,n-1,t)},moveDown:function(e,t){var n=e.indexOf(t);Vue.set(e,n,e[n+1]),Vue.set(e,n+1,t)},add:function(e,t){e.splice(t,0,{name:"",url:""})},selectSiteIcon:function(){this.$refs.selectSiteIconInput.click()},selectSiteIconInputChange:function(){var e=this.$refs.selectSiteIconInput.files[0],t=URL.createObjectURL(e);this.tempSiteIcon=t,this.shouldUploadSiteIcon=!0}}})}));
