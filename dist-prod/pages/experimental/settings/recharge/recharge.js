!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var t=NKC.methods.getDataById("data");function i(e){return{hour:Math.floor(e/36e5),min:Math.floor(e/6e4)%60,sec:Math.floor(e/1e3)%60}}function n(e){return 60*e.hour*60*1e3+60*e.min*1e3+1e3*e.sec}new Vue({el:"#app",data:{submitting:!1,recharge:null,withdraw:null},mounted:function(){var e=t.rechargeSettings,i=e.recharge,n=e.withdraw;n._startingTime=this.getHMS(n.startingTime),n._endTime=this.getHMS(n.endTime),this.convertNumber(n,"toPage"),this.convertNumber(i,"toPage"),this.recharge=i,this.withdraw=n},methods:{getHMS:i,HMSToNumber:n,checkNumber:NKC.methods.checkData.checkNumber,checkString:NKC.methods.checkData.checkString,bigNumber:NKC.modules.math.bignumber,convertNumber:function(e,t){"toPage"===t?(e._min=e.min/100,e._max=e.max/100,e.aliPay._fee=NKC.modules.math.chain(this.bigNumber(e.aliPay.fee)).multiply(100).done().toNumber(),e.weChat._fee=NKC.modules.math.chain(this.bigNumber(e.weChat.fee)).multiply(100).done().toNumber()):(e.min=100*e._min,e.max=100*e._max,e.aliPay.fee=NKC.modules.math.chain(this.bigNumber(e.aliPay._fee)).multiply(this.bigNumber(.01)).done().toNumber(),e.weChat.fee=NKC.modules.math.chain(this.bigNumber(e.weChat._fee)).multiply(this.bigNumber(.01)).done().toNumber(),delete e.aliPay._fee,delete e.weChat._fee,delete e._min,delete e._max)},save:function(){var e=this,t=JSON.parse(JSON.stringify(this.recharge)),i=JSON.parse(JSON.stringify(this.withdraw)),n=this.checkNumber,a=this;Promise.resolve().then((function(){if(n(t._min,{name:"单次最小充值金额",min:.01,fractionDigits:2}),n(t._max,{name:"单次最大充值金额",min:.01,fractionDigits:2}),t._min>t._max)throw"单次充值金额设置错误";if(n(t.aliPay._fee,{name:"支付宝充值手续费",min:0,max:100,fractionDigits:2}),n(t.weChat._fee,{name:"微信支付充值手续费",min:0,max:100,fractionDigits:2}),n(i._min,{name:"单次最小提现金额",min:.01,fractionDigits:2}),n(i._max,{name:"单次最大提现金额",min:.01,fractionDigits:2}),i._min>i._max)throw"单次提现金额设置错误";return n(i.countOneDay,{name:"每天最大提现次数",min:0}),n(i.aliPay._fee,{name:"支付宝提现手续费",min:0,max:100,fractionDigits:2}),n(i.weChat._fee,{name:"微信支付提现手续费",min:0,max:100,fractionDigits:2}),i.startingTime=e.HMSToNumber(i._startingTime),i.endTime=e.HMSToNumber(i._endTime),delete i._startingTime,delete i._endTime,e.convertNumber(i,"toServer"),e.convertNumber(t,"toServer"),e.submitting=!0,nkcAPI("/e/settings/recharge","PUT",{recharge:t,withdraw:i})})).then((function(){a.submitting=!1,sweetSuccess("保存成功")})).catch((function(e){a.submitting=!1,sweetError(e)}))}}}),e(window,{getHMS:i,HMSToNumber:n})}));
