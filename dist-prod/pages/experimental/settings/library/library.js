!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(){return(e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}).apply(this,arguments)}for(var r=NKC.methods.getDataById("data"),t={},s={},i=r.librarySettings,n=i.permission,o=n.roles,a=n.grades,l=0;l<o.length;l++){t[(g=o[l])._id]=g}for(l=0;l<a.length;l++){s[(u=a[l])._id]=u}var d=[],f=[];for(l=0;l<r.roles.length;l++){var g,p=t[(g=r.roles[l])._id];p?d.push(p):d.push({_id:g._id,operations:[]})}for(l=0;l<r.grades.length;l++){var u,h=s[(u=r.grades[l])._id];h?f.push(h):f.push({_id:u._id,operations:[]})}var c=new Vue({el:"#app",data:{libSettings:r.librarySettings,grades:f,roles:d},methods:{getNameById:function(e,t){if("role"===e)for(var s=0;s<r.roles.length;s++){if((i=r.roles[s])._id===t)return i.displayName}else for(s=0;s<r.grades.length;s++){var i;if((i=r.grades[s])._id===t)return i.displayName}},selectAll:function(e){8===e.operations.length?e.operations=[]:e.operations=v()},submit:function(){nkcAPI("/e/settings/library","PUT",{roles:this.roles,grades:this.grades}).then((function(){sweetSuccess("提交成功")})).catch((function(e){sweetError(e)}))}}});function v(){for(var e=["Folder","File"],r=["modify","delete","move","create"],t=[],s=0;s<e.length;s++)for(var i=0;i<r.length;i++)t.push(r[i]+e[s]);return t}e(window,{rolesObj:t,gradesObj:s,libSettings:i,permission:n,roles:o,grades:a,permissionRoles:d,app:c,getAllOperations:v})}));
