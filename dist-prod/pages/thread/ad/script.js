!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=NKC.methods.getDataById("data");window.SelectImage=void 0;var t=new Vue({el:"#app",data:{title:e.thread.title,resourcesId:e.thread.resourcesId,tid:e.thread.tid,postsResourcesId:e.thread.postsResourcesId,firstPostCover:e.thread.firstPostCover,topType:"movable",coverFixed:"",coverMovable:"",coverFixedData:"",coverMovableData:""},mounted:function(){window.SelectImage=new NKC.methods.selectImage},computed:{coverData:function(){return"movable"===this.topType?this.coverMovableData:this.coverFixedData},cover:function(){return"movable"===this.topType?this.coverMovable:this.coverFixed}},methods:{getUrl:NKC.methods.tools.getUrl,selectFile:function(e,t){var o=this,r={};"online"===e?r.url="/r/"+t:"cover"===e&&(r.url=this.getUrl("postCover",t)),"movable"===this.topType?r.aspectRatio=800/336:r.aspectRatio=400/253,SelectImage.show((function(e){o.setCover(e),SelectImage.close()}),r)},setCover:function(e){var t=this;"movable"===t.topType?(t.coverMovable=e,NKC.methods.fileToUrl(e).then((function(e){t.coverMovableData=e}))):(t.coverFixed=e,NKC.methods.fileToUrl(e).then((function(e){t.coverFixedData=e})))},checkString:NKC.methods.checkData.checkString,submit:function(){var e=this;Promise.resolve().then((function(){if(e.checkString(e.title,{name:"标题",minLength:1,maxLength:2e3}),!e.cover)throw"请选择封面图";var t=new FormData;return t.append("cover",e.cover),t.append("title",e.title),t.append("topType",e.topType),nkcUploadFile("/t/"+e.tid+"/ad","POST",t)})).then((function(){sweetSuccess("文章已推送到首页")})).catch(sweetError)}}});window.app=t}));
