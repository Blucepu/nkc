!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=new Vue({el:"#app",data:{complaints:[],selectedComplaintsId:[]},mounted:function(){for(var e=NKC.methods.getDataById("data"),n=0;n<e.complaints.length;n++)e.complaints[n].open=!1;this.complaints=e.complaints},methods:{format:NKC.methods.format,fromNow:NKC.methods.fromNow,save:function(e){nkcAPI("/complaint/resolve","POST",{result:e.result,informed:e.informed,_id:e._id}).then((function(n){var t=n.complaints[0];e.resolved=t.resolved,e.result=t.result,e.handlerId=t.handlerId,e.handler=t.handler,e.resolveTime=t.resolveTime,e.informed=t.informed})).catch((function(e){screenTopWarning(e)}))},selectAll:function(){for(var e=[],n=0;n<this.complaints.length;n++)this.complaints[n].resolved||e.push(this.complaints[n]._id);this.selectedComplaintsId.length===e.length?this.selectedComplaintsId=[]:this.selectedComplaintsId=e},saveAll:function(){for(var n=this.selectedComplaintsId,t=[],o=0;o<this.complaints.length;o++){var i=this.complaints[o];i.resolved||-1!==n.indexOf(i._id)&&t.push({_id:i._id,informed:i.informed,result:i.result})}nkcAPI("/complaint/resolve","POST",{complaints:t}).then((function(n){for(var t=n.complaints,o=0;o<t.length;o++)for(var i=t[o],l=0;l<e.complaints.length;l++){var s=e.complaints[l];i._id===s._id&&(s.handler=i.handler,s.resolved=!0,s.handlerId=i.handlerId,s.result=i.result,s.resolveTime=i.resolveTime,s.informed=i.informed)}})).catch((function(e){screenTopWarning(e)}))}}})}));
