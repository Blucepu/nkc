!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t=NKC.methods.getDataById("data"),e=new Vue({el:"#app",data:{uid:NKC.configs.uid,apiType:t.record.apiType,recordId:t.record.recordId,recordStatus:t.record.status,url:t.record.url,delay:[1e3,1e3,1e3,2e3,2e3,2e3,5e3,5e3,5e3,1e4]},computed:{recordStatusDesc:function(){return{waiting:"等待支付...",success:"支付已完成",fail:"支付失败，请关闭当前页面重新发起支付",timeout:"支付超时，请关闭当前页面重新发起支付"}[this.recordStatus]}},methods:{getRecordStatus:function(){var t=this;return nkcAPI("/payment/wechat/"+this.recordId,"GET").then((function(e){t.recordStatus=e.record.status})).catch((function(t){screenTopWarning(t)}))},setRecordTimeout:function(){if("waiting"===this.recordStatus){var t,e=this;t=1===e.delay.length?e.delay[0]:e.delay.shift(),setTimeout((function(){e.getRecordStatus().then((function(){e.setRecordTimeout()}))}),t)}},toPay:function(){this.apiType}},mounted:function(){this.setRecordTimeout(),"waiting"===this.recordStatus&&this.toPay()}});window.app=e}));
