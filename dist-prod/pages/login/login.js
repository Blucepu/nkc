!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";function n(){return(n=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var p=arguments[e];for(var i in p)Object.prototype.hasOwnProperty.call(p,i)&&(n[i]=p[i])}return n}).apply(this,arguments)}function e(n,e){e&&n.focus()}function p(){app.warning.username="",app.warning.password="",app.warning.mobile="",app.warning.code="",app.warning.error="",app.warning.imgCode=""}function i(){setTimeout((function(){0!==app.timeNumber&&(app.timeNumber--,i())}),1e3)}window.app=void 0,$((function(){window.app=new Vue({el:"#app",data:{warning:{username:"",password:"",mobile:"",code:"",error:"",imgCode:""},timeNumber:0,username:"",password:"",mobile:"",code:"",imgCode:"",sending:!1,nationCodes:nationCodes,nationCode:"86",loginType:"account",btnText:"登录",svgData:""},watch:{},mounted:function(){},methods:{submit:function(){if("登录中..."!==app.btnText){var n;if(p(),app.btnText="登录中...","account"===app.loginType){if(!app.username)return app.warning.username="请输入用户名",void(app.btnText="登录");if(!app.password)return app.warning.password="请输入密码",void(app.btnText="登录");n={username:app.username,password:app.password}}else if("mobile"===app.loginType){if(!app.nationCode)return app.warning.error="请选择国际区号",void(app.btnText="登录");if(!app.mobile)return app.warning.mobile="请输入手机号",void(app.btnText="登录");if("number"!=typeof app.mobile)return app.warning.mobile="请输入正确的手机号",void(app.btnText="登录");if(!app.password)return app.warning.password="请输入密码",void(app.btnText="登录");n={loginType:"mobile",nationCode:app.nationCode,mobile:app.mobile,password:app.password}}else{if(!app.nationCode)return app.warning.error="请选择国际区号",void(app.btnText="登录");if(!app.mobile)return app.warning.mobile="请输入手机号",void(app.btnText="登录");if("number"!=typeof app.mobile)return void(app.warning.mobile="请输入正确的手机号");if(!app.imgCode)return app.warning.imgCode="请输入验证码",void(app.btnText="登录");if(!app.code)return app.warning.code="请输入验证码",void(app.btnText="登录");n={loginType:"code",nationCode:app.nationCode,mobile:app.mobile,code:app.code,imgCode:app.imgCode}}nkcAPI("/login","POST",n).then((function(n){openToNewLocation(n.redirect)})).catch((function(n){app.warning.error=n.error||n,app.btnText="登录"}))}},changeType:function(n){n!==app.loginType&&(app.loginType=n,this.clearWarning())},clearWarning:p,sendCode:function(){if(!(app.timeNumber>0))if(app.mobile)if("number"==typeof app.mobile)if(app.nationCode){if(!app.imgCode)return app.warning.imgCode="请输入验证码";if(!app.sending){app.sending=!0;var n={nationCode:app.nationCode,mobile:app.mobile,imgCode:app.imgCode};nkcAPI("/sendMessage/login","POST",n).then((function(){app.sending=!1,app.timeNumber=120,i()})).catch((function(n){app.sending=!1,app.warning.error=n.error||n}))}}else app.warning.error="请选择国际区号";else app.warning.mobile="请输入正确的手机号";else app.warning.mobile="请输入手机号"}},directives:{focus:{inserted:e}}})})),n(window,{focus:e,clearWarning:p,timeOut:i})}));
