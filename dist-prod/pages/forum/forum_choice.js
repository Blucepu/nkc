!function(r){"function"==typeof define&&define.amd?define(r):r()}((function(){"use strict";function r(){return(r=Object.assign||function(r){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var p in o)Object.prototype.hasOwnProperty.call(o,p)&&(r[p]=o[p])}return r}).apply(this,arguments)}function i(r){if(app.disciplineCategorys=[],app.disciplineForumId==r){var i=app.forumIdArr.indexOf(r);i>-1&&app.forumIdArr.splice(i,1);var o="#disForumId"+app.disciplineForumId;$(o).removeClass("mdui-color-blue-300"),app.disciplineForumId=""}else{if(""!==app.disciplineCategoryId){var p=app.categoryIdArr.indexOf(app.disciplineCategoryId);p>-1&&app.categoryIdArr.splice(p,1),app.disciplineCategoryId=""}$("#disForumId"+r).addClass("mdui-color-blue-300");var e=[];for(var d in cidArr)cidArr[d].fid==r&&e.push(cidArr[d]);if(app.forumIdArr.push(r),""!==app.disciplineForumId){if(app.disciplineForumId!==r){var a="#disForumId"+app.disciplineForumId;$(a).removeClass("mdui-color-blue-300")}a="#disForumId"+app.disciplineForumId;$(a).removeClass("mdui-color-blue-300");var t=app.forumIdArr.indexOf(app.disciplineForumId);t>-1&&app.forumIdArr.splice(t,1)}app.disciplineForumId=r}setTimeout((function(){app.disciplineCategorys=e}),300)}function o(r){if(app.topicCategorys=[],app.topicForumId==r){var i=app.forumIdArr.indexOf(r);i>-1&&app.forumIdArr.splice(i,1);var o="#topForumId"+app.topicForumId;$(o).removeClass("mdui-color-blue-300"),app.topicForumId=""}else{if(""!==app.topicCategoryId){var p=app.categoryIdArr.indexOf(app.topicCategoryId);p>-1&&app.categoryIdArr.splice(p,1),app.topicCategoryId=""}$("#topForumId"+r).addClass("mdui-color-blue-300");var e=[];for(var d in cidArr)cidArr[d].fid==r&&e.push(cidArr[d]);if(app.forumIdArr.push(r),""!==app.topicForumId){if(app.topicForumId!==r){o="#topForumId"+app.topicForumId;$(o).removeClass("mdui-color-blue-300")}var a=app.forumIdArr.indexOf(app.topicForumId);a>-1&&app.forumIdArr.splice(a,1)}app.topicForumId=r}setTimeout((function(){app.topicCategorys=e}),300)}function p(r){if(r+="",app.disciplineCategoryId==r){var i=app.categoryIdArr.indexOf(r);if(i>-1){app.categoryIdArr.splice(i,1);var o="#disCateId"+app.disciplineCategoryId;$(o).removeClass("mdui-color-blue-300"),app.disciplineCategoryId=""}}else{if($("#disCateId"+r).addClass("mdui-color-blue-300"),app.categoryIdArr.push(r),""!==app.disciplineCategoryId){if(r!==app.disciplineCategoryId){o="#disCateId"+app.disciplineCategoryId;$(o).removeClass("mdui-color-blue-300")}var p=app.categoryIdArr.indexOf(app.disciplineCategoryId);p>-1&&app.categoryIdArr.splice(p,1)}app.disciplineCategoryId=r}}function e(r){if(r+="",app.topicCategoryId==r){var i=app.categoryIdArr.indexOf(r);if(i>-1){app.categoryIdArr.splice(i,1);var o="#topCateId"+app.topicCategoryId;$(o).removeClass("mdui-color-blue-300"),app.topicCategoryId=""}}else{if($("#topCateId"+r).addClass("mdui-color-blue-300"),app.categoryIdArr.push(r),""!==app.topicCategoryId){if(r!==app.topicCategoryId){o="#topCateId"+app.topicCategoryId;$(o).removeClass("mdui-color-blue-300")}var p=app.categoryIdArr.indexOf(app.topicCategoryId);p>-1&&app.categoryIdArr.splice(p,1)}app.topicCategoryId=r}}function d(){console.log(app.forumIdArr,app.categoryIdArr)}window.cidArr=void 0,window.disciplineArr=void 0,window.topicArr=void 0,window.app=void 0,window.forumList=void 0,window.isThroughForum=void 0,window.historyFid="",window.forumTypeEditor=void 0,$(document).ready((function(){window.isThroughForum=getSearchKV(),isThroughForum.type&&"forum"===isThroughForum.type&&(window.historyFid=isThroughForum.id),window.forumList=JSON.parse($("#allForumListData").text()),window.cidArr=JSON.parse($("#cidArr").text()),window.disciplineArr=JSON.parse($("#disciplineDom").text()),window.topicArr=JSON.parse($("#topicDom").text()),window.forumTypeEditor=$("#forumType").text(),window.app=new Vue({el:"#forumChoice",data:{activeClass:"mdui-color-theme-accent",disciplineArr:disciplineArr,topicArr:topicArr,disciplineCategorys:[],topicCategorys:[],forumIdArr:[],categoryIdArr:["0"],disciplineForumId:"",topicForumId:"",disciplineCategoryId:"0",topicCategoryId:"0",newDomNum:0},methods:{selectDiscipline:function(r){return i(r)},selectTopic:function(r){return o(r)},selectDisciplineCate:function(r){return p(r)},selectTopicCate:function(r){return e(r)},addNewForumDom:function(r){function i(){return r.apply(this,arguments)}return i.toString=function(){return r.toString()},i}((function(){return addNewForumDom()})),shuchu:function(){return d()}}}),historyFid&&("discipline"==forumTypeEditor?i(historyFid):"topic"==forumTypeEditor&&o(historyFid))})),r(window,{selectDiscipline:i,selectTopic:o,selectDisciplineCate:p,selectTopicCate:e,shuchu:d,moreForum:function(){$("#allForumChoice").css("display","block")},selectNewOption:function(){try{var r=getResult1()}catch(r){return screenTopWarning(r)}for(var i in $("#allForumChoice").css("display","none"),forumList)if(forumList[i].fid===r.fid)if("discipline"==forumList[i].forumType){for(var o in disciplineArr)if(disciplineArr[o].fid==forumList[i].fid)return screenTopWarning("该专业已在列表中");var p="#disForumId"+app.disciplineForumId;$(p).removeClass("mdui-color-blue-300"),(d=app.forumIdArr.indexOf(app.disciplineForumId))>-1&&app.forumIdArr.splice(d,1),app.disciplineArr.unshift(forumList[i])}else{for(var e in topicArr)if(topicArr[e].fid==forumList[i].fid)return screenTopWarning("该话题已在列表中");var d,a="#topForumId"+app.topicForumId;$(a).removeClass("mdui-color-blue-300"),(d=app.forumIdArr.indexOf(app.topicForumId))>-1&&app.forumIdArr.splice(d,1),app.topicArr.unshift(forumList[i])}},getFidAndCidResult:function(){var r={};if(0==app.forumIdArr.length)throw"请至少选择一个学科或话题";return r.fids=app.forumIdArr,r.cids=app.categoryIdArr,r}})}));
