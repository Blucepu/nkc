!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=new Vue({el:"#app",data:{username:"",email:"",code:"",password:"",password2:"",reg:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,inputPassword:!1,time:0},methods:{countdown:function(){this.time>0&&this.time--,setTimeout((function(){e.countdown()}),1e3)},sendEmail:function(){var r=this;return Promise.resolve().then((function(){if(!r.username)throw new Error("请输入用户名");if(!r.email)throw new Error("请输入邮箱地址");return NKC.methods.checkData.checkEmail(r.email),nkcAPI("/forgotPassword/email","POST",{username:r.username,email:r.email})})).then((function(){screenTopAlert("邮件发送成功，请查收"),e.time=120,e.inputPassword=!0,e.countdown()})).catch((function(e){screenTopWarning(e.error||e)}))},save:function(){var e=this;return Promise.resolve().then((function(){if(!e.username)throw new Error("请输入用户名");if(!e.email)throw new Error("请输入邮箱地址");if(NKC.methods.checkData.checkEmail(e.email),!e.code)throw new Error("请输入邮件验证码");if(!e.password)throw new Error("请输入新密码");if(e.password!==e.password2)throw new Error("两次输入的密码不一致");return nkcAPI("/forgotPassword/email","PUT",{username:e.username,email:e.email,code:e.code,password:e.password})})).then((function(){screenTopAlert("密码修改成功，正在前往登录页面"),setTimeout((function(){openToNewLocation("/login")}),1e3)})).catch((function(e){screenTopWarning(e.error||e)}))}}});window.app=e}));
