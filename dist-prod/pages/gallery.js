!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=function(){var e={imageItem:geid("GalleryImage"),titleItem:geid("GalleryTitle"),authorItem:geid("GalleryAuthor"),forumName:geid("GalleryForumName"),imageA:geid("GalleryImageA"),navileft:geid("GalleryNavigationLeft"),naviright:geid("GalleryNavigationRight"),next:function(t){var n=e.arr;e.counter=(e.counter+t+n.length)%n.length;var r=n[e.counter];e.render(r)},click:function(){e.end(),e.next(1),e.start()},backclick:function(){e.end(),e.next(-1),e.start()},start:function(){e.timer=setTimeout((function(){e.next(1),e.start()}),6e3)},end:function(){clearTimeout(e.timer)},render:function(t){var n=t.r,r=t.thread,i=t.forum;e.imageItem.src="/r/"+n._key,e.titleItem.innerHTML=r.oc.t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.titleItem.href="/t/"+r._key,e.imageA.href="/t/"+r._key,e.authorItem.innerHTML=r.ocuser.username,e.authorItem.href="/m/"+r.ocuser._key,e.forumName.innerHTML=i.display_name,e.forumName.href="/f/"+i._key},init:function(){e.navileft.addEventListener("click",e.backclick),e.naviright.addEventListener("click",e.click);var t={};return t.target=geid("gMain").getAttribute("fTarget"),console.log("gallery init..."),nkcAPI("getGalleryRecent",t).then((function(t){e.arr=t,e.counter=Math.floor(Math.random()*t.length)})).catch(jwarning)}};return e}();e.init().then((function(){e.start(),e.click()})),window.gallery=e}));
