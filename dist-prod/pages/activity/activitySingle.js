!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){return(t=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t}).apply(this,arguments)}window.customForm=void 0,NKC.modules.customForm&&(window.customForm=new NKC.modules.customForm),$("document").ready((function(){if($("#agreement").change((function(){1==$("#agreement").is(":checked")?$("#onpost").attr("disabled",!1):$("#onpost").attr("disabled",!0)})),$("#contionJSON").length>0){var t=JSON.parse($("#contionJSON").text());if($("#userJSON").length>0){var n=JSON.parse($("#userJSON").text());customForm.initResult(t,n)}if($("#infoJSON").length>0){var o=JSON.parse($("#infoJSON").text());customForm.initResultCond(t,o)}}})),t(window,{customForm:customForm,changeToApply:function(t){"hide"===$(t).attr("formShow")?($("#applyButton").text("取消报名"),$("#apply").css("display",""),$(t).attr("formShow","show")):($("#applyButton").text("我要报名"),$("#apply").css("display","none"),$(t).attr("formShow","hide"))},changeToEdit:function(t){"hide"===$(t).attr("formShow")?($("#editButton").text("取消修改"),$("#edit").css("display",""),$(t).attr("formShow","show")):($("#editButton").text("修改报名"),$("#edit").css("display","none"),$(t).attr("formShow","hide"))},changeToDescription:function(){$("#apply").css("display","none"),$("#description").css("display","")},onedit:function(t){var n=customForm.outputResultJSON();0!==n.length?nkcAPI("/activity/single/"+t,"PUT",{post:{acid:t,enrollInfo:n}}).then((function(t){sweetAlert("修改成功！"),setTimeout((function(){window.location.reload()}),1500)})).catch((function(t){sweetWarning(t.error)})):sweetWarning("必填项不得为空")},onpost:function(t){var n=customForm.outputResultJSON();0!==n.length?nkcAPI("/activity/single/"+t,"POST",{post:{acid:t,enrollInfo:n}}).then((function(t){sweetAlert("报名成功！"),setTimeout((function(){window.location.reload()}),1500)})).catch((function(t){sweetWarning(t.error)})):sweetWarning("必填项不得为空")},submitComment:function(t){var n=$("#commentContent").val().trim();if(""==n)return sweetWarning("请填写内容后再发表评论");nkcAPI("/activity/post/"+t,"POST",{post:{commentContent:n,acid:t}}).then((function(t){sweetAlert("发表成功！"),setTimeout((function(){window.location.reload()}),1500)})).catch((function(t){sweetWarning(t.error)}))},cancelApply:function(t){if(!1!==confirm("确认放弃报名？")){nkcAPI("/activity/single/"+t,"DELETE",{}).then((function(){sweetAlert("已取消报名"),setTimeout((function(){window.location.reload()}),1e3)})).catch((function(t){sweetWarning(t.error)}))}},editApply:function(t){}})}));
