!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";window.selectImage=void 0;var e=new Vue({el:"#app",data:{error:"",info:"",avatar:"",banner:"",avatarUrl:"",bannerUrl:"",column:{name:"",abbr:"",description:""},checked:!1},mounted:function(){window.selectImage=new NKC.methods.selectImage},methods:{selectedImage:function(e,n){"avatar"===n?this.selectedAvatar(e):this.selectedBanner(e)},selectedBanner:function(n){this.banner=n,NKC.methods.fileToUrl(n).then((function(n){e.bannerUrl=n,selectImage.close()}))},selectedAvatar:function(n){this.avatar=n,NKC.methods.fileToUrl(n).then((function(n){e.avatarUrl=n,selectImage.close()}))},selectBanner:function(){selectImage.show((function(n){e.selectedBanner(n)}),{aspectRatio:4})},selectAvatar:function(){selectImage.show((function(n){e.selectedAvatar(n)}),{aspectRatio:1})},submit:function(){this.error="",this.info="";var n=this.column;if(!this.avatar)return this.error="请选择专栏Logo";if(!this.banner)return this.error="请选择专栏Banner";if(!n.name)return this.error="请输入专栏名";if(!n.abbr)return this.error="请输入专栏简介";var t=new FormData;t.append("avatar",this.avatar),t.append("banner",this.banner),t.append("name",n.name),t.append("abbr",n.abbr),t.append("description",n.description),uploadFilePromise("/column",t,(function(n,t){e.info="提交中..."+t+"%"})).then((function(e){NKC.methods.visitUrl("/m/"+e.column._id)})).catch((function(n){e.info="",e.error=n.error||n}))}}})}));
