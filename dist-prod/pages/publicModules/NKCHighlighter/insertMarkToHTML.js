!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,f=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return l=t.done,t},e:function(t){f=!0,a=t},f:function(){try{l||null==r.return||r.return()}finally{if(f)throw a}}}}var r=document.getElementById("html");function o(t,e){var n=document.createElement("div");n.innerHTML=t,console.log(n)}o(r=r.innerHTML),t(window,{notes:[{_id:1,node:{offset:2,length:3}},{_id:2,node:{offset:5,length:12}},{_id:3,node:{offset:7,length:9}}],insertMarkToHTML:o,getNotes:function(t,e,r){for(var o=[t],i=0,a=null,l=r,f=[],u=!1;a=o.pop();){var c=a.childNodes;t:for(var s=c.length-1;s>=0;s--){var d=c[s];if(1===d.nodeType){var h,v=d.classList,g=n(this.hl.excludedElementClass);try{for(g.s();!(h=g.n()).done;){var y=h.value;if(v.contains(y))continue t}}catch(t){g.e(t)}finally{g.f()}var p=d.tagName.toLowerCase();if(this.hl.excludedElementTagName.includes(p))continue}o.push(d)}if(3===a.nodeType&&a.textContent.length&&(i+=a.textContent.length)>e){if(l<=0)break;var m=void 0;m=u?0:a.textContent.length-(i-e),u=!0;var b=void 0;l<=a.textContent.length-m?(b=l,l=0):l-=b=a.textContent.length-m,f.push({node:a,startOffset:m,needLength:b})}}return f=f.map((function(t){var e=t.node,n=t.startOffset,r=t.needLength;return n>0&&(e=e.splitText(n)),e.textContent.length!==r&&e.splitText(r),e}))}})}));
