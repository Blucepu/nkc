!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}NKC.modules.DraggablePanel=function(){function i(t){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i);var e=this;e.dom=$(t);e.dom.draggable({scroll:!1,handle:".draggable-panel-title",drag:function(t,i){i.position.top<0&&(i.position.top=0);var o=$(window).height();i.position.top>o-30&&(i.position.top=o-30);var n=e.dom.width();i.position.left<100-n&&(i.position.left=100-n);var s=$(window).width();i.position.left>s-100&&(i.position.left=s-100)}}),e.resetPosition(),e.dom.on("click",(function(){e.active()})),window.addEventListener("popstate",(function(t){e.hidePanel()}))}var e,o,n;return e=i,(o=[{key:"resetPosition",value:function(){var t=this.dom,i=$(window).width(),e=$(window).height();i<700?t.css({top:0,left:0}):(t.css("left",.5*(i-t.width())),t.css("top",.5*(e-t.height())))}},{key:"active",value:function(){for(var t,i=$(".draggable-panel"),e=0;e<i.length;e++){var o=i.eq(e).attr("data-z-index");void 0!==!o&&(o=Number(o),(void 0===t||t<o)&&(t=o))}t=(t||5e3)+1,this.dom.css({"z-index":t}),this.dom.attr("data-z-index",t)}},{key:"setSize",value:function(t){var i=this.dom;$(window).width()<700&&("show"===t?i.css({width:"80%",left:"20%"}):i.css({width:"auto"}))}},{key:"showPanel",value:function(){this.resetPosition(),this.setSize("show"),this.active(),this.dom.css("display","block"),window.history.pushState({sign:"draggablePanel"},"",""),window.history.go(1)}},{key:"hidePanel",value:function(){this.dom.css("display","none"),this.setSize("hide"),window.history.state&&"draggablePanel"===window.history.state.sign&&window.history.go(-1)}}])&&t(e.prototype,o),n&&t(e,n),i}()}));
