!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";NKC.modules.Transfer=function(){return function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=this;e.dom=$("#moduleTransfer"),e.dom.modal({show:!1,backdrop:"static"}),e.app=new Vue({el:"#moduleTransferApp",data:{loading:!0,score:"",error:"",password:"",number:"",tUid:"",kcbOnce:""},methods:{open:function(n,o){this.tUid=o,nkcAPI("/u/".concat(o,"/transfer?t=").concat(Date.now()),"GET").then((function(n){e.app.kcbOnce=n.kcbOnce,e.app.score=n.shopScore})).catch((function(n){e.app.kcbOnce=n.kcbOnce,e.app.error=n.error||n})),e.callback=n,e.dom.modal("show")},close:function(){e.dom.modal("hide"),e.app.password=""},submit:function(){this.error="",Promise.resolve().then((function(){var n=NKC.methods.checkData.checkNumber,o=e.app,c=o.password,r=o.number,t=o.kcbOnce;if(n(r,{name:"转账金额",min:.01,fractionDigits:2}),(r=parseInt(100*r))>t)throw"转账金额不能超过".concat(t/100,"kcb");if(!c)throw"请输入密码";return nkcAPI("/u/".concat(e.app.tUid,"/transfer"),"POST",{password:c,number:r})})).then((function(){sweetSuccess("转账成功"),e.close()})).catch((function(n){e.app.error=n.error||n}))}}}),e.open=e.app.open,e.close=e.app.close}}()}));
