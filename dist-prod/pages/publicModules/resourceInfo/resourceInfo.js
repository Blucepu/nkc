!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";NKC.modules.ResourceInfo=function(){var e=this;e.dom=$("#moduleResourceInfo").modal({show:!1}),e.app=new Vue({el:"#moduleResourceInfoApp",data:{type:"",loading:!0,forums:[],resource:"",path:"",uid:NKC.configs.uid||"",modifyAllResource:!1},methods:{getUrl:NKC.methods.tools.getUrl,visitUrl:NKC.methods.visitUrl,format:NKC.methods.format,getSize:NKC.methods.tools.getSize,removeResourceFromLibrary:removeResourceFromLibrary,getResource:function(o){e.app.type="resource",nkcAPI("/r/"+o+"/info","GET").then((function(o){delete o.resource.type,e.app.loading=!1,e.app.resource=o.resource,e.app.forums=o.forums,e.app.path=o.path,e.app.modifyAllResource=!!o.modifyAllResource})).catch((function(e){sweetError(e)}))},getLibrary:function(o){e.app.type="library",nkcAPI("/library/"+o+"?info=true&path=true","GET").then((function(o){e.app.loading=!1,e.app.path=o.path,e.app.resource=o.library})).catch((function(e){sweetError(e)}))},open:function(o){o=o||{},e.dom.modal("show"),o.lid?this.getLibrary(o.lid):o.rid&&this.getResource(o.rid)},close:function(){e.dom.modal("hide")},download:function(e){var o=this.resource.resource.oname;nkcAPI("/r/"+e+"/pay","POST").then((function(){var r=document.createElement("a");r.setAttribute("download",o),r.href="/r/"+e,r.target="_blank",r.click()})).catch(sweetError)}}}),e.open=e.app.open,e.close=e.app.close}}));
