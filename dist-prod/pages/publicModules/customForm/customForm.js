!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(s){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(s)}function s(){return(s=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t}).apply(this,arguments)}NKC.modules.customForm=function(){var t=this;t.config={},t.open=function(t){},t.initResult=function(s,o){if(t.openFormResult(),o)var i=u(s,o);else i=u(s);$("#formResult").html(i)},t.initResultCond=function(s,o){if(t.openFormResult(),o)var i=c(s,o);else i=c(s);$("#formResult").html(i)},t.outputResultJSON=function(){var t=[];return $("#formResult").find(".preview-form-item").each((function(){var s=$(this).find(".custom-title").text(),o=$(this).attr("data-id"),i=!1;$(this).find(".custom-require").length>0&&(i=!0);var a,c=$(this).attr("data-formType");if(-1!==["text","textarea","number"].indexOf(c))a=$(this).find(".custom-input").val()||"";else if("radio"===c)a=$(this).find("input[type=radio][name='"+s+"']:checked").val()||"";else if("checkbox"===c){a=[];for(var e=$(this).find("input:checkbox"),n=0;n<e.length;n++)$(e[n]).prop("checked")&&a.push($(e[n]).val())}else"select"===c&&(a=$(this).find("#"+s).val()||"");var u={id:o,key:s,value:a};if(i&&0===a.length)return t=[],!1;t.push(u)})),t},t.outputJSON=function(){return p()},t.openFormInit=function(){$("#formInit").css("display","")},t.openFormResult=function(){$("#formResult").css("display","")},t.init=function(s){if(t.openFormInit(),s){for(var o="",i=0;i<s.length;i++)o+=t.initSingle(s[i]);$("#customFormArea").html(o)}},t.initSingle=function(s){var o=t.initFormListObj[s.formType];if(o=s.infoName&&s.infoName.length>0?o.replace(/\[infoName\]/gim,s.infoName):o.replace(/\[infoName\]/gim,""),o=s.isCheck?o.replace(/\[isCheck\]/gim,"checked=checked"):o.replace(/\[isCheck\]/gim,""),o=s.infoDesc&&s.infoDesc.length>0?o.replace(/\[infoDesc\]/gim,s.infoDesc):o.replace(/\[infoDesc\]/gim,""),o=s.infoId&&s.infoId.length>0?o.replace(/\[dataId\]/gim,s.infoId):o.replace(/\[infoDesc\]/gim,""),-1!==["radio","checkbox","select"].indexOf(s.formType)){for(var i="",a=0;a<s.infoPara.length;a++)i+="<div class='custom-form-sub-item'><input type='text' value='"+s.infoPara[a]+"' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>";o=o.replace(/\[infoPara\]/gim,i)}else o=o.replace(/\[infoPara\]/gim,"");return o=s.infoSpecial&&s.infoSpecial.length>0?o.replace(/\[infoSpecial\]/gim,s.infoSpecial):o.replace(/\[infoSpecial\]/gim,"")},t.initFormListObj={text:"<div class='custom-form-item' data-formType='text' data-id='[dataId]' data-special='[infoSpecial]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input' [isCheck]> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='[infoName]' title='' class='custom-input' id='infoName'> <input type='text' value='[infoDesc]' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>",textarea:"<div class='custom-form-item' data-formType='textarea' data-id='[dataId]' data-special='[infoSpecial]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input' [isCheck]> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='[infoName]' title='' class='custom-input' id='infoName'> <input type='text'value='[infoDesc]' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>",number:"<div class='custom-form-item' data-formType='number' data-id='[dataId]' data-special='[infoSpecial]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input' [isCheck]> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='[infoName]' title='' class='custom-input' id='infoName'> <input type='text' value='[infoDesc]' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>",radio:"<div class='custom-form-item' data-formType='radio' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input' [isCheck]> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='[infoName]' title='' class='custom-input' id='infoName'> <input type='text' value='[infoDesc]' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div> <div class='custom-form-sub'><h1 class='custom-form-sub-title'>选项列表</h1> <div class='custom-form-sub-list'>[infoPara]<div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div></div></div></div></div>",checkbox:"<div class='custom-form-item' data-formType='checkbox' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input' [isCheck]> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='[infoName]' title='' class='custom-input' id='infoName'> <input type='text'value='[infoDesc]' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div> <div class='custom-form-sub'><h1 class='custom-form-sub-title'>选项列表</h1> <div class='custom-form-sub-list'>[infoPara]<div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div></div></div></div></div>",select:"<div class='custom-form-item' data-formType='select' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input' [isCheck]> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='[infoName]' title='' class='custom-input' id='infoName'> <input type='text' value='[infoDesc]' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div> <div class='custom-form-sub'><h1 class='custom-form-sub-title'>选项列表</h1> <div class='custom-form-sub-list'>[infoPara]<div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div></div></div></div></div>"}};var o={kcname:{name:"用户名",dom:"<div class='custom-form-item' data-formType='text' data-id='[dataId]' data-special='username'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='用户名' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},mobile:{name:"手机号码",dom:"<div class='custom-form-item' data-formType='text' data-id='[dataId]' data-special='mobile'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='手机号码' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},city:{name:"地址",dom:"<div class='custom-form-item' data-formType='text' data-id='[dataId]' data-special='city'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='地址' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},company:{name:"公司单位",dom:"<div class='custom-form-item' data-formType='text' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='公司单位' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},department:{name:"部门",dom:"<div class='custom-form-item' data-formType='text' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='部门' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},position:{name:"职位",dom:"<div class='custom-form-item' data-formType='text' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' value='职位' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},gender:{name:"性别",dom:"<div class='custom-form-item' data-formType='radio' data-id='[dataId]'>  <label class='custom-checkbox'>   <input type='checkbox' class='custom-input-checkbox must-input'>   <span class='custom-checkbox-text'>必填</span> </label> <div class='custom-form-box'>   <div class='custom-form-box-line'>     <input type='text' value='性别' title='' class='custom-input' id='infoName'>     <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'>     <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button>   </div>   <div class='custom-form-sub'>     <h1 class='custom-form-sub-title'>选项列表</h1>     <div class='custom-form-sub-list'>       <div class='custom-form-sub-item'><input type='text' value='男' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='女' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div>     </div>   </div> </div></div>"},age:{name:"年龄",dom:"<div class='custom-form-item' data-formType='radio' data-id='[dataId]'>  <label class='custom-checkbox'>   <input type='checkbox' class='custom-input-checkbox must-input'>   <span class='custom-checkbox-text'>必填</span> </label> <div class='custom-form-box'>   <div class='custom-form-box-line'>     <input type='text' value='年龄' title='' class='custom-input' id='infoName'>     <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'>     <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button>   </div>   <div class='custom-form-sub'>     <h1 class='custom-form-sub-title'>选项列表</h1>     <div class='custom-form-sub-list'>       <div class='custom-form-sub-item'><input type='text' value='15岁以下' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='16~20岁' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='21~25岁' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='26~30岁' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='31~40岁' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='40岁以上' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div>     </div>   </div> </div></div>"},education:{name:"学历",dom:"<div class='custom-form-item' data-formType='radio' data-id='[dataId]'>  <label class='custom-checkbox'>   <input type='checkbox' class='custom-input-checkbox must-input'>   <span class='custom-checkbox-text'>必填</span> </label> <div class='custom-form-box'>   <div class='custom-form-box-line'>     <input type='text' value='学历' title='' class='custom-input' id='infoName'>     <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'>     <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button>   </div>   <div class='custom-form-sub'>     <h1 class='custom-form-sub-title'>选项列表</h1>     <div class='custom-form-sub-list'>       <div class='custom-form-sub-item'><input type='text' value='中学' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='大专' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='本科' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='硕士' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='博士' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='其他' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div>     </div>   </div> </div></div>"},income:{name:"月收入",dom:"<div class='custom-form-item' data-formType='radio' data-id='[dataId]'>  <label class='custom-checkbox'>   <input type='checkbox' class='custom-input-checkbox must-input'>   <span class='custom-checkbox-text'>必填</span> </label> <div class='custom-form-box'>   <div class='custom-form-box-line'>     <input type='text' value='月收入' title='' class='custom-input' id='infoName'>     <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'>     <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button>   </div>   <div class='custom-form-sub'>     <h1 class='custom-form-sub-title'>选项列表</h1>     <div class='custom-form-sub-list'>       <div class='custom-form-sub-item'><input type='text' value='1k以下' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='1k~3.5k' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='3.5k~6k' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='6k~10k' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-item'><input type='text' value='10k以上' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>       <div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div>     </div>   </div> </div></div>"}};function i(t){var s=d();return t=t.replace(/\[dataId\]/gim,s)}var a={text:{name:"单行文本框",dom:"<div class='custom-form-item' data-formType='text' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' placeholder='单行文本框' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},textarea:{name:"多行文本框",dom:"<div class='custom-form-item' data-formType='textarea' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' placeholder='多行文本框' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},number:{name:"数字输入框",dom:"<div class='custom-form-item' data-formType='number' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' placeholder='数字输入框' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div></div></div>"},radio:{name:"单选按钮组",dom:"<div class='custom-form-item' data-formType='radio' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' placeholder='单选按钮组' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div> <div class='custom-form-sub'><h1 class='custom-form-sub-title'>选项列表</h1> <div class='custom-form-sub-list'> <div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div></div></div></div></div>"},checkbox:{name:"多选按钮组",dom:"<div class='custom-form-item' data-formType='checkbox' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' placeholder='多选按钮组' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div> <div class='custom-form-sub'><h1 class='custom-form-sub-title'>选项列表</h1> <div class='custom-form-sub-list'><div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div></div></div></div></div>"},select:{name:"下拉选择框",dom:"<div class='custom-form-item' data-formType='select' data-id='[dataId]'> <label class='custom-checkbox'><input type='checkbox' class='custom-input-checkbox must-input'> <span class='custom-checkbox-text'>必填</span></label> <div class='custom-form-box'><div class='custom-form-box-line'><input type='text' placeholder='下拉选择框' title='' class='custom-input' id='infoName'> <input type='text' placeholder='提示信息在这里' class='custom-input' id='infoDesc'> <span class='custom-form-sub-button fa fa-trash-o' onclick='delCustomFormOption(this)'></span> <button onclick='upToForm(this)' class='upButton'>↑</button><button onclick='downToForm(this)' class='downButton'>↓</button></div> <div class='custom-form-sub'><h1 class='custom-form-sub-title'>选项列表</h1> <div class='custom-form-sub-list'><div class='custom-form-sub-add'><span class='custom-form-sub-button fa fa-plus-square' onclick='addOptionValue(this)'></span></div></div></div></div></div>"}};function c(s,o){var i="";for(var a in s){if("object"===t(s[a]))i+=e(s[a],o)}return i}function e(t,s){var o,i=n[t.formType];for(var a in i=t.formType&&t.formType.length>0?i.replace(/\[formType\]/gim,"data-formType="+t.formType):i.replace(/\[formType\]/gim,""),i=t.infoName&&t.infoName.length>0?i.replace(/\[infoName\]/gim,"<span class='custom-title'>"+t.infoName+"</span>"):i.replace(/\[infoName\]/gim,""),i=t.infoId&&t.infoId.length>0?i.replace(/\[dataId\]/gim,t.infoId):i.replace(/\[dataId\]/gim,""),i=t.isCheck?i.replace(/\[isCheck\]/gim,"<span class='custom-require'>*</span>"):i.replace(/\[isCheck\]/gim,""),i=t.infoDesc&&t.infoDesc.length>0?i.replace(/\[infoDesc\]/gim,t.infoDesc):i.replace(/\[infoDesc\]/gim,""),s)s[a].id===t.infoId&&(o=s[a].value);if(-1!==["radio","checkbox","select"].indexOf(t.formType)){var c="";for(a=0;a<t.infoPara.length;a++)"radio"===t.formType?o&&o.indexOf(t.infoPara[a])>-1?c+="<label class='m-rb-10'><input class='custom-input-radio' type='radio' value='"+t.infoPara[a]+"' name='"+t.infoName+"' checked/><span>"+t.infoPara[a]+"</span></label>":c+="<label class='m-rb-10'><input class='custom-input-radio' type='radio' value='"+t.infoPara[a]+"' name='"+t.infoName+"'/><span>"+t.infoPara[a]+"</span></label>":"checkbox"===t.formType?o&&o.indexOf(t.infoPara[a])>-1?c+="<label class='m-rb-10'><input class='custom-input-checkbox' type='checkbox' value='"+t.infoPara[a]+"' name='"+t.infoName+"' checked/><span>"+t.infoPara[a]+"</span></label>":c+="<label class='m-rb-10'><input class='custom-input-checkbox' type='checkbox' value='"+t.infoPara[a]+"' name='"+t.infoName+"'/><span>"+t.infoPara[a]+"</span></label>":"select"===t.formType&&(o&&o.indexOf(t.infoPara[a])>-1?c+="<option value='"+t.infoPara[a]+"' selected>"+t.infoPara[a]+"</option>":c+="<option value='"+t.infoPara[a]+"'>"+t.infoPara[a]+"</option>");i=i.replace(/\[infoPara\]/gim,c)}else i=o?i.replace(/\[infoPara\]/gim,o):i.replace(/\[infoPara\]/gim,"");return"select"===t.formType&&(i=i.replace(/\[selectId\]/gim,t.infoName)),t.infoSpecial&&"city"===t.infoSpecial&&(i=i.replace(/class='custom-input'/,"class='custom-input' onclick='SetAgencyCity(this)'")),i}var n={text:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><input class='custom-input' type='' placeholder='[infoDesc]' value='[infoPara]'></div></div>",number:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><input class='custom-input' type='number' placeholder='[infoDesc]' value='[infoPara]'/></div></div>",textarea:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><textarea class='custom-input custom-input-textarea' placeholder='[infoDesc]'></textarea></div></div>",radio:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><p class='form-small-title'>[infoDesc]</p>[infoPara]</div></div>",checkbox:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><p class='form-small-title'>[infoDesc]</p>[infoPara]</div></div>",select:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><p class='form-small-title'>[infoDesc]</p><select class='custom-select' name='' id='[selectId]'>[infoPara]</select></div></div>"};function u(s,o){var i="";for(var a in s)if("object"===t(s[a])){if(o)if(s[a].infoSpecial)var c=l(s[a],o);else c=l(s[a]);else c=l(s[a]);i+=c}return i}function l(t,s){var o=m[t.formType];if(o=t.formType&&t.formType.length>0?o.replace(/\[formType\]/gim,"data-formType="+t.formType):o.replace(/\[formType\]/gim,""),o=t.infoName&&t.infoName.length>0?o.replace(/\[infoName\]/gim,"<span class='custom-title'>"+t.infoName+"</span>"):o.replace(/\[infoName\]/gim,""),o=t.infoId&&t.infoId.length>0?o.replace(/\[dataId\]/gim,t.infoId):o.replace(/\[dataId\]/gim,""),o=t.isCheck?o.replace(/\[isCheck\]/gim,"<span class='custom-require'>*</span>"):o.replace(/\[isCheck\]/gim,""),o=t.infoDesc&&t.infoDesc.length>0?o.replace(/\[infoDesc\]/gim,t.infoDesc):o.replace(/\[infoDesc\]/gim,""),-1!==["radio","checkbox","select"].indexOf(t.formType)){for(var i="",a=0;a<t.infoPara.length;a++)"radio"===t.formType?i+="<label class='m-rb-10'><input class='custom-input-radio' type='radio' value='"+t.infoPara[a]+"' name='"+t.infoName+"'/><span>"+t.infoPara[a]+"</span></label>":"checkbox"===t.formType?i+="<label class='m-rb-10'><input class='custom-input-checkbox' type='checkbox' value='"+t.infoPara[a]+"' name='"+t.infoName+"'/><span>"+t.infoPara[a]+"</span></label>":"select"===t.formType&&(i+="<option value='"+t.infoPara[a]+"'>"+t.infoPara[a]+"</option>");o=o.replace(/\[infoPara\]/gim,i)}else o=o.replace(/\[infoPara\]/gim,"");if("select"===t.formType&&(o=o.replace(/\[selectId\]/gim,t.infoName)),s){if("text"===t.formType&&t.infoSpecial){var c="";for(var e in s)e==t.infoSpecial&&(c=s[e]);o=o.replace(/\[info\]/gim,c)}}else o=o.replace(/\[info\]/gim,"");return t.infoSpecial&&"city"===t.infoSpecial&&(o=o.replace(/class='custom-input'/,"class='custom-input' onclick='SetAgencyCity(this)'")),o}var m={text:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><input class='custom-input' type='' placeholder='[infoDesc]' value='[info]'></div></div>",number:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><input class='custom-input' type='number' placeholder='[infoDesc]' value='[info]'/></div></div>",textarea:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><textarea class='custom-input custom-input-textarea' placeholder='[infoDesc]'></textarea></div></div>",radio:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><p class='form-small-title'>[infoDesc]</p>[infoPara]</div></div>",checkbox:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><p class='form-small-title'>[infoDesc]</p>[infoPara]</div></div>",select:"<div class='preview-form-item' [formType] data-id='[dataId]'><div class='form-box'><p class='form-title'>[infoName][isCheck]</p><p class='form-small-title'>[infoDesc]</p><select name='' id='[selectId]' class='custom-select'>[infoPara]</select></div></div>"};function p(){var t=[],s=[];return $("#stableFormArea").find(".custom-form-item").each((function(){var s=$(this).find(".custom-input-checkbox").prop("checked"),o=$(this).find("#infoName").val(),i=$(this).find("#infoDesc").val(),a=$(this).attr("data-formType"),c=$(this).attr("data-id"),e="";$(this).attr("data-special")&&(e=$(this).attr("data-special"));var n=[],u=$(this).find(".custom-form-sub");u.length>0&&u.find(".custom-form-sub-item").each((function(){var t=$(this).find(".custom-form-sub-input").val();t.length>0&&n.push(t)}));var l={infoName:o,infoDesc:i,formType:a,infoPara:n,infoId:c,isCheck:s,infoSpecial:e};t.push(l)})),$("#customFormArea").find(".custom-form-item").each((function(){var t=$(this).find(".custom-input-checkbox").prop("checked"),o=$(this).find("#infoName").val(),i=$(this).find("#infoDesc").val(),a=$(this).attr("data-formType"),c=$(this).attr("data-id"),e="";$(this).attr("data-special")&&(e=$(this).attr("data-special"));var n=[],u=$(this).find(".custom-form-sub");u.length>0&&u.find(".custom-form-sub-item").each((function(){var t=$(this).find(".custom-form-sub-input").val();t.length>0&&n.push(t)}));var l="";if("select"===a&&n.length<2&&0==$(this).next(".error-text").length&&(l="下拉列表项最少要有两个选项"),l.length>0)var m={infoName:o,infoDesc:i,formType:a,infoPara:n,infoId:c,isCheck:t,errorInfo:l,infoSpecial:e};else m={infoName:o,infoDesc:i,formType:a,infoPara:n,infoId:c,isCheck:t,infoSpecial:e};s.push(m)})),t.concat(s)}function d(){var t=8,s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o="";t=parseInt(t);for(var i=0;i<t;i++){o+=s[Math.round(Math.random()*(s.length-1))]}return o}s(window,{addCommonFormOption:function(t){$("#customFormArea").append(i(o[t].dom))},commonFormListObj:o,addCustomFormOption:function(t){$("#customFormArea").append(i(a[t].dom))},addCodeToOption:i,customFormListObj:a,delCustomFormOption:function(t){$(t).parents(".custom-form-item").remove()},addOptionValue:function(t){$(t).parents(".custom-form-sub-add").before("<div class='custom-form-sub-item'><input type='text' placeholder='选项类型' title='' class='custom-input custom-form-sub-input'> <span class='custom-icon-del fa fa-times' onclick='delOptionValue(this)'></span></div>")},delOptionValue:function(t){$(t).parents(".custom-form-sub-item").remove()},reViewFormList:function(){var t=p();$("#formReviewModal").modal();var s=u(t);$("#reviewArea").html(s)},buildUpFormListCond:c,buildUpOneFormCond:e,reviewFormListObjCond:n,buildUpFormList:u,buildUpOneForm:l,reviewFormListObj:m,outputFormListJSON:p,makeRandomCode:d,upToForm:function(t){var s=$(t).parents(".custom-form-item"),o=s.prev();if(s.next(),!o.attr("class"))return screenTopWarning("已经到了最顶部");s.fadeOut("slow",(function(){o.before(s)})).fadeIn()},downToForm:function(t){var s=$(t).parents(".custom-form-item");s.prev();var o=s.next();if(s.next().next(),!o.attr("class"))return screenTopWarning("已经到了最底部");s.fadeOut("slow",(function(){o.after(s)})).fadeIn()}})}));
