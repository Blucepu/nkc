!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t=new Vue({el:"#floatUserPanel",data:{show:!1,panelSwitch:!1,subUid:[],top:0,left:0,user:{},uid:"",usersObj:{},timeout:""},mounted:function(){var t=NKC.methods.strToObj(this.$el.getAttribute("data-sub-uid"));this.subUid=t.subUid,$("#floatUserPanel").on("mouseover",this.onPanel).on("mouseleave",this.outPanel)},methods:{fromNow:NKC.methods.fromNow,format:NKC.methods.format,getUrl:NKC.methods.tools.getUrl,close:function(e){var o=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e===o.uid&&(t.show=!1)}),100)},onPanel:function(){clearTimeout(this.timeout)},outPanel:function(){this.show=!1},getMousePosition:function(t){var e=t||window.event,o=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop;return{x:e.pageX||e.clientX+o,y:(e.pageY||e.clientY+n)-$(document).scrollTop()}},open:function(t,e){var o=this;this.uid=e,(t=$(t)).on("mouseleave",(function(){o.close(e)})),o.show=!0;var n=t.offset(),s=$(document).scrollTop(),i=$(document).width();n.left+300>i?this.left=i-300:this.left=parseInt(n.left),this.top=parseInt(n.top)-s+t.height()+15;var u=this.usersObj[e];Promise.resolve().then((function(){if(!u)return nkcAPI("/u/"+e+"?from=panel","GET")})).then((function(t){if(!u){if(o.uid!==t.targetUser.uid)return;u=t.targetUser,o.usersObj[u.uid]=u}o.user=u})).catch((function(t){"发起请求失败，请检查网络连接"!==t&&sweetError(t)}))}}});window.floatUserPanel=t}));
