!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=NKC.methods.getDataById("data");new Vue({el:"#app",data:{column:e.column,mainCategories:e.mainCategories,minorCategories:e.minorCategories,contributes:[],unresolvedCount:0,resolvedCount:0,nav:"unresolved",paging:{page:0,buttonValue:[]}},mounted:function(){this.getContributes(0)},methods:{fromNow:NKC.methods.fromNow,agree:function(e){this.submit(e,"agree")},disagree:function(e){this.submit(e,"disagree")},switchNav:function(e){this.nav=e,this.getContributes(0)},selectPage:function(e,t){"null"!==e&&this.getContributes(t)},getContributes:function(e){var t=this.nav,n=this;e=e>=0?e:this.paging.page,nkcAPI("/m/"+this.column._id+"/settings/contribute?page="+e+"&t="+t,"GET").then((function(e){n.unresolvedCount=e.unresolvedCount,n.resolvedCount=e.resolvedCount;for(var t=0;t<e.contributes.length;t++)e.contributes[t].agree="";n.contributes=e.contributes,n.paging=e.paging})).catch((function(e){screenTopWarning(e.error||e)}))},submit:function(e){var t=this,n=e.agree,i=e.reason,o=e.cid,r=e.mcid,s="agree";if(n){if(0===o.length)return screenTopWarning("请选择文章分类")}else s="disagree";nkcAPI("/m/"+this.column._id+"/settings/contribute","POST",{contributesId:[e._id],reason:i,mainCategoriesId:o,minorCategoriesId:r,type:s}).then((function(){screenTopAlert("操作成功"),t.getContributes()})).catch((function(e){screenTopWarning(e)}))}}})}));
