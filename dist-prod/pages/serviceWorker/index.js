!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";importScripts("/socketio/socket.io.min.js"),self.addEventListener("install",(function(e){return self.skipWaiting()}));var e=io("/common",{forceNew:!1,reconnection:!0,autoConnect:!0,transports:["polling","websocket"],reconnectionDelay:5e3,reconnectionDelayMax:1e4,jsonp:!1,query:{serviceWorker:!0,data:{}}});function n(e){self.clients.matchAll({includeUncontrolled:!0,type:"window"}).then((function(n){n.forEach((function(n){n.postMessage(e)}))}))}e.on("connect",(function(){console.log("service worker socket.io 连接成功")})),e.on("disconnect",(function(){console.log("service worker socket.io 连接断开")})),e.onAny((function(){var e=[].slice.call(arguments);n({type:"socket_event_trigger",detail:{name:e[0],args:e.slice(1)}})})),self.addEventListener("message",(function(e){console.log("页面发来的消息: ",e)})),self.socket=e}));
