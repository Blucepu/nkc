extends ./columnBase
block columnTitle
  title=`${data.column.name}`
block content
  include ./modules/columnHeader
  include ./modules/contribute
  +mixinColumnHeader({
    user: data.user,
    column: data.column,
    subColumnsId: state.subColumnsId,
    navCategories: data.navCategories,
    categories: data.categories,
    hideBanner: false
  })
  .container-fluid.max-width
    .column
      .row
        .col-xs-12.col-md-8.box-shadow-panel.m-t-1.p-r-0
          div
            if data.category
              .column-category-nav
                a(href=`/m/${data.column._id}` data-type='reload') 首页
                for c, index in data.categoriesNav
                  span /
                  a(href=`/m/${data.column._id}?c=${c._id}` data-type='reload')= c.name
                .column-category-abbr=data.category.description
              if data.minorCategories.length > 0
                .column-minor-categories
                  a(data-type='reload' href=`/m/${data.column._id}?c=${data.category._id}` class=!data.minorCategory?'active':'').column-minor-category 全部
                  for c, index in data.minorCategories
                    a(
                      href=`/m/${data.column._id}?c=${data.category._id}-${c._id}`
                      class=data.minorCategory && data.minorCategory._id === c._id? 'active':''
                      title=c.description
                      data-type='reload'
                      ).column-minor-category=c.name
            if data.paging.page === 0 && data.topped.length > 0
              .m-t-05
              for columnPost in data.topped
                include ./singleColumnPost
              if data.category
                .column-posts-body-info — 以上为分类置顶 —
              else
                .column-posts-body-info — 以上为专栏置顶 —
            div(style="margin-bottom: -0.6rem;")
              include ../publicModules/paging/paging
            .column-posts-body
              if data.columnPosts.length === 0 && data.topped.length === 0
                .text-center.p-t-5.p-b-5
                  h4 空空如也~
                  if data.user && data.user.uid === data.column.uid
                    .m-t-1
                      | 点击
                      a(href=`/m/${data.column._id}/settings/post/add` target="_blank")
                        b 添加文章
                      | ，可批量将文章推送到专栏。
              else
                for columnPost in data.columnPosts
                  if data.paging.page !== 0 || !data.toppedId.includes(columnPost._id)
                    include ./singleColumnPost
            include ../publicModules/paging/paging_input
        .col-xs-12.col-md-4.box-shadow-panel.m-t-1
          +mixinColumnContribute(data.user, data.column)
          include ./modules/management
          include ./modules/info
block scripts
  include ../publicModules/commonModal/commonModal
  include ../publicModules/selectColor
  include ../publicModules/subscribeTypes/subscribeTypes
  +includeJS("/columns/column.js")
  +includeJS("/columns/management.js")
  +mixinColumnNavLinkScript()
