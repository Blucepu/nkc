extends ./base
block columnTitle
  title 资料设置
block settingsContent
  .hidden#data=objToStr({column: data.column})
  .row#app(v-cloak)
    .col-xs-12.col-md-12
    .col-xs-12.col-md-8.col-md-offset-2.m-t-3.m-b-3
      .column-settings-banner(@click="selectBanner")
        img(:src="bannerUrl")
      .text-center
        .column-settings-avatar(@click="selectAvatar")
          img(:src="avatarUrl")
      .form
        .form-group
          h4 专栏名（不超过30字符）
          input.form-control(type="text" v-model.trim="column.name")
        .form-group
          h4 专栏简介（不超过60字符）
          textarea.form-control(rows=3 v-model.trim="column.abbr")
        .form-group
          h4 专栏介绍（不超过1000字符）
          textarea.form-control(rows=6 v-model.trim="column.description")
        .form-group
          h4 专栏首页背景颜色
          input.form-control(data-control="selectColor" v-model.trim="column.color")
        .form-group
          h4 公告通知（不超过600字符，支持部分markdown）
          textarea.form-control(rows=5 v-model.trim="column.notice")
        .form-group
          h4 自定义链接
          div
            div(v-for="link,index in column.links")
              .form-inline.m-t-05
                label 链接{{index+1}}：
                input.form-control(type="text" v-model="link.name" placeholder="链接名(不超过20字节)")
                input.form-control(type="text" v-model="link.url" placeholder="链接")
                button.btn.btn-sm.btn-default(@click="moveLink('up', index)") 上移
                button.btn.btn-sm.btn-default(@click="moveLink('down', index)") 下移
                button.btn.btn-sm.btn-danger(@click="removeLink(index)") 删除
            .m-t-05
              button.btn.btn-sm.btn-default(@click="addLink") 添加自定义链接
        .form-group
          h5.text-danger(v-if="error") {{error}}
          h5.text-success(v-if="info") {{info}}
          button.btn.btn-primary.btn-block(@click="submit") 保存
          .m-t-1.text-right
            a.m-r-1(href=`/m/${data.column._id}/settings/transfer`) 专栏转让
            a(href=`/m/${data.column._id}/settings/close`) 关闭专栏
block scripts
  include ../../publicModules/crop/crop
  include ../../publicModules/selectColor
  +includeJS("/columns/settings/info.js")