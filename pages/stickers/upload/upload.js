!function n(o,i,u){function a(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return a(o[t][1][e]||e)},r,r.exports,n,o,i,u)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)a(u[e]);return a}({1:[function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=new NKC.methods.selectImage;window.app=new Vue({el:"#app",data:{type:"multiple",name:"",description:"",cover:"",coverData:"",share:!1,stickers:[],error:"",uploading:!1},computed:{disableButton:function(){var e,t=!0,r=n(this.stickers);try{for(r.s();!(e=r.n()).done;)"uploaded"!==e.value.status&&(t=!1)}catch(e){r.e(e)}finally{r.f()}return t}},methods:{getSize:NKC.methods.getSize,selectLocalFile:function(){$("#uploadInput").click()},selectedLocalFile:function(){var t=n($("#uploadInput")[0].files);try{for(t.s();!(e=t.n()).done;){var e=e.value;this.addSticker(e)}}catch(e){t.e(e)}finally{t.f()}},addSticker:function(e){var t=this;this.getStickerByFile(e).then(function(e){t.stickers.push(e)})},getStickerByFile:function(n,o){return new Promise(function(t,e){var r={file:n,progress:0,error:"",status:"unUploaded",name:o||n.name||Date.now()+".png"};NKC.methods.fileToUrl(n).then(function(e){r.url=e,t(r)})})},removeFormArr:function(e,t){e.splice(t,1)},cropImage:function(t){var r=this.stickers.indexOf(t),n=this;o.show(function(e){e=NKC.methods.blobToFile(e);n.getStickerByFile(e,t.file.name).then(function(e){Vue.set(n.stickers,r,e),o.close()})},{url:t.url,aspectRatio:1})},upload:function(t,r){var n=this;if(!t.length||r>=t.length||!t[r])return n.uploading=!1;var o=t[r];n.uploading=!0,Promise.resolve().then(function(){o.status="uploading";var e=new FormData;return e.append("file",o.file),e.append("type","sticker"),e.append("fileName",o.name),n.share&&e.append("share","true"),nkcUploadFile("/r","POST",e,function(e,t){o.progress=t})}).then(function(){o.status="uploaded",n.upload(t,r+1)}).catch(function(e){o.error=e.error||e,o.status="unUploaded",n.upload(t,r+1)})},submit:function(){var e=(e=this.stickers).filter(function(e){return"uploaded"!==e.status});this.upload(e,0)}}})},{}]},{},[1]);