!function i(a,u,l){function c(t,e){if(!u[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(s)return s(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=u[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,i,a,u,l)}return u[t].exports}for(var s="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=new NKC.methods.selectImage;window.app=new Vue({el:"#app",data:{type:"multiple",name:"",description:"",cover:"",coverData:"",share:!1,stickers:[],error:"",uploading:!1},computed:{disableButton:function(){var e,t=!0,r=n(this.stickers);try{for(r.s();!(e=r.n()).done;){"uploaded"!==e.value.status&&(t=!1)}}catch(e){r.e(e)}finally{r.f()}return t}},methods:{getSize:NKC.methods.getSize,selectLocalFile:function(){$("#uploadInput").click()},selectedLocalFile:function(){var e,t=n($("#uploadInput")[0].files);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.addSticker(r)}}catch(e){t.e(e)}finally{t.f()}},addSticker:function(e){var t=this;this.getStickerByFile(e).then(function(e){t.stickers.push(e)})},getStickerByFile:function(n,o){return new Promise(function(t,e){var r={file:n,progress:0,error:"",status:"unUploaded",name:o||n.name||Date.now()+".png"};NKC.methods.fileToUrl(n).then(function(e){r.url=e,t(r)})})},removeFormArr:function(e,t){e.splice(t,1)},cropImage:function(r){var n=this.stickers.indexOf(r),o=this;i.show(function(e){var t=NKC.methods.blobToFile(e);o.getStickerByFile(t,r.file.name).then(function(e){Vue.set(o.stickers,n,e),i.close()})},{url:r.url,aspectRatio:1})},upload:function(t,r){var n=this;if(!t.length||r>=t.length||!t[r])return n.uploading=!1;var o=t[r];n.uploading=!0,Promise.resolve().then(function(){o.status="uploading";var e=new FormData;return e.append("file",o.file),e.append("type","sticker"),e.append("fileName",o.name),n.share&&e.append("share","true"),nkcUploadFile("/r","POST",e,function(e,t){o.progress=t})}).then(function(){o.status="uploaded",n.upload(t,r+1)}).catch(function(e){o.error=e.error||e,o.status="unUploaded",n.upload(t,r+1)})},submit:function(){var e=(e=this.stickers).filter(function(e){return"uploaded"!==e.status});this.upload(e,0)}}})},{}]},{},[1]);