!function i(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=s[t]={exports:{}};a[t][0].call(n.exports,function(e){return u(a[t][1][e]||e)},n,n.exports,i,a,s,l)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,o){"use strict";var r=NKC.methods.getDataById("data").forum;r._noticeThreadsId=(r.noticeThreadsId||[]).join(", "),r._basicThreadsId=(r.basicThreadsId||[]).join(", "),r._valuableThreadsId=(r.valuableThreadsId||[]).join(", ");var n=new NKC.methods.selectImage;new Vue({el:"#app",data:{logoData:"",logoFile:"",bannerData:"",bannerFile:"",submitting:!1,forum:r},mounted:function(){var t=this;setTimeout(function(){NKC.methods.initSelectColor(function(e){t.forum.color=e})},100)},methods:{getUrl:NKC.methods.tools.getUrl,str2arr:function(e){var t=e.split(","),o=[];return t.map(function(e){(e=e.trim())&&o.push(e)}),o},selectLogo:function(){var o=this;n.show(function(e){var t=NKC.methods.blobToFile(e);NKC.methods.fileToUrl(t).then(function(e){o.logoData=e,o.logoFile=t,n.close()})},{aspectRatio:1})},selectBanner:function(){var o=this;n.show(function(e){var t=NKC.methods.blobToFile(e);NKC.methods.fileToUrl(t).then(function(e){o.bannerData=e,o.bannerFile=t,n.close()})},{aspectRatio:4})},toEditor:function(){NKC.methods.visitUrl("/editor?type=forum_declare&id="+this.forum.fid,!0)},toLatestNoticeEditor:function(){NKC.methods.visitUrl("/editor?type=forum_latest_notice&id="+this.forum.fid,!0)},save:function(){var t=this,o=t.forum;Promise.resolve().then(function(){t.submitting=!0,o.noticeThreadsId=t.str2arr(o._noticeThreadsId),o.basicThreadsId=t.str2arr(o._basicThreadsId),o.valuableThreadsId=t.str2arr(o._valuableThreadsId);var e=new FormData;return e.append("forum",JSON.stringify(o)),t.logoFile&&e.append("logo",t.logoFile),t.bannerFile&&e.append("banner",t.bannerFile),nkcUploadFile("/f/".concat(t.forum.fid,"/settings/info"),"PUT",e)}).then(function(e){e.logo&&(t.logoData="",t.logoFile="",t.forum.logo=e.logo),e.banner&&(t.bannerData="",t.bannerFile="",t.forum.banner=e.banner),sweetSuccess("保存成功"),t.submitting=!1}).catch(function(e){t.submitting=!1,sweetError(e)})}}})},{}]},{},[1]);