!function i(a,s,c){function u(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(d)return d(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[e]={exports:{}};a[e][0].call(r.exports,function(t){return u(a[e][1][t]||t)},r,r.exports,i,a,s,c)}return s[e].exports}for(var d="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,n){"use strict";var o=NKC.methods.getDataById("subUsersId"),i=new Vue({el:"#note",data:{uid:NKC.configs.uid,threads:o.threads,timeout:null},mounted:function(){window.floatUserPanel&&window.floatUserPanel.initPanel()},methods:{getUrl:NKC.methods.tools.getUrl,visitUrl:NKC.methods.visitUrl,fromNow:NKC.methods.fromNow,modifyNote:function(t){t.edit=!t.edit,t.edit&&setTimeout(function(){i.textareaAutoResize(t)},50)},saveNewNote:function(e){var t=e._id,n=e.newContent,o=e.targetId,r=e.type;Promise.resolve().then(function(){if(!n)throw"请输入笔记内容";return nkcAPI("/note","POST",{_id:t,type:r,targetId:o,content:n})}).then(function(t){e.notes.push(t.noteContent),e.newContent="",i.addNote(e),i.textareaAutoResize(e,"note")}).catch(sweetError)},addNote:function(t){t.edit=!t.edit},deleteNote:function(e,n){sweetQuestion("确定要执行删除操作？").then(function(){var t=n.noteId,e=n._id;return nkcAPI("/note/".concat(t,"/c/").concat(e),"DELETE")}).then(function(){var t=e.notes.indexOf(n);-1!==t&&e.notes.splice(t,1)}).catch(sweetError)},saveContent:function(e){var t=e.content,n=e.noteId,o=e._id;nkcAPI("/note/".concat(n,"/c/").concat(o),"PUT",{content:t}).then(function(t){e.html=t.noteContentHTML,i.resetTextarea(e)}).catch(sweetError)},getTextarea:function(t,e){var n=1<arguments.length&&void 0!==e?e:"";return this.$refs[n+t._id][0]},resetTextarea:function(t,e){t.edit=!1,this.textareaAutoResize(t,e)},textareaAutoResize:function(t,e){var n=this.getTextarea(t,e);48<n.scrollHeight?n.style.height=n.scrollHeight+"px":n.style.height="4rem"}}})},{}]},{},[1]);