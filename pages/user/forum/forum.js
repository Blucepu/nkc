(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var data = NKC.methods.getDataById("data");
var stepCheckerMap = new Map([["protocol", // 开办指南
function (_ref) {
  var protocol = _ref.protocol;
  return protocol.haveReadProtocol ? {
    passed: true
  } : {
    passed: false,
    message: "请先仔细阅读开办指南"
  };
}], ["enter_info", // 录入信息
function (_ref2) {
  var enterInfo = _ref2.enterInfo;
  return enterInfo.newForumName && enterInfo.reason && enterInfo.youWantToDo ? {
    passed: true
  } : {
    passed: false,
    message: "请先完整填写"
  };
}], ["send_invite", // 发送邀请
function (vm) {
  var sendInvite = vm.sendInvite;

  if (sendInvite.userId.length < 2) {
    return {
      passed: false,
      message: "至少选择2个人"
    };
  } else {
    vm.commitData();
    return {
      passed: true
    };
  }
}], ["sucess_section", // 提交成功提示
function (vm) {}]]);
var stepNames = Array.from(stepCheckerMap.keys());
new Vue({
  el: "#app",
  data: {
    step: 0,
    protocol: {
      haveReadProtocol: false
    },
    enterInfo: {
      newForumName: "",
      reason: "",
      youWantToDo: ""
    },
    sendInvite: {
      userId: [],
      users: []
    },
    process: true,
    myPForums: data.myPForums,
    reviewNewForumGuide: data.reviewNewForumGuide
  },
  computed: {
    stepName: function stepName() {
      return stepNames[this.step] || stepNames[0];
    }
  },
  methods: {
    toStep: function toStep(index) {
      var checker = this.checker,
          stepName = this.stepName;

      var _checker = checker(stepName),
          passed = _checker.passed,
          message = _checker.message;

      return passed ? this.step = index : sweetError(message);
    },
    checker: function checker(stepName) {
      var vm = this;

      if (stepCheckerMap.has(stepName)) {
        var stepChecker = stepCheckerMap.get(stepName);
        return typeof stepChecker === "function" ? stepChecker(vm) : {};
      }

      return {};
    },
    selectUsers: function selectUsers() {
      var self = this;
      selectUserModule.open(function (_ref3) {
        var usersId = _ref3.usersId;
        usersId.map(function (uid) {
          if (self.sendInvite.userId.indexOf(uid) >= 0) return;
          nkcAPI("/u/" + uid, "GET").then(function (data) {
            var user = data.targetUser;
            var uid = user.uid;
            var username = user.username || "未知";
            var avatarUrl;

            if (user.avatar) {
              avatarUrl = "/a/".concat(user.avatar, "?c=userAvatar&t=sm");
            } else {}

            avatarUrl = "/a/default?c=userAvatar&t=sm";
            self.sendInvite.users.push({
              username: username,
              avatarUrl: avatarUrl,
              uid: uid
            });
            self.sendInvite.userId.push(uid);
          })["catch"](sweetError);
        });
      }, {
        userCount: 99
      });
    },
    deleteFounder: function deleteFounder(index) {
      this.sendInvite.users.splice(index, 1);
      this.sendInvite.userId.splice(index, 1);
    },
    commitData: function commitData() {
      var enterInfo = this.enterInfo,
          sendInvite = this.sendInvite;
      var self = this;
      return nkcAPI("/u/".concat(NKC.configs.uid, "/forum"), "POST", {
        info: enterInfo,
        invites: sendInvite.userId
      }).then(function () {
        console.log("提交成功");
        self.process = false;
      })["catch"](function (data) {
        self.step = 1;
        sweetError(data);
      });
    }
  }
}); // 选择用户组件

var selectUserModule = new NKC.modules.SelectUser();

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwYWdlcy91c2VyL2ZvcnVtL2ZvcnVtLm1qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLE9BQUosQ0FBWSxXQUFaLENBQXdCLE1BQXhCLENBQVg7QUFFQSxJQUFNLGNBQWMsR0FBRyxJQUFJLEdBQUosQ0FBUSxDQUM3QixDQUFDLFVBQUQsRUFBZ0I7QUFDZCxnQkFBdUI7QUFBQSxNQUFaLFFBQVksUUFBWixRQUFZO0FBQ3JCLFNBQU8sUUFBUSxDQUFDLGdCQUFULEdBQ0g7QUFBQyxJQUFBLE1BQU0sRUFBQztBQUFSLEdBREcsR0FFSDtBQUFDLElBQUEsTUFBTSxFQUFDLEtBQVI7QUFBZSxJQUFBLE9BQU8sRUFBRTtBQUF4QixHQUZKO0FBR0QsQ0FMSCxDQUQ2QixFQVE3QixDQUFDLFlBQUQsRUFBaUI7QUFDZixpQkFBd0I7QUFBQSxNQUFiLFNBQWEsU0FBYixTQUFhO0FBQ3RCLFNBQU8sU0FBUyxDQUFDLFlBQVYsSUFBMEIsU0FBUyxDQUFDLE1BQXBDLElBQThDLFNBQVMsQ0FBQyxXQUF4RCxHQUNIO0FBQUMsSUFBQSxNQUFNLEVBQUU7QUFBVCxHQURHLEdBRUg7QUFBQyxJQUFBLE1BQU0sRUFBRSxLQUFUO0FBQWdCLElBQUEsT0FBTyxFQUFFO0FBQXpCLEdBRko7QUFHRCxDQUxILENBUjZCLEVBZTdCLENBQUMsYUFBRCxFQUFpQjtBQUNmLFVBQVMsRUFBVCxFQUFhO0FBQ1gsTUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDLFVBQXBCOztBQUNBLE1BQUcsVUFBVSxDQUFDLE1BQVgsQ0FBa0IsTUFBbEIsR0FBMkIsQ0FBOUIsRUFBaUM7QUFDL0IsV0FBTztBQUFDLE1BQUEsTUFBTSxFQUFFLEtBQVQ7QUFBZ0IsTUFBQSxPQUFPLEVBQUU7QUFBekIsS0FBUDtBQUNELEdBRkQsTUFFTztBQUNMLElBQUEsRUFBRSxDQUFDLFVBQUg7QUFDQSxXQUFPO0FBQUMsTUFBQSxNQUFNLEVBQUU7QUFBVCxLQUFQO0FBQ0Q7QUFDRixDQVRILENBZjZCLEVBMEI3QixDQUFDLGdCQUFELEVBQW9CO0FBQ2xCLFVBQVMsRUFBVCxFQUFhLENBRVosQ0FISCxDQTFCNkIsQ0FBUixDQUF2QjtBQWlDQSxJQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsSUFBTixDQUFXLGNBQWMsQ0FBQyxJQUFmLEVBQVgsQ0FBbEI7QUFFQSxJQUFJLEdBQUosQ0FBUTtBQUNOLEVBQUEsRUFBRSxFQUFFLE1BREU7QUFFTixFQUFBLElBQUksRUFBRTtBQUNKLElBQUEsSUFBSSxFQUFFLENBREY7QUFFSixJQUFBLFFBQVEsRUFBRTtBQUNSLE1BQUEsZ0JBQWdCLEVBQUU7QUFEVixLQUZOO0FBS0osSUFBQSxTQUFTLEVBQUU7QUFDVCxNQUFBLFlBQVksRUFBRSxFQURMO0FBRVQsTUFBQSxNQUFNLEVBQUUsRUFGQztBQUdULE1BQUEsV0FBVyxFQUFFO0FBSEosS0FMUDtBQVVKLElBQUEsVUFBVSxFQUFFO0FBQ1YsTUFBQSxNQUFNLEVBQUUsRUFERTtBQUVWLE1BQUEsS0FBSyxFQUFFO0FBRkcsS0FWUjtBQWNKLElBQUEsT0FBTyxFQUFFLElBZEw7QUFlSixJQUFBLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FmWjtBQWdCSixJQUFBLG1CQUFtQixFQUFFLElBQUksQ0FBQztBQWhCdEIsR0FGQTtBQW9CTixFQUFBLFFBQVEsRUFBRTtBQUNSLElBQUEsUUFEUSxzQkFDRztBQUNULGFBQU8sU0FBUyxDQUFDLEtBQUssSUFBTixDQUFULElBQXdCLFNBQVMsQ0FBQyxDQUFELENBQXhDO0FBQ0Q7QUFITyxHQXBCSjtBQXlCTixFQUFBLE9BQU8sRUFBRTtBQUNQLElBQUEsTUFETyxrQkFDQSxLQURBLEVBQ087QUFBQSxVQUNOLE9BRE0sR0FDZ0IsSUFEaEIsQ0FDTixPQURNO0FBQUEsVUFDRyxRQURILEdBQ2dCLElBRGhCLENBQ0csUUFESDs7QUFBQSxxQkFFYyxPQUFPLENBQUMsUUFBRCxDQUZyQjtBQUFBLFVBRU4sTUFGTSxZQUVOLE1BRk07QUFBQSxVQUVFLE9BRkYsWUFFRSxPQUZGOztBQUdaLGFBQU8sTUFBTSxHQUNULEtBQUssSUFBTCxHQUFZLEtBREgsR0FFVCxVQUFVLENBQUMsT0FBRCxDQUZkO0FBR0QsS0FQTTtBQVFQLElBQUEsT0FSTyxtQkFRQyxRQVJELEVBUVc7QUFDaEIsVUFBSSxFQUFFLEdBQUcsSUFBVDs7QUFDQSxVQUFHLGNBQWMsQ0FBQyxHQUFmLENBQW1CLFFBQW5CLENBQUgsRUFBaUM7QUFDL0IsWUFBSSxXQUFXLEdBQUcsY0FBYyxDQUFDLEdBQWYsQ0FBbUIsUUFBbkIsQ0FBbEI7QUFDQSxlQUFPLE9BQU8sV0FBUCxLQUF1QixVQUF2QixHQUNILFdBQVcsQ0FBQyxFQUFELENBRFIsR0FFSCxFQUZKO0FBR0Q7O0FBQ0QsYUFBTyxFQUFQO0FBQ0QsS0FqQk07QUFrQlAsSUFBQSxXQWxCTyx5QkFrQk87QUFDWixVQUFJLElBQUksR0FBRyxJQUFYO0FBQ0EsTUFBQSxnQkFBZ0IsQ0FBQyxJQUFqQixDQUFzQixpQkFBZTtBQUFBLFlBQWIsT0FBYSxTQUFiLE9BQWE7QUFDbkMsUUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLFVBQUEsR0FBRyxFQUFJO0FBQ2pCLGNBQUcsSUFBSSxDQUFDLFVBQUwsQ0FBZ0IsTUFBaEIsQ0FBdUIsT0FBdkIsQ0FBK0IsR0FBL0IsS0FBdUMsQ0FBMUMsRUFBNkM7QUFDN0MsVUFBQSxNQUFNLENBQUMsUUFBUSxHQUFULEVBQWMsS0FBZCxDQUFOLENBQ0csSUFESCxDQUNRLFVBQUEsSUFBSSxFQUFJO0FBQ1osZ0JBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFoQjtBQUNBLGdCQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBZjtBQUNBLGdCQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBTCxJQUFpQixJQUFoQztBQUNBLGdCQUFJLFNBQUo7O0FBQ0EsZ0JBQUcsSUFBSSxDQUFDLE1BQVIsRUFBZ0I7QUFDZCxjQUFBLFNBQVMsZ0JBQVMsSUFBSSxDQUFDLE1BQWQsdUJBQVQ7QUFDRCxhQUZELE1BRU8sQ0FBRTs7QUFDUCxZQUFBLFNBQVMsaUNBQVQ7QUFDRixZQUFBLElBQUksQ0FBQyxVQUFMLENBQWdCLEtBQWhCLENBQXNCLElBQXRCLENBQTJCO0FBQUMsY0FBQSxRQUFRLEVBQVIsUUFBRDtBQUFXLGNBQUEsU0FBUyxFQUFULFNBQVg7QUFBc0IsY0FBQSxHQUFHLEVBQUg7QUFBdEIsYUFBM0I7QUFDQSxZQUFBLElBQUksQ0FBQyxVQUFMLENBQWdCLE1BQWhCLENBQXVCLElBQXZCLENBQTRCLEdBQTVCO0FBQ0QsV0FaSCxXQWFTLFVBYlQ7QUFjRCxTQWhCRDtBQWlCRCxPQWxCRCxFQWtCRztBQUFDLFFBQUEsU0FBUyxFQUFFO0FBQVosT0FsQkg7QUFtQkQsS0F2Q007QUF3Q1AsSUFBQSxhQXhDTyx5QkF3Q08sS0F4Q1AsRUF3Q2M7QUFDbkIsV0FBSyxVQUFMLENBQWdCLEtBQWhCLENBQXNCLE1BQXRCLENBQTZCLEtBQTdCLEVBQW9DLENBQXBDO0FBQ0EsV0FBSyxVQUFMLENBQWdCLE1BQWhCLENBQXVCLE1BQXZCLENBQThCLEtBQTlCLEVBQXFDLENBQXJDO0FBQ0QsS0EzQ007QUE0Q1AsSUFBQSxVQTVDTyx3QkE0Q007QUFBQSxVQUNMLFNBREssR0FDcUIsSUFEckIsQ0FDTCxTQURLO0FBQUEsVUFDTSxVQUROLEdBQ3FCLElBRHJCLENBQ00sVUFETjtBQUVYLFVBQUksSUFBSSxHQUFHLElBQVg7QUFDQSxhQUFPLE1BQU0sY0FBTyxHQUFHLENBQUMsT0FBSixDQUFZLEdBQW5CLGFBQWdDLE1BQWhDLEVBQXdDO0FBQUMsUUFBQSxJQUFJLEVBQUUsU0FBUDtBQUFrQixRQUFBLE9BQU8sRUFBRSxVQUFVLENBQUM7QUFBdEMsT0FBeEMsQ0FBTixDQUNKLElBREksQ0FDQyxZQUFNO0FBQ1YsUUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLE1BQVo7QUFDQSxRQUFBLElBQUksQ0FBQyxPQUFMLEdBQWUsS0FBZjtBQUNELE9BSkksV0FLRSxVQUFDLElBQUQsRUFBVTtBQUNmLFFBQUEsSUFBSSxDQUFDLElBQUwsR0FBWSxDQUFaO0FBQ0EsUUFBQSxVQUFVLENBQUMsSUFBRCxDQUFWO0FBQ0QsT0FSSSxDQUFQO0FBU0Q7QUF4RE07QUF6QkgsQ0FBUixFLENBc0ZBOztBQUNBLElBQU0sZ0JBQWdCLEdBQUcsSUFBSSxHQUFHLENBQUMsT0FBSixDQUFZLFVBQWhCLEVBQXpCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwibGV0IGRhdGEgPSBOS0MubWV0aG9kcy5nZXREYXRhQnlJZChcImRhdGFcIik7XHJcblxyXG5jb25zdCBzdGVwQ2hlY2tlck1hcCA9IG5ldyBNYXAoW1xyXG4gIFtcInByb3RvY29sXCIsICAgIC8vIOW8gOWKnuaMh+WNl1xyXG4gICAgZnVuY3Rpb24oeyBwcm90b2NvbCB9KSB7XHJcbiAgICAgIHJldHVybiBwcm90b2NvbC5oYXZlUmVhZFByb3RvY29sXHJcbiAgICAgICAgPyB7cGFzc2VkOnRydWV9XHJcbiAgICAgICAgOiB7cGFzc2VkOmZhbHNlLCBtZXNzYWdlOiBcIuivt+WFiOS7lOe7humYheivu+W8gOWKnuaMh+WNl1wifVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgW1wiZW50ZXJfaW5mb1wiLCAgIC8vIOW9leWFpeS/oeaBr1xyXG4gICAgZnVuY3Rpb24oeyBlbnRlckluZm8gfSkge1xyXG4gICAgICByZXR1cm4gZW50ZXJJbmZvLm5ld0ZvcnVtTmFtZSAmJiBlbnRlckluZm8ucmVhc29uICYmIGVudGVySW5mby55b3VXYW50VG9Eb1xyXG4gICAgICAgID8ge3Bhc3NlZDogdHJ1ZX1cclxuICAgICAgICA6IHtwYXNzZWQ6IGZhbHNlLCBtZXNzYWdlOiBcIuivt+WFiOWujOaVtOWhq+WGmVwifVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgW1wic2VuZF9pbnZpdGVcIiwgIC8vIOWPkemAgemCgOivt1xyXG4gICAgZnVuY3Rpb24odm0pIHtcclxuICAgICAgbGV0IHNlbmRJbnZpdGUgPSB2bS5zZW5kSW52aXRlO1xyXG4gICAgICBpZihzZW5kSW52aXRlLnVzZXJJZC5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgcmV0dXJuIHtwYXNzZWQ6IGZhbHNlLCBtZXNzYWdlOiBcIuiHs+WwkemAieaLqTLkuKrkurpcIn1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2bS5jb21taXREYXRhKCk7XHJcbiAgICAgICAgcmV0dXJuIHtwYXNzZWQ6IHRydWV9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdLFxyXG4gIFtcInN1Y2Vzc19zZWN0aW9uXCIsICAvLyDmj5DkuqTmiJDlip/mj5DnpLpcclxuICAgIGZ1bmN0aW9uKHZtKSB7XHJcbiAgICAgIFxyXG4gICAgfVxyXG4gIF1cclxuXSlcclxuXHJcbmNvbnN0IHN0ZXBOYW1lcyA9IEFycmF5LmZyb20oc3RlcENoZWNrZXJNYXAua2V5cygpKTtcclxuXHJcbm5ldyBWdWUoe1xyXG4gIGVsOiBcIiNhcHBcIixcclxuICBkYXRhOiB7XHJcbiAgICBzdGVwOiAwLFxyXG4gICAgcHJvdG9jb2w6IHtcclxuICAgICAgaGF2ZVJlYWRQcm90b2NvbDogZmFsc2UsXHJcbiAgICB9LFxyXG4gICAgZW50ZXJJbmZvOiB7XHJcbiAgICAgIG5ld0ZvcnVtTmFtZTogXCJcIixcclxuICAgICAgcmVhc29uOiBcIlwiLFxyXG4gICAgICB5b3VXYW50VG9EbzogXCJcIlxyXG4gICAgfSxcclxuICAgIHNlbmRJbnZpdGU6IHtcclxuICAgICAgdXNlcklkOiBbXSxcclxuICAgICAgdXNlcnM6IFtdXHJcbiAgICB9LFxyXG4gICAgcHJvY2VzczogdHJ1ZSxcclxuICAgIG15UEZvcnVtczogZGF0YS5teVBGb3J1bXMsXHJcbiAgICByZXZpZXdOZXdGb3J1bUd1aWRlOiBkYXRhLnJldmlld05ld0ZvcnVtR3VpZGVcclxuICB9LFxyXG4gIGNvbXB1dGVkOiB7XHJcbiAgICBzdGVwTmFtZSgpIHtcclxuICAgICAgcmV0dXJuIHN0ZXBOYW1lc1t0aGlzLnN0ZXBdIHx8IHN0ZXBOYW1lc1swXTtcclxuICAgIH1cclxuICB9LFxyXG4gIG1ldGhvZHM6IHtcclxuICAgIHRvU3RlcChpbmRleCkge1xyXG4gICAgICBsZXQgeyBjaGVja2VyLCBzdGVwTmFtZSB9ID0gdGhpcztcclxuICAgICAgbGV0IHsgcGFzc2VkLCBtZXNzYWdlIH0gPSBjaGVja2VyKHN0ZXBOYW1lKTtcclxuICAgICAgcmV0dXJuIHBhc3NlZFxyXG4gICAgICAgID8gdGhpcy5zdGVwID0gaW5kZXhcclxuICAgICAgICA6IHN3ZWV0RXJyb3IobWVzc2FnZSk7XHJcbiAgICB9LFxyXG4gICAgY2hlY2tlcihzdGVwTmFtZSkge1xyXG4gICAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgICBpZihzdGVwQ2hlY2tlck1hcC5oYXMoc3RlcE5hbWUpKSB7XHJcbiAgICAgICAgbGV0IHN0ZXBDaGVja2VyID0gc3RlcENoZWNrZXJNYXAuZ2V0KHN0ZXBOYW1lKTtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHN0ZXBDaGVja2VyID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgID8gc3RlcENoZWNrZXIodm0pXHJcbiAgICAgICAgICA6IHt9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfSxcclxuICAgIHNlbGVjdFVzZXJzKCkge1xyXG4gICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHNlbGVjdFVzZXJNb2R1bGUub3Blbigoe3VzZXJzSWR9KSA9PiB7XHJcbiAgICAgICAgdXNlcnNJZC5tYXAodWlkID0+IHtcclxuICAgICAgICAgIGlmKHNlbGYuc2VuZEludml0ZS51c2VySWQuaW5kZXhPZih1aWQpID49IDApIHJldHVybjtcclxuICAgICAgICAgIG5rY0FQSShcIi91L1wiICsgdWlkLCBcIkdFVFwiKVxyXG4gICAgICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgICBsZXQgdXNlciA9IGRhdGEudGFyZ2V0VXNlcjtcclxuICAgICAgICAgICAgICBsZXQgdWlkID0gdXNlci51aWQ7XHJcbiAgICAgICAgICAgICAgbGV0IHVzZXJuYW1lID0gdXNlci51c2VybmFtZSB8fCBcIuacquefpVwiO1xyXG4gICAgICAgICAgICAgIGxldCBhdmF0YXJVcmw7XHJcbiAgICAgICAgICAgICAgaWYodXNlci5hdmF0YXIpIHtcclxuICAgICAgICAgICAgICAgIGF2YXRhclVybCA9IGAvYS8ke3VzZXIuYXZhdGFyfT9jPXVzZXJBdmF0YXImdD1zbWA7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHt9XHJcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmwgPSBgL2EvZGVmYXVsdD9jPXVzZXJBdmF0YXImdD1zbWBcclxuICAgICAgICAgICAgICBzZWxmLnNlbmRJbnZpdGUudXNlcnMucHVzaCh7dXNlcm5hbWUsIGF2YXRhclVybCwgdWlkfSk7XHJcbiAgICAgICAgICAgICAgc2VsZi5zZW5kSW52aXRlLnVzZXJJZC5wdXNoKHVpZCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChzd2VldEVycm9yKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9LCB7dXNlckNvdW50OiA5OX0pXHJcbiAgICB9LFxyXG4gICAgZGVsZXRlRm91bmRlcihpbmRleCkge1xyXG4gICAgICB0aGlzLnNlbmRJbnZpdGUudXNlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgdGhpcy5zZW5kSW52aXRlLnVzZXJJZC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfSxcclxuICAgIGNvbW1pdERhdGEoKSB7XHJcbiAgICAgIGxldCB7IGVudGVySW5mbywgc2VuZEludml0ZSB9ID0gdGhpcztcclxuICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICByZXR1cm4gbmtjQVBJKGAvdS8ke05LQy5jb25maWdzLnVpZH0vZm9ydW1gLCBcIlBPU1RcIiwge2luZm86IGVudGVySW5mbywgaW52aXRlczogc2VuZEludml0ZS51c2VySWR9KVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi5o+Q5Lqk5oiQ5YqfXCIpO1xyXG4gICAgICAgICAgc2VsZi5wcm9jZXNzID0gZmFsc2U7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGRhdGEpID0+IHtcclxuICAgICAgICAgIHNlbGYuc3RlcCA9IDE7XHJcbiAgICAgICAgICBzd2VldEVycm9yKGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSlcclxuXHJcblxyXG4vLyDpgInmi6nnlKjmiLfnu4Tku7ZcclxuY29uc3Qgc2VsZWN0VXNlck1vZHVsZSA9IG5ldyBOS0MubW9kdWxlcy5TZWxlY3RVc2VyKCk7Il19
