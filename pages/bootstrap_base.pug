extends scratch.pug
block head


  meta(charset='UTF-8')
  meta(http-equiv="X-UA-Compatible" content="IE=edge,chrome=1")
  meta(name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no")
  meta(name="format-detection" content="telephone=no")
  meta(name="google-site-verification" content="daD64Dm9iV1usCNqLOqzBdBP_wqJYXNBr3ACy979VwY")

  include ./publicModules/state

  link(rel='shortcut icon' href=remoteState.logoICO)
  if process.env.NODE_ENV === "production"
    +includeJS("/external_pkgs/vue.min.js", true)
  else
    +includeJS("/external_pkgs/vue.js", true)
  +includeJS('/jquery/2.2.4/dist/jquery.min.js')
  +includeJS('/publicModules/common.js')
  +includeJS('/tools.js')
  if remoteState.isApp && remoteState.platform === 'apiCloud'
    +includeJS("/appAPi/api.js")
  +includeCSS('/bootstrap/css/bootstrap.css')
  +includeCSS('/iconfont/iconfont.css')
  +includeCSS('/font-awesome/css/font-awesome.css')
  style=`body{background-color: ${remoteState.serverSettings.backgroundColor}}`
  +includeCSS('/nkc_styles.css')
  if remoteState.isApp
    style.
      body{
        padding-top: 0;
      }
  +includeCSS('/publicModules/public.css')
  block title
    meta(name="description" content="倡导科学理性，发展科技爱好")
    title bootstrap_base
  if remoteState.isApp && remoteState.platform === 'reactNative'
    +includeJS('/appApi/reactNative.js')

block body
  block navbar
    div
      if !remoteState.isApp
        include ./publicModules/navbar/navbar.pug

  block content
    h1 hello world!
  if !remoteState.isApp
    block footer
      include ./publicModules/footer/footer
  //-if remoteState.uid
    if data.user.generalSettings.lotterySettings.status
      include module_lottery
  +includeJS('/jquery/jquery-ui.1.11.4.min.js', true)
  //-app使用的js
  if remoteState.isApp && remoteState.platform === 'apiCloud'
    +includeJS("/appAPi/app.js")
  +includeJS('/bootstrap/js/bootstrap.min.js', true)
  +includeJS('/twemoji/2/twemoji.min.js', true)
  +includeJS('/Promise/promise.min.js', true)
  +includeJS('/external_pkgs/polyfill/dist/polyfill.min.js', true)
  if remoteState.isProduction
    script.
      Vue.config.productionTip = false;
  //- 弹窗模块
  +includeJS("/sweetalert2/dist/sweetalert2.all.min.js", true)
  // 前后端公用 数据类型检查
  +includeJS("/checkData.js")
  //- 旧版common.js兼容旧的页面
  +includeJS('/interface_common.js')
  if remoteState.uid
    +includeJS('/socket.io-client/dist/socket.io.js', true)
    //- 通用socket
    if !remoteState.isApp
      //- 接入即时通信
      +includeJS('/message/connectSocket.js')
      include ./message/chat

  if (!remoteState.isApp || remoteState.platform === 'reactNative') && !data.user
    include ./publicModules/login/login
  block scripts
  if !remoteState.isApp
    //- 生成二维码 页脚
    include ./publicModules/qrcode/qrcode
    script.
      console.log('(c)2021 成都科创科学文化研究院')
      console.log('Project Repository: https://github.com/kccd/nkc')
  if remoteState.isApp && remoteState.platform === 'reactNative'
    script.
      document.body.style.userSelect = window._userSelect || 'none';
