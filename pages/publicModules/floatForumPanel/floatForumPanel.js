!function o(n,i,u){function c(e,t){if(!i[e]){if(!n[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(s)return s(e,!0);throw(r=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",r}r=i[e]={exports:{}},n[e][0].call(r.exports,function(t){return c(n[e][1][t]||t)},r,r.exports,o,n,i,u)}return i[e].exports}for(var s="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,r){"use strict";function i(e,t){var r,o=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)),o}function u(o){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){var e,r;e=o,t=n[r=t],r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})}return o}function m(t,e,r,o,n,i,u){try{var c=t[i](u),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(o,n)}window.floatForumPanel=new Vue({el:"#floatForumPanel",data:{forum:"",uid:NKC.configs.uid,subscribed:!1,over:!1,show:!1,count:1,onPanel:!1,forums:{},timeoutName:""},mounted:function(){if($(this.$el).css({top:0,left:0}),this.uid&&!window.SubscribeTypes){if(!NKC.modules.SubscribeTypes)return sweetError("未引入与关注相关的模块");window.SubscribeTypes=new NKC.modules.SubscribeTypes}this.initPanel()},methods:{getUrl:NKC.methods.tools.getUrl,initPanel:function(){for(var t=$("[data-float-fid]"),e=0;e<t.length;e++){var r=t.eq(e);"true"!==r.attr("data-float-init")&&(r=r.attr("data-float-position"),this.initEvent(t.eq(e),r))}},reset:function(){this.show=!1,this.onPanel=!1,this.over=!1,this.forum=""},initEvent:function(s,t){var f=1<arguments.length&&void 0!==t?t:"right",a=this;s.on("mouseleave",function(){a.timeoutName=setTimeout(function(){a.reset()},200)}),s.on("mouseover",function(){var c,e=(c=regeneratorRuntime.mark(function t(e){var r,o,n,i,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:clearTimeout(a.timeoutName),a.count++,a.over=!0,o=a.count,a.timeout(300).then(function(){if(o!==a.count)throw"timeout 1";if(!a.over)throw"timeout 2";return r=s.attr("data-float-fid"),n=s.offset().left,i=s.offset().top,u=s.width(),c=s.height(),a.getForumById(r)}).then(function(t){var e=t.forum,t=t.subscribed;if(o!==a.count)throw"timeout 3";if(!a.over)throw"timeout 4";a.forum=e,a.subscribed=t;e=$(a.$el);a.show=!0,e.on("mouseleave",function(){a.reset()}),e.on("mouseover",function(){clearTimeout(a.timeoutName),a.onPanel=!0});t=$(document).width()-10;"bottom"===f?(i+=c+10,n-=u+10):(n+=u+10,i+=c+10),t<n+288&&(n=t-288),e.css({top:i,left:n})}).catch(function(t){});case 5:case"end":return t.stop()}},t)}),function(){var t=this,u=arguments;return new Promise(function(e,r){var o=c.apply(t,u);function n(t){m(o,e,r,n,i,"next",t)}function i(t){m(o,e,r,n,i,"throw",t)}n(void 0)})});return function(t){return e.apply(this,arguments)}}()),s.attr("data-float-init","true")},timeout:function(r){return new Promise(function(t,e){setTimeout(function(){t()},r)})},getForumById:function(t){var n=this;return new Promise(function(e,r){var o=n.forums[t];o?e(o):nkcAPI("/f/".concat(t,"/card"),"GET").then(function(t){o={forum:u(u({},t.forum),{},{latestThreads:t.latestThreads}),subscribed:t.subscribed},n.forums[t.forum.fid]=o,e(o)}).catch(function(t){r(t)})})},subscribe:function(){var t=this.forum,e=this.subscribed;SubscribeTypes.subscribeForum(t.fid,!e)},close:function(){}}})},{}]},{},[1]);