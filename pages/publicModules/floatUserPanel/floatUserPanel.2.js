!function r(n,i,u){function s(e,t){if(!i[e]){if(!n[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(a)return a(e,!0);throw(o=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",o}o=i[e]={exports:{}},n[e][0].call(o.exports,function(t){return s(n[e][1][t]||t)},o,o.exports,r,n,i,u)}return i[e].exports}for(var a="function"==typeof require&&require,t=0;t<u.length;t++)s(u[t]);return s}({1:[function(t,e,o){"use strict";function h(t,e,o,r,n,i,u){try{var s=t[i](u),a=s.value}catch(t){return void o(t)}s.done?e(a):Promise.resolve(a).then(r,n)}window.floatUserPanel=new Vue({el:"#floatUserPanel",data:{user:"",uid:NKC.configs.uid,over:!1,show:!1,count:1,onPanel:!1,users:{},timeoutName:""},mounted:function(){var t=$(this.$el);if(t.css({top:0,left:0}),t.css({top:300,left:300}),this.uid&&!window.SubscribeTypes){if(!NKC.modules.SubscribeTypes)return sweetError("未引入与关注相关的模块");window.SubscribeTypes=new NKC.modules.SubscribeTypes}this.initPanel()},methods:{getUrl:NKC.methods.tools.getUrl,format:NKC.methods.format,fromNow:NKC.methods.fromNow,initPanel:function(){for(var t=$("[data-float-uid]"),e=0;e<t.length;e++){var o=t.eq(e);"true"!==o.attr("data-float-init")&&(o=o.attr("data-float-position"),this.initEvent(t.eq(e),o))}},reset:function(){this.show=!1,this.onPanel=!1,this.over=!1,this.user=""},initEvent:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"right",f=this;a.on("mouseleave",function(){f.timeoutName=setTimeout(function(){f.reset()},200)}),a.on("mouseover",function(){var s,e=(s=regeneratorRuntime.mark(function t(e){var o,r,n,i,u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:clearTimeout(f.timeoutName),f.count++,f.over=!0,r=f.count,f.timeout(300).then(function(){if(r!==f.count)throw"timeout 1";if(!f.over)throw"timeout 2";return o=a.attr("data-float-uid"),n=a.offset().left,i=a.offset().top,u=a.width(),s=a.height(),f.getUserById(o)}).then(function(t){var e=t.user,t=t.subscribed;if(r!==f.count)throw"timeout 3";if(!f.over)throw"timeout 4";f.user=e,f.subscribed=t;e=$(f.$el);f.show=!0,e.on("mouseleave",function(){f.reset()}),e.on("mouseover",function(){clearTimeout(f.timeoutName),f.onPanel=!0});t=$(document).width()-10;"bottom"===c?(i+=s+10,n-=u+10):(n+=u+10,i+=s+10),t<n+312&&(n=t-312),e.css({top:i,left:n})}).catch(function(t){});case 5:case"end":return t.stop()}},t)}),function(){var t=this,u=arguments;return new Promise(function(e,o){var r=s.apply(t,u);function n(t){h(r,e,o,n,i,"next",t)}function i(t){h(r,e,o,n,i,"throw",t)}n(void 0)})});return function(t){return e.apply(this,arguments)}}()),a.attr("data-float-init","true")},timeout:function(o){return new Promise(function(t,e){setTimeout(function(){t()},o)})},getUserById:function(r){var n=this;return new Promise(function(o,e){var t=n.users[r];t?o(t):nkcAPI("/u/".concat(r,"?from=panel"),"GET").then(function(t){var e;t.targetUser.hidden||(e={subscribed:t.subscribed,user:t.targetUser},n.users[t.targetUser.uid]=e,o(e))}).catch(function(t){console.log(t),e(t)})})},subscribe:function(){var t=this.user,e=this.subscribed;SubscribeTypes.subscribeUser(t.uid,!e)}}})},{}]},{},[1]);