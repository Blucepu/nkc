extends ../../bootstrap_base
block title
  title=data.document.title || "未填写标题"
  style.
    body{
      display: none;
    }
  +includeCSS('/document/preview/preview.css')
block content
  .container-fluid.max-width
    .row
      .col-xs-12.col-md-9.book-content-container
        .thread-nav-right
          .nav-count(title=`浏览数`)
            .fa.fa-eye
            span 0
          .nav-count(title=`回复数`)
            .fa.fa-comment
            span 0
          .nav-count.pointer
            span 收藏
          .nav-count
            .fa.fa-cog
        //- h1.book-content-title=data.document.title
        //- .m-t-1.text-center
        //-   if data.document.authorInfos
        //-     for authorInfo in data.document.authorInfos
        //-       span=authorInfo.name
        //-       span.common-article-author.fa.fa-envelope-open-o(style="color:#000" onclick="displayAuthor('"+objToStr(authorInfo.contractObj)+"')")
        //- .m-t-1.text-center
        //-   if data.document.authorInfos
        //-     for authorInfo in data.document.authorInfos
        //-       span.common-article-author=authorInfo.agency
        //- .m-t-1.text-center
        //-   //- 用户头像
        //-   a(
        //-       data-global-mouseover="showUserPanel"
        //-       data-global-mouseout="hideUserPanel"
        //-       data-global-data=objToStr({uid:data.articleAuthor.uid})
        //-     )
        //-     img(src=tools.getUrl('userAvatar', data.articleAuthor.avatar, 'sm') style='width: 1.5rem;height: 1.5rem;border-radius:50%;')
        //-     if data.articleAuthor
        //-     span.kcid=data.articleAuthor.username
        //-   span(style='color: #555555;margin-right:5px' title=format(`YYYY-MM-DD HH:mm:ss`, data.document.toc))= ` ${format(`YYYY-MM-DD HH:mm:ss`, data.document.toc)}`
        //-   if data.document.origin && data.document.origin !== "0"
        //-     if data.document.origin == "3" || data.document.origin == "4" || data.document.origin == "5" || data.document.origin == "6"
        //-       span(style="color:#9baec8;margin-right:3px") 原创
        //- h1=JSON.stringify(data.document)
        -var {uid, origin: originState, toc, title, type, authorInfos, user} = data.document
        include ../../columns/article/title
        +title({uid, origin: originState, toc, title, type, authorInfos, user})
        if data.type !== "draft"
          if (data.document.abstract.length || data.document.abstractEN.length) 
            .abstract(style="margin-top:1rem; word-break: break-all;")
              if data.document.abstract.length
                .panel.panel-default(style="border:0;margin-bottom:0")
                  .panel-heading.paperHeader 中文摘要
                  .panel-body!=LineFeedConversion(data.document.abstract)
              if data.document.abstractEN.length
                .panel.panel-default(style="border:0;margin-bottom:0")
                  .panel-heading.paperHeader Abstract
                  .panel-body!=LineFeedConversion(data.document.abstractEN)
          if (data.document.keywords.length || data.document.keywordsEN.length) 
            .keyWords(style="margin-top:1rem;")
              .panel.panel-default(style="border:0;margin-bottom:0")
                .panel-heading.paperHeader 关键词
                .panel-body(style="padding:5px")
                  if data.document.keywords.length
                    div
                      for keyCn in data.document.keywords
                        span.keyWordstagCn(style="cursor:pointer")!=keyCn
                  if data.document.keywordsEN.length
                    div(style="margin-top:5px")
                      for keyEn in data.document.keywordsEN
                        span.keyWordstagEn(style="cursor:pointer")!=keyEn
        .book-content-content!=data.document.content
        include ../../columns/article/authorInfo.pug
        +authorInfo() 
        include ../../publicModules/floatUserPanel/floatUserPanel.2.pug

block scripts
  include ../../publicModules/nkcSource
  +includeJS('/document/preview/preview.js')