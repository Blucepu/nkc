!function i(o,r,s){function a(t,e){if(!r[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=r[t]={exports:{}},o[t][0].call(n.exports,function(e){return a(o[t][1][e]||e)},n,n.exports,i,o,r,s)}return r[t].exports}for(var d="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,n){"use strict";var i=NKC.methods.getDataById("data");i.friend&&(i.friend.info._phone=i.friend.info.phone.map(function(e){return{number:e}}),i.friend.info._phone.length||(i.friend.info._phone=[{number:""}])),window.app=new Vue({el:"#app",data:{friend:i.friend,fc:i.friendCategories,targetUser:i.targetUser,targetUserName:i.targetUserName,inBlacklist:i.inBlacklist,friendImageUrl:"",showNote:!1},methods:{visitUserHome:function(){NKC.methods.visitUrl("/u/".concat(this.targetUser.uid),!0)},_removeFriend:function(){var e=this.targetUser.uid;return nkcAPI("/friend/"+e,"DELETE",{})},addFriend:function(e){var t=this._removeFriend;e?sweetQuestion("确定要删除该好友？").then(function(){return t()}).then(function(){NKC.methods.appToast("删除成功"),NKC.methods.appReloadPage()}).catch(NKC.methods.appToast):NKC.methods.visitUrl("/message/addFriend?uid=".concat(this.targetUser.uid),!0)},moveToBlacklist:function(){var e=this.targetUser.uid,t=this.inBlacklist;this.friend,this._removeFriend;Promise.resolve().then(function(){}).then(function(){return t?NKC.methods.removeUserFromBlacklist(e):NKC.methods.addUserToBlacklist(e,"message")}).then(function(e){e&&NKC.methods.appReloadPage()}).catch(NKC.methods.appToast)},sendToUser:function(){var e=this.targetUser.uid,t=this.targetUserName;NKC.methods.rn.emit("toChat",{uid:e,type:"UTU",username:t})},selectLocation:function(){var t=this;NKC.methods.appSelectLocation().then(function(e){t.friend.info.location=e.location.join("  ")})},addPhone:function(){this.friend.info._phone.push({number:""})},removePhone:function(e){this.friend.info._phone.splice(e,1)},setFriendImageUrl:function(){this.friendImageUrl="/friend/".concat(this.targetUser.uid,"/image?t=").concat(Date.now())},selectFriendImage:function(){this.$refs.input.value=null,this.$refs.input.click()},removeFriendImage:function(){this.friend.info.image=!1},selectedFriendImage:function(){var e,t=this,n=this.$refs.input.files;n.length&&(e=n[0],(n=new FormData).append("file",e),NKC.methods.appToast("上传中，请稍候"),nkcUploadFile("/friend/".concat(t.targetUser.uid,"/image"),"POST",n).then(function(){NKC.methods.appToast("上传成功"),t.setFriendImageUrl(),t.friend.info.image=!0}).catch(NKC.methods.appToast))},switchNote:function(){this.showNote=!this.showNote},saveFriendInfo:function(){var e=this.friend,t=this.targetUser;e.info.phone=e.info._phone.map(function(e){return e.number}),nkcAPI("/message/settings/".concat(t.uid),"PUT",{info:e.info,cid:e.cid}).then(function(){NKC.methods.appToast("保存成功")}).catch(NKC.methods.appToast)}},mounted:function(){this.setFriendImageUrl()}})},{}]},{},[1]);