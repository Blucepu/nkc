!function n(s,i,o){function c(t,e){if(!i[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(a)return a(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},s[t][0].call(r.exports,function(e){return c(s[t][1][e]||e)},r,r.exports,n,s,i,o)}return i[t].exports}for(var a="function"==typeof require&&require,e=0;e<o.length;e++)c(o[e]);return c}({1:[function(e,t,r){"use strict";var n=NKC.methods.getDataById("data"),s={};n.users.map(function(e){e.data.map(function(e){return s[e.uid]=e})});new Vue({el:"#app",data:{edit:!n.category,category:n.category||{name:"",description:"",friendsId:[]},users:n.users,usersObj:s},computed:{selectedUsers:function(){var t=[],r=this;return this.category.friendsId.map(function(e){e=r.usersObj[e];e&&t.push(e)}),t},selectedUsersId:function(){return this.selectedUsers.map(function(e){return e.uid})}},methods:{getUrl:NKC.methods.tools.getUrl,selectUser:function(e){var t=this.category.friendsId;-1===t.indexOf(e.uid)?t.push(e.uid):this.unSelectUser(e)},unSelectUser:function(e){var t=this.category.friendsId,e=t.indexOf(e.uid);-1!==e&&t.splice(e,1)},save:function(){var e,t=this,r=t.category,n=r._id,s=r.name,i=r.description,r=n?(e="PUT","/friend_category/".concat(n)):(e="POST","/friend_category");return nkcAPI(r,e,{name:s,description:i,friendsId:t.selectedUsersId}).then(function(e){t.edit=!1,NKC.methods.appToast("保存成功"),n||NKC.methods.visitUrl("/message/category?cid=".concat(e.category._id))}).catch(NKC.methods.appToast)},visitUserHome:function(e){NKC.methods.visitUrl(NKC.methods.tools.getUrl("messageUserDetail",e.uid),!0)},toEdit:function(){this.edit=!0},remove:function(){var e=this;sweetQuestion("删除分组「".concat(this.category.name,"」？")).then(function(){return nkcAPI("/friend_category/".concat(e.category._id),"DELETE").then(function(){NKC.methods.appToast("删除成功"),NKC.methods.appClosePage()}).catch(NKC.methods.appToast)})}}})},{}]},{},[1]);