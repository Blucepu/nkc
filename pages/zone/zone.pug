
extends ../bootstrap_base
block title
  //- block telegraphTitle
  title=`${data.pageTitle}`
block content
  .container-fluid.max-width
    .row
      include ../publicModules/checkDefaultUsername
      .col-xs-12.col-md-1.p-r-0.hidden-xs.hidden-sm.box-shadow-panel
        include ../publicModules/forums_nav/forums_tree
        +includeCSS('/zone/zone.css')
        //- +renderVisitedForums(data.visitedForums)
        //- +renderSubscribeForums(data.subscribeForums)
        //- +renderCategoryForums(data.categoriesWithForums)
        //- if data.isLogin
        .m-b-1
          .zone-left-content
              a.zone-left-link(href=`/z`,style=data.t.split('-')[0]===data.zoneTab.all?"color:#e85a71":"") 全部
              if data.isLogin
                a.zone-left-link(href=`/z?t=subscribe-moment`,style=data.t.split('-')[0]===data.zoneTab.subscribe?"color:#e85a71":"") 我的关注
      .col-xs-12.col-md-8.box-shadow-panel.p-r-0
        #ZoneMomentEditor.m-b-05.p-t-05(v-cloak v-if='logged')
          moment-editor(@published='published')
        if data.t.split('-')[1]===data.zoneTypes.moment
          - 
            var dataString = objToStr({
              momentsData: data.momentsData,
              permissions: data.permissions
            });

          #ZoneMoments(v-cloak)
            include ./zone/zoneTypes
            +renderZoneTypes(data.t, data.zoneTypes)

            include ../publicModules/paging/paging
            moments(:moments="momentsData" :permissions="permissions" v-if='momentsData.length > 0')
            .p-t-5.p-b-5.text-center(v-else) 空空如也~
          if data.paging && data.paging.buttonValue.length > 0
            .m-t-1
              include ../publicModules/paging/paging_input
          .hidden#data=dataString
          +includeJS('/zone/zone/moment.js')
        else 
          .m-b-1
            include ./zone/zoneTypes
            +renderZoneTypes(data.t, data.zoneTypes)
            include ../publicModules/paging/paging
            if data.articlesPanelData && data.articlesPanelData.length > 0
              include ../publicModules/articlePanel/articlePanel
              +ArticlesPanel(data.articlesPanelData, data.latestZoneArticlePanelStyle)
            else
              .p-t-5.p-b-5.text-center 空空如也~
            if data.paging && data.paging.buttonValue.length > 0
              .m-t-1
              include ../publicModules/paging/paging_input
      .col-xs-12.col-md-3.hidden-xs.hidden-sm.box-shadow-panel
        .m-b-1
          include ../publicModules/canvas_logo
          +renderCanvasLogo(data.homeBigLogo)
        include ../publicModules/improveUserInfo
        +improveUserInfo(data.improveUserInfo)
        include ../publicModules/management/management
        +managementPanel(data.managementData)
        include ../publicModules/apps/apps
        +appsPanel(data.appsData)
        include ../publicModules/side_thread_list
        +sideThreadsPanel(data.noticeThreads, '公告通知', true)
        +sideThreadsPanel(data.featuredThreads, '精选文章', false)
        +sideThreadsPanel(data.recommendThreads, '推荐文章', false)
        include ../publicModules/activeUsers/activeUsers
        +newUsersSmall(data.newUsers)

 
block scripts
  //- block telegraphScripts
  +includeJS('/zone/zone/zone.js')
  include ../publicModules/moveThread/moveThread
