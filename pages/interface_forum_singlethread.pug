-const showTicks = false;
-const {firstPost, lastPost, tid, hasCover} = thread
-const {t, toc} = firstPost;
-const targetUser = firstPost.user;
//- -const parentForum = thread.forum.parentForum;
.new-content
  if thread.recycleMark
    .text-center(style="margin-bottom:0.5rem;border-radius: 2px;padding: 0.2rem 0;background:#33CCFF;text-align:center;color:#ffffff")= '↓↓↓ 该文章已退回修改，只有作者本人可以查看 ↓↓↓'
  .new-content-info
    span
      a(href=`/u/${targetUser.uid}` title=`${targetUser.description || ''}` data-toggle="tooltip" data-placement="bottom")
        img(src=`/avatar_small/${targetUser.uid}` style='width: 30px;border-radius: 50%;')
    span
      - var title = `${targetUser.navbarDesc.username}\n`+`学术分 ${targetUser.navbarDesc.xsf}\n`+`科创币 ${targetUser.navbarDesc.kcb}\n`+`${targetUser.navbarDesc.cs}`;
      a(href=`/u/${targetUser.uid}` data-toggle="tooltip" data-placement="bottom" title=title)= targetUser.username
    if data.forum
      -let displayForumNav = false;
      for f in thread.mainForums
        if f.fid !== data.forum.fid
          -displayForumNav = true;
          span.new-content-forumAbbr(style=`background-color:${f.color};`)
            a(style='text-decoration: none;' href=`/f/${f.fid}` title=`${f.description || ''}` data-toggle="tooltip" data-placement="bottom")= f.displayName
      if !displayForumNav && thread.categories.length !== 0
        for category in thread.categories
          if data.threadTypesId.includes(category.cid)
            span.new-content-forumAbbr(style=`background-color:${data.forum.color};`)
              a(style='text-decoration: none;' href=`/f/${data.forum.fid}?cat=${category.cid}`)= category.name

    else
      -let forum;
      for f in thread.mainForums
        -forum = f;
        if f.forumType === 'topic'
          -break;
      span.new-content-forumAbbr(style=`background-color:${forum.color};`)
        a(style='text-decoration: none;' href=`/f/${forum.fid}` title=`${forum.description || ''}` data-toggle="tooltip" data-placement="bottom")= forum.displayName

    span.icon-font(title=`${new Date(toc).toLocaleString()}`)=fromNow(toc)
    if thread
      span(title=`${thread.hits}次浏览` data-toggle="tooltip" data-placement="bottom")
        span.glyphicon.glyphicon-eye-open.icon
        span.icon-font=thread.hits
      span(title=`${thread.count-1}条评论` data-toggle="tooltip" data-placement="bottom")
        span.glyphicon.glyphicon-comment.icon
        span.icon-font=(thread.count-1)
    else
      span(title=`${firstPost.recUsers.length}次点赞`)
        span.glyphicon.glyphicon-heart.icon
        span.icon-font=firstPost.recUsers.length
  .new-content-title
    -let digest = '';
    if thread && thread.digest
      -digest = 'digest-thread-title';
    a.ForumThreadNormal(class=digest href=`/t/${tid}`)
      span(style='font-size: 18px;') #{t}
    -const pageCount = thread.count / 30
    -let ellipsis = false
    - for(let i = 1; i < pageCount; i++)
      if(i < 4 || i > pageCount - 3)
        a(href=`/t/${thread.tid}?&page=${i}` style='font-size: 14px; text-decoration: none; font-weight: normal; margin-left: 0.5rem;')
          span(style='padding-left: 0.5rem; padding-right: 0.5rem; margin: 0.3rem; background-color: #04A5EA; color: white; border-radius: 0.4rem;') #{i + 1}
      else if(!ellipsis)
        -ellipsis = true
        span(style='padding-left: 0.5rem; padding-right: 0.5rem; margin: 0.3rem; background-color: #04A5EA; color: white; border-radius: 0.4rem;') ...
    if !hiddenCheckBox
      if userCollectionId
        input.ThreadCheckboxes(id=`${userCollectionId}` type='checkbox' style=`float: right; ${showTicks?'':'display:none;'}`)
      else
        input.ThreadCheckboxes(id=`${tid}` type='checkbox' style=`float: right; ${showTicks?'':'display:none;'}`)
  .new-content-body
    -let heightType = 'max-height';
    if hasCover
      -heightType = 'height';
      a.new-content-left(style=`background-image: url(/cover/${tid})` href=`/t/${tid}`)
    div(class=hasCover?'hasCover':'')
      .new-content-right
        div
          p
            -firstPost.c = hideContentByUser(firstPost.c, data.user, 'list')
            -firstPost.c = filterQuote(firstPost.c)
            -firstPost.c = firstPost.c.slice(0, 600);
            a(href=`/t/${tid}`)!= replaceContent(experimental_render(firstPost))
        div
          p
            -lastPost.c = hideContentByUser(lastPost.c, data.user, 'list')
            -lastPost.c = filterQuote(lastPost.c)
            -lastPost.c = lastPost.c.replace(/<\/?.+?>/g,"")
            -lastPost.c = lastPost.c.slice(0, 250);
            a(href=`/t/${tid}?&last_page=true#${lastPost.pid}`)!= replaceContent(experimental_render(lastPost) )
      .new-content-info-last
        span
          - var title = `${lastPost.user.navbarDesc.username}\n`+`学术分 ${lastPost.user.navbarDesc.xsf}\n`+`科创币 ${lastPost.user.navbarDesc.kcb}\n`+`${lastPost.user.navbarDesc.cs}`;
          a(href=`/u/${lastPost.user.uid}` data-toggle="tooltip" data-placement="bottom" title=title)= lastPost.user.username
        span.icon-font=` ${fromNow(lastPost.toc)}`
