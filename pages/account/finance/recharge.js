!function a(o,c,u){function s(t,e){if(!c[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=c[t]={exports:{}};o[t][0].call(i.exports,function(e){return s(o[t][1][e]||e)},i,i.exports,a,o,c,u)}return c[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,n){"use strict";var r=NKC.methods.getDataById("data"),i=NKC.modules.math;new Vue({el:"#app",data:{defaultKCB:[10,20,50,100,500,1e3,5e3].filter(function(e){return e>=r.rechargeSettings.min/100&&e<=r.rechargeSettings.max/100}),money:10,error:"",payment:"",input:"",mainScore:r.mainScore,rechargeSettings:r.rechargeSettings},computed:{payments:function(){var e=[],t=this.rechargeSettings,n=t.weChat;return t.aliPay.enabled&&e.push({type:"aliPay",name:"支付宝"}),n.enabled&&e.push({type:"weChat",name:"微信支付"}),e},payInfo:function(){var e=this.payment,t=this.rechargeSettings;if(e){var n=t[e];if(n.enabled&&0<n.fee){var r=i.chain(i.bignumber(n.fee)).multiply(100).done().toNumber();return"服务商（非本站）将收取 ".concat(r,"% 的手续费")}}},fee:function(){var e=this.totalPrice,t=this.finalPrice;if(e)return Number((e-t).toFixed(2))},finalPrice:function(){var e=this.money,t=this.input,n=""!==e?e:t;if(n)return n=n.toFixed(2),Number(n)},totalPrice:function(){var e=this.payment,t=this.rechargeSettings[e];if(t&&this.finalPrice){var n=(n=this.finalPrice/(1-t.fee)).toFixed(2);return Number(n)}}},mounted:function(){this.payments.length&&this.selectPayment(this.payments[0].type)},methods:{select:function(e){this.money=e},selectPayment:function(e){this.payment=e},pay:function(){var t,e=this.totalPrice,n=this.payment,r=this.finalPrice,i=!1,a=NKC.methods.isPhone(),o="/account/finance/recharge?type=get_url&money=".concat(e,"&score=").concat(r,"&payment=").concat(n);Promise.resolve().then(function(){if(!["aliPay","weChat"].includes(n))throw"请选择支付方式";if(!(0<e))throw"充值金额必须大于0";if("reactNative"!==NKC.configs.platform){if(a)return o+="&redirect=true",screenTopAlert("正在前往支付宝..."),i=!0,window.location.href=o;t=window.open()}return nkcAPI(o,"GET")}).then(function(e){i||("reactNative"===NKC.configs.platform?NKC.methods.visitUrl(e.url,!0):t.location=e.url,sweetInfo("请在浏览器新打开的窗口完成支付！若没有新窗口打开，请检查新窗口是否已被浏览器拦截。"))}).catch(function(e){sweetError(e),t&&(t.document.body.innerHTML=e.error||e)})}}})},{}]},{},[1]);