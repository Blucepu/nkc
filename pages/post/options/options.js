!function n(s,e,d){function u(o,t){if(!e[o]){if(!s[o]){var i="function"==typeof require&&require;if(!t&&i)return i(o,!0);if(l)return l(o,!0);throw(i=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",i}i=e[o]={exports:{}},s[o][0].call(i.exports,function(t){return u(s[o][1][t]||t)},i,i.exports,n,s,e,d)}return e[o].exports}for(var l="function"==typeof require&&require,t=0;t<d.length;t++)u(d[t]);return u}({1:[function(t,o,i){"use strict";var n;window.PostOption=new Vue({el:"#modulePostOptions",data:{show:!1,loading:!0,uid:NKC.configs.uid,pid:"",postType:"",postUserId:"",tid:"",toc:"",author:{username:"",uid:""},top:300,left:300,domHeight:0,domWidth:0,anonymous:null,anonymousUser:null,blacklist:null,collection:null,complaint:null,digest:null,disable:null,edit:null,hidePost:null,history:null,inColumn:null,kcb:null,subscribe:null,topped:null,violation:null,warningPost:null,xsf:null,ipInfo:null},computed:{position:function(){var t=this.top,o=this.left;return{top:t-this.domHeight,left:o-this.domWidth}}},mounted:function(){var o=this;document.addEventListener("click",function(t){o.show=!1})},updated:function(){var t=$(this.$el);this.domHeight=t.height(),this.domWidth=t.width()},methods:{getUrl:NKC.methods.tools.getUrl,clickElement:function(t){t.stopPropagation()},close:function(){this.show=!1},open:function(t){var o=t.pid,i=t.top,t=t.left;this.top=i,this.left=t;var d=this;d.show=!0,d.loading=!0,nkcAPI("/p/".concat(o,"/option"),"GET").then(function(t){var o=t.tid,i=t.pid,n=t.options,s=t.userColumnId,e=t.postType,t=t.postUserId;d.anonymous=n.anonymous,d.anonymousUser=n.anonymousUser,d.blacklist=n.blacklist,d.collection=n.collection,d.complaint=n.complaint,d.digest=n.digest,d.disable=n.disable,d.edit=n.edit,d.hidePost=n.hidePost,d.history=n.history,d.inColumn=n.inColumn,d.kcb=n.kcb,d.subscribe=n.subscribe,d.topped=n.topped,d.violation=n.violation,d.warningPost=n.warningPost,d.xsf=n.xsf,d.ipInfo=n.ipInfo,d.userColumnId=s,d.postType=e,d.tid=o,d.pid=i,d.postUserId=t,d.loading=!1}).catch(function(t){sweetError(t)})},toColumn:function(){var t=this.inColumn,o=this.pid,i=this.userColumnId;(t?removeToColumn:addToColumn)(o,i)},setAnonymous:function(){var o=this,t=this.anonymous,i=this.pid;nkcAPI("/p/"+i+"/anonymous","POST",{anonymous:!t}).then(function(t){o.anonymous=t.anonymous,o.anonymous?sweetSuccess("内容已匿名"):sweetSuccess("内容已取消匿名")}).catch(function(t){sweetError(t)})},viewAuthorInfo:function(){(n=n||new NKC.modules.UserInfo).open({type:"showUserByPid",pid:this.pid})},collectionThread:function(){var t=this.tid,o=this.collection,i=this;SubscribeTypes.collectionThreadPromise(t,!o).then(function(){i.collection=!o,o?sweetSuccess("已取消收藏"):sweetSuccess("已加入收藏")}).catch(sweetError)},subscribeThread:function(){var t=this.tid,o=this.subscribe;SubscribeTypes.subscribeThread(t,!o)},replyPost:function(){window.quotePost(this.pid)},hidePostContent:function(){var t=this.pid,o=this.hidePost;window.hidePostPanel||(window.hidePostPanel=new NKC.modules.HidePost),window.hidePostPanel.open(function(){sweetSuccess("执行成功")},{pid:t,hide:o})},postTopped:function(){var t=this.pid,o=this.topped,i=this;nkcAPI("/p/"+t+"/topped","POST",{topped:!o}).then(function(){sweetSuccess("操作成功"),i.topped=!o}).catch(function(t){sweetError(t)})},addXSF:function(){var t=this.pid;credit(t,"xsf")},postDigest:function(){var t=this.pid;(this.digest?unDigestPost:digestPost)(t)},postWarning:function(){openPostWarningDom(this.pid)},disablePost:function(){disabledThreadPost(this.pid)},viewViolationRecord:function(){NKC.modules.violationRecord.open({uid:this.postUserId})},complaintPost:function(){"thread"===this.postType?moduleComplaint.open("thread",this.tid):moduleComplaint.open("post",this.pid)},userBlacklist:function(){var t=this.blacklist,o=this.postUserId;t?NKC.methods.removeUserFromBlacklist(o):NKC.methods.addUserToBlacklist(o,"post",this.pid)},displayIpInfo:function(){NKC.methods.getIpInfo(this.ipInfo)}}}),NKC.methods.initPostOption=function(){for(var o=$('[data-type="postOption"]'),t=0;t<o.length;t++)(function(t){var s=o.eq(t);if("ture"===s.attr("data-init"))return;s.on("click",function(t){var o=s.offset(),i=o.left,n=o.top,o=s.attr("data-pid");PostOption.open({pid:o,left:i+s.width(),top:n-2}),t.stopPropagation()})})(t)},$(function(){NKC.methods.initPostOption(),$('[data-type="postOption"]').eq(0).click()})},{}]},{},[1]);