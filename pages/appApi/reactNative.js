(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

NKC.methods.rn = {
  index: 0,
  callback: {}
};

NKC.methods.rn.postMessage = function (obj) {
  window.ReactNativeWebView.postMessage(JSON.stringify(obj));
};

NKC.methods.rn.emit = function (type, data, callback) {
  data = data || {};
  var index = NKC.methods.rn.index++;
  NKC.methods.rn.callback[index] = callback;
  NKC.methods.rn.postMessage({
    type: type,
    data: data,
    webFunctionId: index
  });
};

NKC.methods.rn.onMessage = function (res) {
  var webFunctionId = res.webFunctionId;
  var data = res.data;
  var func = NKC.methods.rn.callback[webFunctionId];

  if (func) {
    func(data);
  }
};

function urlPathEval(fromUrl, toUrl) {
  if (!toUrl) {
    toUrl = fromUrl;
    fromUrl = location.href;
  }

  var fullFromUrl = new URL(fromUrl, location.origin);
  return new URL(toUrl, fullFromUrl).href;
}

document.body.addEventListener('click', function (e) {
  var target = e.target;
  var targetNodeName = target.nodeName.toLowerCase();
  var dataType = target.getAttribute('data-type');
  var src = target.getAttribute('src');
  if (!src) src = target.getAttribute('data-src');

  if (targetNodeName === 'img' && dataType === 'view' && src) {
    src = window.location.origin + src; // 图片处理

    var images = document.querySelectorAll('img[data-type="view"]');
    var urls = [];
    var index;

    for (var i = 0; i < images.length; i++) {
      var image = images[i];
      var name = image.getAttribute('alt');

      var _src = image.getAttribute('src');

      if (!_src) {
        _src = image.getAttribute('data-src');
      }

      if (!_src) return;
      _src = window.location.origin + _src;

      if (_src === src) {
        index = i;
      }

      urls.push({
        url: _src,
        name: name
      });
    }

    NKC.methods.rn.emit('viewImage', {
      urls: urls,
      index: index
    });
    e.preventDefault();
  } else {
    // 链接处理
    var $a = null;

    if (targetNodeName === 'a') {
      $a = target;
    } else {
      $a = $(target).parents('a');
      if ($a.length) $a = $a[0];
    }

    var href, title;

    if ($a) {
      href = $a.getAttribute('href');
      title = $a.getAttribute('title');
    }

    if (href && $a.getAttribute('data-type') !== 'reload') {
      e.preventDefault();
      var targetUrl = urlPathEval(location.href, href);
      NKC.methods.rn.emit('openNewPage', {
        href: targetUrl,
        title: title
      });
    }
  }
}); // 同步cookie信息

NKC.methods.rn.emit('syncPageInfo', {
  uid: NKC.configs.uid
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9fYnJvd3Nlci1wYWNrQDYuMS4wQGJyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInBhZ2VzL2FwcEFwaS9yZWFjdE5hdGl2ZS5tanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLEdBQUcsQ0FBQyxPQUFKLENBQVksRUFBWixHQUFpQjtBQUNmLEVBQUEsS0FBSyxFQUFFLENBRFE7QUFFZixFQUFBLFFBQVEsRUFBRTtBQUZLLENBQWpCOztBQUtBLEdBQUcsQ0FBQyxPQUFKLENBQVksRUFBWixDQUFlLFdBQWYsR0FBNkIsVUFBUyxHQUFULEVBQWM7QUFDekMsRUFBQSxNQUFNLENBQUMsa0JBQVAsQ0FBMEIsV0FBMUIsQ0FBc0MsSUFBSSxDQUFDLFNBQUwsQ0FBZSxHQUFmLENBQXRDO0FBQ0QsQ0FGRDs7QUFJQSxHQUFHLENBQUMsT0FBSixDQUFZLEVBQVosQ0FBZSxJQUFmLEdBQXNCLFVBQVMsSUFBVCxFQUFlLElBQWYsRUFBcUIsUUFBckIsRUFBK0I7QUFDbkQsRUFBQSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQWY7QUFDQSxNQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsT0FBSixDQUFZLEVBQVosQ0FBZSxLQUFmLEVBQVo7QUFDQSxFQUFBLEdBQUcsQ0FBQyxPQUFKLENBQVksRUFBWixDQUFlLFFBQWYsQ0FBd0IsS0FBeEIsSUFBaUMsUUFBakM7QUFDQSxFQUFBLEdBQUcsQ0FBQyxPQUFKLENBQVksRUFBWixDQUFlLFdBQWYsQ0FBMkI7QUFDekIsSUFBQSxJQUFJLEVBQUUsSUFEbUI7QUFFekIsSUFBQSxJQUFJLEVBQUUsSUFGbUI7QUFHekIsSUFBQSxhQUFhLEVBQUU7QUFIVSxHQUEzQjtBQUtELENBVEQ7O0FBV0EsR0FBRyxDQUFDLE9BQUosQ0FBWSxFQUFaLENBQWUsU0FBZixHQUEyQixVQUFTLEdBQVQsRUFBYztBQUN2QyxNQUFJLGFBQWEsR0FBRyxHQUFHLENBQUMsYUFBeEI7QUFDQSxNQUFJLElBQUksR0FBRyxHQUFHLENBQUMsSUFBZjtBQUNBLE1BQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxPQUFKLENBQVksRUFBWixDQUFlLFFBQWYsQ0FBd0IsYUFBeEIsQ0FBWDs7QUFDQSxNQUFHLElBQUgsRUFBUztBQUNQLElBQUEsSUFBSSxDQUFDLElBQUQsQ0FBSjtBQUNEO0FBQ0YsQ0FQRDs7QUFTQSxTQUFTLFdBQVQsQ0FBcUIsT0FBckIsRUFBOEIsS0FBOUIsRUFBcUM7QUFDbkMsTUFBSSxDQUFDLEtBQUwsRUFBWTtBQUNWLElBQUEsS0FBSyxHQUFHLE9BQVI7QUFDQSxJQUFBLE9BQU8sR0FBRyxRQUFRLENBQUMsSUFBbkI7QUFDRDs7QUFDRCxNQUFJLFdBQVcsR0FBRyxJQUFJLEdBQUosQ0FBUSxPQUFSLEVBQWlCLFFBQVEsQ0FBQyxNQUExQixDQUFsQjtBQUNBLFNBQU8sSUFBSSxHQUFKLENBQVEsS0FBUixFQUFlLFdBQWYsRUFBNEIsSUFBbkM7QUFDRDs7QUFJRCxRQUFRLENBQUMsSUFBVCxDQUFjLGdCQUFkLENBQStCLE9BQS9CLEVBQXdDLFVBQUMsQ0FBRCxFQUFRO0FBQzlDLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFqQjtBQUNBLE1BQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxRQUFQLENBQWdCLFdBQWhCLEVBQXZCO0FBQ0EsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLFlBQVAsQ0FBb0IsV0FBcEIsQ0FBakI7QUFDQSxNQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsWUFBUCxDQUFvQixLQUFwQixDQUFWO0FBQ0EsTUFBRyxDQUFDLEdBQUosRUFBUyxHQUFHLEdBQUcsTUFBTSxDQUFDLFlBQVAsQ0FBb0IsVUFBcEIsQ0FBTjs7QUFDVCxNQUFHLGNBQWMsS0FBSyxLQUFuQixJQUE0QixRQUFRLEtBQUssTUFBekMsSUFBbUQsR0FBdEQsRUFBMkQ7QUFDekQsSUFBQSxHQUFHLEdBQUcsTUFBTSxDQUFDLFFBQVAsQ0FBZ0IsTUFBaEIsR0FBeUIsR0FBL0IsQ0FEeUQsQ0FFekQ7O0FBQ0EsUUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGdCQUFULENBQTBCLHVCQUExQixDQUFmO0FBQ0EsUUFBTSxJQUFJLEdBQUcsRUFBYjtBQUNBLFFBQUksS0FBSjs7QUFDQSxTQUFJLElBQUksQ0FBQyxHQUFHLENBQVosRUFBZSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQTFCLEVBQWtDLENBQUMsRUFBbkMsRUFBdUM7QUFDckMsVUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUQsQ0FBcEI7QUFDQSxVQUFNLElBQUksR0FBRyxLQUFLLENBQUMsWUFBTixDQUFtQixLQUFuQixDQUFiOztBQUNBLFVBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxZQUFOLENBQW1CLEtBQW5CLENBQVg7O0FBQ0EsVUFBRyxDQUFDLElBQUosRUFBVTtBQUNSLFFBQUEsSUFBSSxHQUFHLEtBQUssQ0FBQyxZQUFOLENBQW1CLFVBQW5CLENBQVA7QUFDRDs7QUFDRCxVQUFHLENBQUMsSUFBSixFQUFVO0FBQ1YsTUFBQSxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVAsQ0FBZ0IsTUFBaEIsR0FBeUIsSUFBaEM7O0FBQ0EsVUFBRyxJQUFJLEtBQUssR0FBWixFQUFpQjtBQUNmLFFBQUEsS0FBSyxHQUFHLENBQVI7QUFDRDs7QUFDRCxNQUFBLElBQUksQ0FBQyxJQUFMLENBQVU7QUFDUixRQUFBLEdBQUcsRUFBRSxJQURHO0FBRVIsUUFBQSxJQUFJLEVBQUo7QUFGUSxPQUFWO0FBSUQ7O0FBQ0QsSUFBQSxHQUFHLENBQUMsT0FBSixDQUFZLEVBQVosQ0FBZSxJQUFmLENBQW9CLFdBQXBCLEVBQWlDO0FBQy9CLE1BQUEsSUFBSSxFQUFKLElBRCtCO0FBRS9CLE1BQUEsS0FBSyxFQUFMO0FBRitCLEtBQWpDO0FBSUEsSUFBQSxDQUFDLENBQUMsY0FBRjtBQUNELEdBNUJELE1BNEJPO0FBQ0w7QUFDQSxRQUFJLEVBQUUsR0FBRyxJQUFUOztBQUNBLFFBQUksY0FBYyxLQUFLLEdBQXZCLEVBQTRCO0FBQzFCLE1BQUEsRUFBRSxHQUFHLE1BQUw7QUFDRCxLQUZELE1BRU87QUFDTCxNQUFBLEVBQUUsR0FBRyxDQUFDLENBQUMsTUFBRCxDQUFELENBQVUsT0FBVixDQUFrQixHQUFsQixDQUFMO0FBQ0EsVUFBRyxFQUFFLENBQUMsTUFBTixFQUFjLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBRCxDQUFQO0FBQ2Y7O0FBQ0QsUUFBSSxJQUFKLEVBQVUsS0FBVjs7QUFDQSxRQUFHLEVBQUgsRUFBTztBQUNMLE1BQUEsSUFBSSxHQUFHLEVBQUUsQ0FBQyxZQUFILENBQWdCLE1BQWhCLENBQVA7QUFDQSxNQUFBLEtBQUssR0FBRyxFQUFFLENBQUMsWUFBSCxDQUFnQixPQUFoQixDQUFSO0FBQ0Q7O0FBQ0QsUUFBRyxJQUFJLElBQUksRUFBRSxDQUFDLFlBQUgsQ0FBZ0IsV0FBaEIsTUFBaUMsUUFBNUMsRUFBc0Q7QUFDcEQsTUFBQSxDQUFDLENBQUMsY0FBRjtBQUNBLFVBQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBVixFQUFnQixJQUFoQixDQUE3QjtBQUNBLE1BQUEsR0FBRyxDQUFDLE9BQUosQ0FBWSxFQUFaLENBQWUsSUFBZixDQUFvQixhQUFwQixFQUFtQztBQUNqQyxRQUFBLElBQUksRUFBRSxTQUQyQjtBQUVqQyxRQUFBLEtBQUssRUFBTDtBQUZpQyxPQUFuQztBQUlEO0FBQ0Y7QUFDRixDQXpERCxFLENBMkRBOztBQUNBLEdBQUcsQ0FBQyxPQUFKLENBQVksRUFBWixDQUFlLElBQWYsQ0FBb0IsY0FBcEIsRUFBb0M7QUFBQyxFQUFBLEdBQUcsRUFBRSxHQUFHLENBQUMsT0FBSixDQUFZO0FBQWxCLENBQXBDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiTktDLm1ldGhvZHMucm4gPSB7XHJcbiAgaW5kZXg6IDAsXHJcbiAgY2FsbGJhY2s6IHt9XHJcbn07XHJcblxyXG5OS0MubWV0aG9kcy5ybi5wb3N0TWVzc2FnZSA9IGZ1bmN0aW9uKG9iaikge1xyXG4gIHdpbmRvdy5SZWFjdE5hdGl2ZVdlYlZpZXcucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XHJcbn07XHJcblxyXG5OS0MubWV0aG9kcy5ybi5lbWl0ID0gZnVuY3Rpb24odHlwZSwgZGF0YSwgY2FsbGJhY2spIHtcclxuICBkYXRhID0gZGF0YSB8fCB7fTtcclxuICB2YXIgaW5kZXggPSBOS0MubWV0aG9kcy5ybi5pbmRleCsrO1xyXG4gIE5LQy5tZXRob2RzLnJuLmNhbGxiYWNrW2luZGV4XSA9IGNhbGxiYWNrO1xyXG4gIE5LQy5tZXRob2RzLnJuLnBvc3RNZXNzYWdlKHtcclxuICAgIHR5cGU6IHR5cGUsXHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgd2ViRnVuY3Rpb25JZDogaW5kZXhcclxuICB9KTtcclxufTtcclxuXHJcbk5LQy5tZXRob2RzLnJuLm9uTWVzc2FnZSA9IGZ1bmN0aW9uKHJlcykge1xyXG4gIHZhciB3ZWJGdW5jdGlvbklkID0gcmVzLndlYkZ1bmN0aW9uSWQ7XHJcbiAgdmFyIGRhdGEgPSByZXMuZGF0YTtcclxuICB2YXIgZnVuYyA9IE5LQy5tZXRob2RzLnJuLmNhbGxiYWNrW3dlYkZ1bmN0aW9uSWRdO1xyXG4gIGlmKGZ1bmMpIHtcclxuICAgIGZ1bmMoZGF0YSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cmxQYXRoRXZhbChmcm9tVXJsLCB0b1VybCkge1xyXG4gIGlmICghdG9VcmwpIHtcclxuICAgIHRvVXJsID0gZnJvbVVybDtcclxuICAgIGZyb21VcmwgPSBsb2NhdGlvbi5ocmVmO1xyXG4gIH1cclxuICBsZXQgZnVsbEZyb21VcmwgPSBuZXcgVVJMKGZyb21VcmwsIGxvY2F0aW9uLm9yaWdpbik7XHJcbiAgcmV0dXJuIG5ldyBVUkwodG9VcmwsIGZ1bGxGcm9tVXJsKS5ocmVmO1xyXG59XHJcblxyXG5cclxuXHJcbmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgID0+IHtcclxuICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcclxuICBjb25zdCB0YXJnZXROb2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gIGNvbnN0IGRhdGFUeXBlID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XHJcbiAgbGV0IHNyYyA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xyXG4gIGlmKCFzcmMpIHNyYyA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJyk7XHJcbiAgaWYodGFyZ2V0Tm9kZU5hbWUgPT09ICdpbWcnICYmIGRhdGFUeXBlID09PSAndmlldycgJiYgc3JjKSB7XHJcbiAgICBzcmMgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgc3JjO1xyXG4gICAgLy8g5Zu+54mH5aSE55CGXHJcbiAgICBjb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbWdbZGF0YS10eXBlPVwidmlld1wiXScpO1xyXG4gICAgY29uc3QgdXJscyA9IFtdO1xyXG4gICAgbGV0IGluZGV4O1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGltYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBpbWFnZSA9IGltYWdlc1tpXTtcclxuICAgICAgY29uc3QgbmFtZSA9IGltYWdlLmdldEF0dHJpYnV0ZSgnYWx0Jyk7XHJcbiAgICAgIGxldCBfc3JjID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCdzcmMnKTtcclxuICAgICAgaWYoIV9zcmMpIHtcclxuICAgICAgICBfc3JjID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKCFfc3JjKSByZXR1cm47XHJcbiAgICAgIF9zcmMgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgX3NyYztcclxuICAgICAgaWYoX3NyYyA9PT0gc3JjKSB7XHJcbiAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICB9XHJcbiAgICAgIHVybHMucHVzaCh7XHJcbiAgICAgICAgdXJsOiBfc3JjLFxyXG4gICAgICAgIG5hbWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBOS0MubWV0aG9kcy5ybi5lbWl0KCd2aWV3SW1hZ2UnLCB7XHJcbiAgICAgIHVybHMsXHJcbiAgICAgIGluZGV4LFxyXG4gICAgfSk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIOmTvuaOpeWkhOeQhlxyXG4gICAgbGV0ICRhID0gbnVsbDtcclxuICAgIGlmICh0YXJnZXROb2RlTmFtZSA9PT0gJ2EnKSB7XHJcbiAgICAgICRhID0gdGFyZ2V0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJGEgPSAkKHRhcmdldCkucGFyZW50cygnYScpO1xyXG4gICAgICBpZigkYS5sZW5ndGgpICRhID0gJGFbMF07XHJcbiAgICB9XHJcbiAgICBsZXQgaHJlZiwgdGl0bGU7XHJcbiAgICBpZigkYSkge1xyXG4gICAgICBocmVmID0gJGEuZ2V0QXR0cmlidXRlKCdocmVmJyk7XHJcbiAgICAgIHRpdGxlID0gJGEuZ2V0QXR0cmlidXRlKCd0aXRsZScpO1xyXG4gICAgfVxyXG4gICAgaWYoaHJlZiAmJiAkYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpICE9PSAncmVsb2FkJykge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IHRhcmdldFVybCA9IHVybFBhdGhFdmFsKGxvY2F0aW9uLmhyZWYsIGhyZWYpO1xyXG4gICAgICBOS0MubWV0aG9kcy5ybi5lbWl0KCdvcGVuTmV3UGFnZScsIHtcclxuICAgICAgICBocmVmOiB0YXJnZXRVcmwsXHJcbiAgICAgICAgdGl0bGVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIOWQjOatpWNvb2tpZeS/oeaBr1xyXG5OS0MubWV0aG9kcy5ybi5lbWl0KCdzeW5jUGFnZUluZm8nLCB7dWlkOiBOS0MuY29uZmlncy51aWR9KTtcclxuIl19
