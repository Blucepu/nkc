!function n(o,i,u){function s(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(a)return a(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return s(o[t][1][e]||e)},r,r.exports,n,o,i,u)}return i[t].exports}for(var a="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,r){"use strict";function d(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var n=NKC.methods.getDataById("data"),i=[],u=[];(function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;-1===u.indexOf(r)&&u.push(r);var n=d(t);try{for(n.s();!(o=n.n()).done;){var o=o.value;o.level=r,i.push(o),o.childForums&&o.childForums.length&&e(o.childForums,r+1)}}catch(e){n.e(e)}finally{n.f()}})(n.forums),window.app=new Vue({el:"#app",data:{levels:u,selectedLevels:u,selectedReviewForumCert:n.forumSettings.reviewNewForumCert||[],selectedNewForumCert:n.forumSettings.openNewForumCert||[],selectedNewForumGrade:n.forumSettings.openNewForumGrade||[],selectedRelationship:n.forumSettings.openNewForumRelationship,forumName:"",forums:i,forumSettings:n.forumSettings,forumCategories:n.forumCategories,reviewNewForumCerts:n.certs.roles,reviewNewForumGrades:n.certs.grades,reviewNewForumGuide:n.forumSettings.reviewNewForumGuide,founderGuide:n.forumSettings.founderGuide,updating:!1},mounted:function(){setTimeout(function(){floatForumPanel.initPanel()},500)},computed:{listTypeCount:function(){var e,t={abstract:0,brief:0,minimalist:0},r=d(this.forums);try{for(r.s();!(e=r.n()).done;)t[e.value.threadListStyle.type]++}catch(e){r.e(e)}finally{r.f()}return t},coverCount:function(){var e,t={left:0,right:0,null:0},r=d(this.forums);try{for(r.s();!(e=r.n()).done;)t[e.value.threadListStyle.cover]++}catch(e){r.e(e)}finally{r.f()}return t}},methods:{getUrl:NKC.methods.tools.getUrl,updateForums:function(){var t=this;sweetQuestion("确定要刷新所有专业信息？").then(function(){return t.updating=!0,nkcAPI("/e/settings/forum","POST")}).then(function(){sweetSuccess("刷新成功"),t.updating=!1}).catch(function(e){sweetError(e),t.updating=!1})},move:function(e,t,r){var n,o;0===e&&"left"===r||e+1===t.length&&"right"===r||(n=t[e],r=t[o="left"===r?e-1:e+1],t[o]=n,Vue.set(t,e,r))},save:function(){this.forums.map(function(e){return e.fid});var r=this.forumCategories,e=this.forumSettings,n=this.selectedReviewForumCert,o=this.reviewNewForumGuide,i=this.founderGuide,u=this.selectedNewForumCert,s=this.selectedNewForumGrade,a=this.selectedRelationship,f=e.recycle,l=e.archive,c=NKC.methods.checkData.checkString,m=this.getForumsInfo();Promise.resolve().then(function(){if(!f)throw"请输入回收站专业ID";if(!l)throw"请输入归档专业ID";var t=d(r);try{for(t.s();!(e=t.n()).done;){var e=e.value;c(e.name,{name:"分类名",minLength:1,maxLength:20}),c(e.description,{name:"分类介绍",minLength:0,maxLength:100})}}catch(e){t.e(e)}finally{t.f()}return nkcAPI("/e/settings/forum","PUT",{forumsInfo:m,categories:r,recycle:f,archive:l,selectedReviewForumCert:n,reviewNewForumGuide:o,founderGuide:i,selectedNewForumCert:u,selectedNewForumGrade:s,selectedRelationship:a})}).then(function(){sweetSuccess("保存成功")}).catch(sweetError)},addForum:function(){var e=this.forumName;Promise.resolve().then(function(){if(!e)throw"专业名称不能为空";return sweetQuestion("确定要创建专业「".concat(e,"」吗？"))}).then(function(){return nkcAPI("/f","POST",{displayName:e})}).then(function(e){sweetSuccess("创建成功")}).catch(sweetError)},addForumCategory:function(){this.forumCategories.push({name:"",description:"",displayStyle:"simple"})},remove:function(e,t){t.splice(e,1)},getInput:function(){for(var e=document.getElementsByTagName("input"),t={style:[],allStyle:[],cover:[],allCover:[],order:[]},r=0;r<e.length;r++){var n=$(e[r]),o=n.attr("data-name");"forumThreadList"===o?t.style.push(n):"forumCover"===o?t.cover.push(n):"allThreadList"===o?t.allStyle.push(n):"allCover"===o?t.allCover.push(n):"forumOrder"===o&&t.order.push(n)}return t},selectAllThreadListStyle:function(e){var t,r=d(this.forums);try{for(r.s();!(t=r.n()).done;)t.value.threadListStyle.type=e}catch(e){r.e(e)}finally{r.f()}},selectAllCover:function(e){var t,r=d(this.forums);try{for(r.s();!(t=r.n()).done;)t.value.threadListStyle.cover=e}catch(e){r.e(e)}finally{r.f()}},getForumsInfo:function(){var e=[],t=d(this.forums);try{for(t.s();!(r=t.n()).done;){var r=r.value;e.push({fid:r.fid,threadListStyle:{type:r.threadListStyle.type,cover:r.threadListStyle.cover},order:r.order})}}catch(e){t.e(e)}finally{t.f()}return e}}})},{}]},{},[1]);