!function i(u,s,a){function f(t,e){if(!s[t]){if(!u[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[t]={exports:{}};u[t][0].call(o.exports,function(e){return f(u[t][1][e]||e)},o,o.exports,i,u,s,a)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)f(a[e]);return f}({1:[function(e,t,r){"use strict";function h(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var n=NKC.methods.getDataById("data"),s=[],f=[];!function e(t,r){var n=1<arguments.length&&void 0!==r?r:1;-1===f.indexOf(n)&&f.push(n);var o,i=h(t);try{for(i.s();!(o=i.n()).done;){var u=o.value;u.level=n,s.push(u),u.childForums&&u.childForums.length&&e(u.childForums,n+1)}}catch(e){i.e(e)}finally{i.f()}}(n.forums),window.app=new Vue({el:"#app",data:{levels:f,selectedLevels:f,selectedReviewForumCert:n.forumSettings.reviewNewForumCert||[],selectedNewForumCert:n.forumSettings.openNewForumCert||[],selectedNewForumGrade:n.forumSettings.openNewForumGrade||[],selectedRelationship:n.forumSettings.openNewForumRelationship,forumName:"",forums:s,forumSettings:n.forumSettings,forumCategories:n.forumCategories,reviewNewForumCerts:n.certs.roles,reviewNewForumGrades:n.certs.grades,reviewNewForumGuide:n.forumSettings.reviewNewForumGuide,founderGuide:n.forumSettings.founderGuide,updating:!1},mounted:function(){setTimeout(function(){floatForumPanel.initPanel()},500)},computed:{listTypeCount:function(){var e,t={abstract:0,brief:0,minimalist:0},r=h(this.forums);try{for(r.s();!(e=r.n()).done;){t[e.value.threadListStyle.type]++}}catch(e){r.e(e)}finally{r.f()}return t},coverCount:function(){var e,t={left:0,right:0,null:0},r=h(this.forums);try{for(r.s();!(e=r.n()).done;){t[e.value.threadListStyle.cover]++}}catch(e){r.e(e)}finally{r.f()}return t}},methods:{getUrl:NKC.methods.tools.getUrl,updateForums:function(){var t=this;sweetQuestion("确定要刷新所有专业信息？").then(function(){return t.updating=!0,nkcAPI("/e/settings/forum","POST")}).then(function(){sweetSuccess("刷新成功"),t.updating=!1}).catch(function(e){sweetError(e),t.updating=!1})},move:function(e,t,r){var n,o,i;0===e&&"left"===r||e+1===t.length&&"right"===r||(n=t[e],i=t[o="left"===r?e-1:e+1],t[o]=n,Vue.set(t,e,i))},save:function(){this.forums.map(function(e){return e.fid});var n=this.forumCategories,e=this.forumSettings,o=this.selectedReviewForumCert,i=this.reviewNewForumGuide,u=this.founderGuide,s=this.selectedNewForumCert,a=this.selectedNewForumGrade,f=this.selectedRelationship,l=e.recycle,c=e.archive,m=NKC.methods.checkData.checkString,d=this.getForumsInfo();Promise.resolve().then(function(){if(!l)throw"请输入回收站专业ID";if(!c)throw"请输入归档专业ID";var e,t=h(n);try{for(t.s();!(e=t.n()).done;){var r=e.value;m(r.name,{name:"分类名",minLength:1,maxLength:20}),m(r.description,{name:"分类介绍",minLength:0,maxLength:100})}}catch(e){t.e(e)}finally{t.f()}return nkcAPI("/e/settings/forum","PUT",{forumsInfo:d,categories:n,recycle:l,archive:c,selectedReviewForumCert:o,reviewNewForumGuide:i,founderGuide:u,selectedNewForumCert:s,selectedNewForumGrade:a,selectedRelationship:f})}).then(function(){sweetSuccess("保存成功")}).catch(sweetError)},addForum:function(){var e=this.forumName;Promise.resolve().then(function(){if(!e)throw"专业名称不能为空";return sweetQuestion("确定要创建专业「".concat(e,"」吗？"))}).then(function(){return nkcAPI("/f","POST",{displayName:e})}).then(function(e){sweetSuccess("创建成功")}).catch(sweetError)},addForumCategory:function(){this.forumCategories.push({name:"",description:"",displayStyle:"simple"})},remove:function(e,t){t.splice(e,1)},getInput:function(){for(var e=document.getElementsByTagName("input"),t={style:[],allStyle:[],cover:[],allCover:[],order:[]},r=0;r<e.length;r++){var n=$(e[r]),o=n.attr("data-name");"forumThreadList"===o?t.style.push(n):"forumCover"===o?t.cover.push(n):"allThreadList"===o?t.allStyle.push(n):"allCover"===o?t.allCover.push(n):"forumOrder"===o&&t.order.push(n)}return t},selectAllThreadListStyle:function(e){var t,r=h(this.forums);try{for(r.s();!(t=r.n()).done;){t.value.threadListStyle.type=e}}catch(e){r.e(e)}finally{r.f()}},selectAllCover:function(e){var t,r=h(this.forums);try{for(r.s();!(t=r.n()).done;){t.value.threadListStyle.cover=e}}catch(e){r.e(e)}finally{r.f()}},getForumsInfo:function(){var e,t=[],r=h(this.forums);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push({fid:n.fid,threadListStyle:{type:n.threadListStyle.type,cover:n.threadListStyle.cover},order:n.order})}}catch(e){r.e(e)}finally{r.f()}return t}}})},{}]},{},[1]);