!function r(s,c,a){function d(i,e){if(!c[i]){if(!s[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(l)return l(i,!0);var o=new Error("Cannot find module '"+i+"'");throw o.code="MODULE_NOT_FOUND",o}var n=c[i]={exports:{}};s[i][0].call(n.exports,function(e){return d(s[i][1][e]||e)},n,n.exports,r,s,c,a)}return c[i].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)d(a[e]);return d}({1:[function(e,i,t){"use strict";var o;$("#inputFile").on("change",function(){var e,i=$("#inputFile")[0].files[0];i&&(upLoadFile=i,(e=new FormData).append("file",upLoadFile),$.ajax({url:"/logo",method:"POST",cache:!1,data:e,headers:{FROM:"nkcAPI"},dataType:"json",contentType:!1,processData:!1}).done(function(){window.location.reload()}).fail(function(e){screenTopWarning(JSON.parse(e.responseText).error)}))}),window.saveNotice=function(){var e=$("#threadId").val().split(",");nkcAPI("/e/settings/home/notice","PUT",{id:e}).then(function(){window.location.reload()}).catch(function(e){screenTopWarning(e.error||e)})},document.getElementById("app")&&(o=new Vue({el:"#app",data:{homeSettings:"",info:"",list:[],recommend:[],error:"",logoFiles:[],logoFileUploadding:!1},beforeMount:function(){var e=NKC.methods.getDataById("data");e.homeSettings.list.topic&&this.list.push("topic"),e.homeSettings.list.discipline&&this.list.push("discipline"),e.homeSettings.recommend.featuredThreads&&this.recommend.push("featuredThreads"),e.homeSettings.recommend.hotThreads&&this.recommend.push("hotThreads"),this.homeSettings=e.homeSettings,e.homeBigLogo&&(this.logoFiles=this.logoFiles.concat(e.homeBigLogo))},methods:{save:function(){this.error="",this.info="";var e=this.homeSettings,i=this.list;if(e.list.topic=!1,e.list.discipline=!1,e.hotThreads.postCount<0)return this.error="热门文章最小回复数不能小于0";if(e.hotThreads.postUserCount<0)return this.error="热门文章最小回复用户总数不能小于0";var t=this.recommend;return e.recommend.hotThreads=!1,e.recommend.featuredThreads=!1,-1!==t.indexOf("hotThreads")&&(e.recommend.hotThreads=!0),-1!==t.indexOf("featuredThreads")&&(e.recommend.featuredThreads=!0),e.recommend.voteUpTotal<0?this.error="推荐条件中点赞总数不能小于0":e.recommend.voteUpMax<0?this.error="推荐条件中独立点赞数不能小于0":e.recommend.encourageTotal<0?this.error="推荐条件中鼓励次数不能小于0":(-1!==i.indexOf("topic")&&(e.list.topic=!0),-1!==i.indexOf("discipline")&&(e.list.discipline=!0),void nkcAPI("/e/settings/home/list","PUT",{topic:e.list.topic,discipline:e.list.discipline,visitorThreadList:e.visitorThreadList,hotThreads:e.hotThreads,recommend:e.recommend,subscribesDisplayMode:e.subscribesDisplayMode}).then(function(){sweetSuccess("保存成功")}).catch(function(e){o.error=e.error||e}))},pickPicture:function(){$("#inputFile").click()},addFile:function(){var e,t,i=this,o=[].slice.call($("#inputFile")[0].files);i.logoFileUploadding=!0,e=o,t=new FormData,e.forEach(function(e,i){t.append("file"+i,e)}),nkcUploadFile("/e/settings/home/list/biglogo","POST",t).then(function(e){i.logoFiles=i.logoFiles.concat(e.saved),i.logoFileUploadding=!1}),$("#inputFile").val("")},deleteBigLogo:function(e){var i=this.logoFiles,t=i[e];nkcAPI("/e/settings/home/list/biglogo","POST",{type:"delete",aid:t.aid}).then(function(){i.splice(e,1),screenTopAlert("删除成功")}).catch(function(e){screenTopAlert(e.error)})}}}))},{}]},{},[1]);