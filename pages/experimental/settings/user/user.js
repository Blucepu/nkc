(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var data = NKC.methods.getDataById('data');
var usersObj = {};
data.users.map(function (u) {
  u.showDetail = false;
  usersObj[u.uid] = u;
});
var app = new Vue({
  el: '#app',
  data: {
    t: data.t,
    searchType: data.searchType || 'username',
    searchContent: data.searchContent || '',
    users: data.users,
    usersObj: usersObj,
    roles: data.roles,
    selectedUsersId: []
  },
  computed: {
    selectedUsers: function selectedUsers() {
      var usersObj = this.usersObj;
      return this.selectedUsersId.map(function (uid) {
        return usersObj[uid];
      });
    },
    isChecked: function isChecked() {
      return this.selectedUsersId.length === this.users.length;
    }
  },
  methods: {
    format: NKC.methods.format,
    getUrl: NKC.methods.tools.getUrl,
    getIpUrl: NKC.methods.tools.getIpUrl,
    search: function search() {
      var t = this.t,
          searchType = this.searchType,
          searchContent = this.searchContent;
      if (!searchContent) sweetError('请输入搜索内容');
      window.location.href = "/e/settings/user?t=".concat(t, "&c=").concat(searchType, ",").concat(searchContent);
    },
    switchDetail: function switchDetail(u) {
      u.showDetail = !u.showDetail;
    },
    editUser: function editUser(u) {
      if (!window.ModifyAccountInfo) {
        window.ModifyAccountInfo = new NKC.modules.ModifyAccountInfo();
      }

      window.ModifyAccountInfo.open({
        uid: u.uid
      });
    },
    toDisableUser: function toDisableUser(postType, type, disable, user) {
      var usersId;

      if (type === 'all') {
        usersId = [].concat(this.selectedUsersId);
      } else {
        usersId = [user.uid];
      }

      return Promise.resolve().then(function () {
        if (!usersId.length) throw '未选择用户';
        return nkcAPI("/e/settings/user", 'PUT', {
          type: postType,
          usersId: usersId,
          disable: !!disable
        });
      }).then(function () {
        sweetSuccess('执行成功');
      })["catch"](function (err) {
        console.log(err);
        sweetError(err);
      });
    },
    disableUsers: function disableUsers(type, disable, user) {
      this.toDisableUser('disable', type, disable, user);
    },
    hiddenUsersHome: function hiddenUsersHome(type, disable, user) {
      this.toDisableUser('hidden', type, disable, user);
    },
    selectAllUsers: function selectAllUsers() {
      var users = this.users,
          isChecked = this.isChecked;

      if (!isChecked) {
        this.selectedUsersId = users.map(function (u) {
          return u.uid;
        });
      } else {
        this.selectedUsersId = [];
      }
    }
  },
  mounted: function mounted() {
    setTimeout(function () {
      floatUserPanel.initPanel();
    }, 500);
  }
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwYWdlcy9leHBlcmltZW50YWwvc2V0dGluZ3MvdXNlci91c2VyLm1qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLE9BQUosQ0FBWSxXQUFaLENBQXdCLE1BQXhCLENBQWI7QUFDQSxJQUFNLFFBQVEsR0FBRyxFQUFqQjtBQUNBLElBQUksQ0FBQyxLQUFMLENBQVcsR0FBWCxDQUFlLFVBQUEsQ0FBQyxFQUFJO0FBQ2xCLEVBQUEsQ0FBQyxDQUFDLFVBQUYsR0FBZSxLQUFmO0FBQ0EsRUFBQSxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUgsQ0FBUixHQUFrQixDQUFsQjtBQUNELENBSEQ7QUFJQSxJQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUosQ0FBUTtBQUNsQixFQUFBLEVBQUUsRUFBRSxNQURjO0FBRWxCLEVBQUEsSUFBSSxFQUFFO0FBQ0osSUFBQSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBREo7QUFFSixJQUFBLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBTCxJQUFtQixVQUYzQjtBQUdKLElBQUEsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFMLElBQXNCLEVBSGpDO0FBSUosSUFBQSxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBSlI7QUFLSixJQUFBLFFBQVEsRUFBUixRQUxJO0FBTUosSUFBQSxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBTlI7QUFPSixJQUFBLGVBQWUsRUFBRTtBQVBiLEdBRlk7QUFXbEIsRUFBQSxRQUFRLEVBQUU7QUFDUixJQUFBLGFBRFEsMkJBQ1E7QUFBQSxVQUNQLFFBRE8sR0FDSyxJQURMLENBQ1AsUUFETztBQUVkLGFBQU8sS0FBSyxlQUFMLENBQXFCLEdBQXJCLENBQXlCLFVBQUEsR0FBRztBQUFBLGVBQUksUUFBUSxDQUFDLEdBQUQsQ0FBWjtBQUFBLE9BQTVCLENBQVA7QUFDRCxLQUpPO0FBS1IsSUFB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RFAsSUFBQSxjQWxETyw0QkFrRFU7QUFBQSxVQUNSLEtBRFEsR0FDWSxJQURaLENBQ1IsS0FEUTtBQUFBLFVBQ0QsU0FEQyxHQUNZLElBRFosQ0FDRCxTQURDOztBQUVmLFVBQUcsQ0FBQyxTQUFKLEVBQWU7QUFDYixhQUFLLGVBQUwsR0FBdUIsS0FBSyxDQUFDLEdBQU4sQ0FBVSxVQUFBLENBQUM7QUFBQSxpQkFBSSxDQUFDLENBQUMsR0FBTjtBQUFBLFNBQVgsQ0FBdkI7QUFDRCxPQUZELE1BRU87QUFDTCxhQUFLLGVBQUwsR0FBdUIsRUFBdkI7QUFDRDtBQUNGO0FBekRNLEdBcEJTO0FBK0VsQixFQUFBLE9BL0VrQixxQkErRVI7QUFDUixJQUFBLFVBQVUsQ0FBQyxZQUFNO0FBQ2YsTUFBQSxjQUFjLENBQUMsU0FBZjtBQUNELEtBRlMsRUFFUCxHQUZPLENBQVY7QUFHRDtBQW5GaUIsQ0FBUixDQUFaIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiY29uc3QgZGF0YSA9IE5LQy5tZXRob2RzLmdldERhdGFCeUlkKCdkYXRhJyk7XHJcbmNvbnN0IHVzZXJzT2JqID0ge307XHJcbmRhdGEudXNlcnMubWFwKHUgPT4ge1xyXG4gIHUuc2hvd0RldGFpbCA9IGZhbHNlO1xyXG4gIHVzZXJzT2JqW3UudWlkXSA9IHVcclxufSk7XHJcbmNvbnN0IGFwcCA9IG5ldyBWdWUoe1xyXG4gIGVsOiAnI2FwcCcsXHJcbiAgZGF0YToge1xyXG4gICAgdDogZGF0YS50LFxyXG4gICAgc2VhcmNoVHlwZTogZGF0YS5zZWFyY2hUeXBlIHx8ICd1c2VybmFtZScsXHJcbiAgICBzZWFyY2hDb250ZW50OiBkYXRhLnNlYXJjaENvbnRlbnQgfHwgJycsXHJcbiAgICB1c2VyczogZGF0YS51c2VycyxcclxuICAgIHVzZXJzT2JqLFxyXG4gICAgcm9sZXM6IGRhdGEucm9sZXMsXHJcbiAgICBzZWxlY3RlZFVzZXJzSWQ6IFtdLFxyXG4gIH0sXHJcbiAgY29tcHV0ZWQ6IHtcclxuICAgIHNlbGVjdGVkVXNlcnMoKSB7XHJcbiAgICAgIGNvbnN0IHt1c2Vyc09ian0gPSB0aGlzO1xyXG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFVzZXJzSWQubWFwKHVpZCA9PiB1c2Vyc09ialt1aWRdKTtcclxuICAgIH0sXHJcbiAgICBpc0NoZWNrZWQoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVXNlcnNJZC5sZW5ndGggPT09IHRoaXMudXNlcnMubGVuZ3RoO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgbWV0aG9kczoge1xyXG4gICAgZm9ybWF0OiBOS0MubWV0aG9kcy5mb3JtYXQsXHJcbiAgICBnZXRVcmw6IE5LQy5tZXRob2RzLnRvb2xzLmdldFVybCxcclxuICAgIGdldElwVXJsOiBOS0MubWV0aG9kcy50b29scy5nZXRJcFVybCxcclxuICAgIHNlYXJjaCgpIHtcclxuICAgICAgY29uc3Qge3QsIHNlYXJjaFR5cGUsIHNlYXJjaENvbnRlbnR9ID0gdGhpcztcclxuICAgICAgaWYoIXNlYXJjaENvbnRlbnQpIHN3ZWV0RXJyb3IoJ+ivt+i+k+WFpeaQnOe0ouWGheWuuScpO1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGAvZS9zZXR0aW5ncy91c2VyP3Q9JHt0fSZjPSR7c2VhcmNoVHlwZX0sJHtzZWFyY2hDb250ZW50fWA7XHJcbiAgICB9LFxyXG4gICAgc3dpdGNoRGV0YWlsKHUpIHtcclxuICAgICAgdS5zaG93RGV0YWlsID0gIXUuc2hvd0RldGFpbDtcclxuICAgIH0sXHJcbiAgICBlZGl0VXNlcih1KSB7XHJcbiAgICAgIGlmKCF3aW5kb3cuTW9kaWZ5QWNjb3VudEluZm8pIHtcclxuICAgICAgICB3aW5kb3cuTW9kaWZ5QWNjb3VudEluZm8gPSBuZXcgTktDLm1vZHVsZXMuTW9kaWZ5QWNjb3VudEluZm8oKTtcclxuICAgICAgfVxyXG4gICAgICB3aW5kb3cuTW9kaWZ5QWNjb3VudEluZm8ub3Blbih7XHJcbiAgICAgICAgdWlkOiB1LnVpZFxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICB0b0Rpc2FibGVVc2VyKHBvc3RUeXBlLCB0eXBlLCBkaXNhYmxlLCB1c2VyKSB7XHJcbiAgICAgIGxldCB1c2Vyc0lkO1xyXG4gICAgICBpZih0eXBlID09PSAnYWxsJykge1xyXG4gICAgICAgIHVzZXJzSWQgPSBbXS5jb25jYXQodGhpcy5zZWxlY3RlZFVzZXJzSWQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVzZXJzSWQgPSBbdXNlci51aWRdO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGlmKCF1c2Vyc0lkLmxlbmd0aCkgdGhyb3cgJ+acqumAieaLqeeUqOaItyc7XHJcbiAgICAgICAgICByZXR1cm4gbmtjQVBJKGAvZS9zZXR0aW5ncy91c2VyYCwgJ1BVVCcsIHtcclxuICAgICAgICAgICAgdHlwZTogcG9zdFR5cGUsXHJcbiAgICAgICAgICAgIHVzZXJzSWQsXHJcbiAgICAgICAgICAgIGRpc2FibGU6ICEhZGlzYWJsZVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBzd2VldFN1Y2Nlc3MoJ+aJp+ihjOaIkOWKnycpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgc3dlZXRFcnJvcihlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGRpc2FibGVVc2Vycyh0eXBlLCBkaXNhYmxlLCB1c2VyKSB7XHJcbiAgICAgIHRoaXMudG9EaXNhYmxlVXNlcignZGlzYWJsZScsIHR5cGUsIGRpc2FibGUsIHVzZXIpO1xyXG4gICAgfSxcclxuICAgIGhpZGRlblVzZXJzSG9tZSh0eXBlLCBkaXNhYmxlLCB1c2VyKSB7XHJcbiAgICAgIHRoaXMudG9EaXNhYmxlVXNlcignaGlkZGVuJywgdHlwZSwgZGlzYWJsZSwgdXNlcik7XHJcbiAgICB9LFxyXG4gICAgc2VsZWN0QWxsVXNlcnMoKSB7XHJcbiAgICAgIGNvbnN0IHt1c2VycywgaXNDaGVja2VkfSA9IHRoaXM7XHJcbiAgICAgIGlmKCFpc0NoZWNrZWQpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnNJZCA9IHVzZXJzLm1hcCh1ID0+IHUudWlkKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnNJZCA9IFtdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBtb3VudGVkKCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGZsb2F0VXNlclBhbmVsLmluaXRQYW5lbCgpO1xyXG4gICAgfSwgNTAwKVxyXG4gIH1cclxufSk7XHJcbiJdfQ==
