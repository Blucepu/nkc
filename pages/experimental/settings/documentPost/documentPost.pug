extends ../../experimental
block eTitle
  title 内容发表设置
  +includeCSS('/experimental/settings/documentPost/documentPost.css')
block eContent
  .hidden#data=objToStr({roleList: data.roleList, documentPostSettings: data.documentPostSettings, sources: data.sources})
  .container-fluid.max-width
    .row#app(v-cloak)
      .col-xs-12.col-md-2
        .source-list
          .source-item(
            v-for='source in sources'
            @click='selectSource(source.type)'
            :class='{"active": source.type === selectSourceType}'
            )
            span {{source.name}}
            .fa.fa-angle-right
        div {{settings}}
      .col-xs-12.col-md-10(v-if='settings')
        h2 目录
        ul
          li.h4
            a(href='#postPermission') 发表权限设置
          li.h4
            a(href='#postReview') 内容审核设置
        #postPermission.p-t-4
          h3 发表权限设置
          .form.form-horizontal
            .form-group
              label.col-sm-2.control-label 最小认证等级
              .col-sm-10
                .radio
                  for item in [[0,  '已注册'], [1, '绑定手机号'], [2, '身份证正反面'], [3, '视频认证']]
                    label.m-r-1
                      input(type='radio' :value=item[0] v-model='settings.postPermission.authLevelMin')
                      span=`等级 ${item[0]}（${item[1]}）`

            .form-group
              label.col-sm-2.control-label 考试
              .col-sm-10
                .checkbox
                  label.m-r-1
                    input(type='checkbox' :value='true' v-model='settings.postPermission._examNotPass.status')
                    span 未考试
                  label.m-r-1
                    input(type='checkbox' :value='true' v-model='settings.postPermission.examVolumeA')
                    span A 卷
                  label
                    input(type='checkbox' :value='true' v-model='settings.postPermission.examVolumeB')
                    span B 卷
                .m-t-05(v-if='settings.postPermission._examNotPass.status')
                  span 未考试用户发表数目限制
                  .radio
                    label.m-r-1
                      input(type='radio' :value='false' v-model='settings.postPermission._examNotPass.limited')
                      span 无限制
                    label.m-r-05
                      input(type='radio' :value='true' v-model='settings.postPermission._examNotPass.limited')
                      span 限制
                    input.m-r-05.exam-count(
                      type='text'
                      v-model.number='settings.postPermission._examNotPass.count'
                      :disabled='!settings.postPermission._examNotPass.limited'
                      )
                    span 条/天
            .form-group
              label.col-sm-2.control-label 发表间隔限制
              .col-sm-10
                .table-responsive
                  table.table.table-bordered.nkc-table.m-b-05
                    thead
                      tr
                        th 角色
                        th 最小间隔时间（分钟）
                        th 其他
                    tbody
                      tr
                        th 默认
                        th
                          .radio
                            label.m-r-1
                              input(
                                type='radio'
                                :value='false'
                                v-model='settings.postPermission._defaultInterval.limited'
                                )
                              span 无限制
                            label.m-r-05
                              input(
                                type='radio'
                                :value='true'
                                v-model='settings.postPermission._defaultInterval.limited'
                                )
                              span 限制
                          .m-t-05
                            input.m-r-05.exam-count(
                              type='text'
                              v-model.number='settings.postPermission._defaultInterval.count'
                              :disabled='!settings.postPermission._defaultInterval.limited'
                              )
                        th
                      tr(v-for='(item, index) in settings.postPermission._intervalLimit')
                        th
                          select(v-model='item.valueString')
                            option(v-for='role in roleList' :value='role.type') {{role.name}}
                        th
                          .radio
                            label.m-r-1
                              input(
                                type='radio'
                                :value='false'
                                v-model='item.limited'
                              )
                              span 无限制
                            label.m-r-05
                              input(
                                type='radio'
                                :value='true'
                                v-model='item.limited'
                              )
                              span 限制
                          .m-t-05
                            input.m-r-05.exam-count(
                              type='text'
                              v-model.number='item.count'
                              :disabled='!item.limited'
                              )
                        th
                          button.btn.btn-xs.btn-default(@click='removeItem(settings.postPermission._intervalLimit, index)') 删除
                div
                  button.btn.btn-default.btn-sm(@click='addItem(settings.postPermission._intervalLimit)') 添加
            .form-group
              label.col-sm-2.control-label 发表条数限制
              .col-sm-10
                .table-responsive
                  table.table.table-bordered.nkc-table
                    thead
                      tr
                        th 角色
                        th 每天最大条数
                        th 其他
                    tbody
                      tr
                        th 默认
                        th
                          .radio
                            label.m-r-1
                              input(
                                type='radio'
                                :value='false'
                                v-model='settings.postPermission._defaultCount.limited'
                              )
                              span 无限制
                            label.m-r-05
                              input(
                                type='radio'
                                :value='true'
                                v-model='settings.postPermission._defaultCount.limited'
                              )
                              span 限制
                          .m-t-05
                            input.m-r-05.exam-count(
                              type='text'
                              v-model.number='settings.postPermission._defaultCount.count'
                              :disabled='!settings.postPermission._defaultCount.limited'
                            )
                        th
                      tr(v-for='(item, index) in settings.postPermission._countLimit')
                        th
                          select(v-model='item.valueString')
                            option(v-for='role in roleList' :value='role.type') {{role.name}}
                        th
                          .radio
                            label.m-r-1
                              input(
                                type='radio'
                                :value='false'
                                v-model='item.limited'
                              )
                              span 无限制
                            label.m-r-05
                              input(
                                type='radio'
                                :value='true'
                                v-model='item.limited'
                              )
                              span 限制
                          .m-t-05
                            input.m-r-05.exam-count(
                              type='text'
                              v-model.number='item.count'
                              :disabled='!item.limited'
                            )
                        th
                          button.btn.btn-xs.btn-default(@click='removeItem(settings.postPermission._countLimit, index)') 删除
                div
                  button.btn.btn-default.btn-sm(@click='addItem(settings.postPermission._countLimit)') 添加
        #postReview.p-t-4
          h3 内容审核设置
          .form.form-horizontal
            .form-group
              label.control-label.col-sm-2 审核条数
              .col-sm-10
                .table-responsive
                  table.table.table-bordered.nkc-table
                    thead
                      tr
                        th 角色
                        th 审核
                        th 其他
                    tbody
                      tr
                        th 默认
                        th
                          .radio
                            label.m-r-1
                              input(type='radio' value='none' v-model='settings.postReview._default.type')
                              span 无需审核
                          .radio
                            label.m-r-1
                              input(type='radio' value='all' v-model='settings.postReview._default.type')
                              span 所有必审
                          .radio
                            label.m-r-1
                              input(type='radio' value='count' v-model='settings.postReview._default.type')
                              span 前 {{settings.postReview._default.count}} 次必审
                          .m-t-05
                            input(
                              type='text'
                              v-model.number='settings.postReview._default.count'
                              :disabled='settings.postReview._default.type !== "count"'
                              )
                      tr(v-for='(l, index) in settings.postReview._list')
                        th
                          select(v-model='l.valueString')
                            option(v-for='role in roleList' :value='role.type') {{role.name}}
                        th
                          .radio
                            label.m-r-1
                              input(type='radio' value='none' v-model='l.type')
                              span 无需审核
                            label.m-r-1
                              input(type='radio' value='all' v-model='l.type')
                              span 所有必审
                            label.m-r-1
                              input(type='radio' value='count' v-model='l.type')
                              span 前 {{l.count}} 条必审
                          .m-t-05
                            input(
                              type='text'
                              v-model.number='l.count'
                              :disabled='l.type !== "count"'
                            )
                        th
                          button.btn.btn-xs.btn-default(@click='removeItem(settings.postReview._list, index)') 删除
                div
                  button.btn.btn-sm.btn-default(@click='addReviewItem()') 添加

block scripts
  +includeJS('/experimental/settings/documentPost/documentPost.js')