extends ../bootstrap_base
block title
  title 编辑器
  //- +includeCSS("/editor/editor.css")
  style.
    .nkcshade{
      box-shadow: none;
    }
    body{
      padding-top: 120px;
    }
block content
  .container-fluid.max-width.edito
      .row#app-publish-article
        .col-xs-12.col-md-9.box-shadow-panel.m-b-2
          div
            //- .vue-render
            .m-b-1.m-t-1.m-l-05.m-r-05  
              
              article-title( :data="pageData" :state="pageState" ref="title")
              article-content( ref="content" @content-change="contentChange" :c="pageData.post?.c" :notice="pageState.editorSettings?.onEditNotes")  
              .m-b-2
              classification( v-if="pageData.type !== 'modifyThread'" :data="pageData" ref="classification" )
              .m-b-2
              cover(ref="cover" :value="pageData.post?.cover")
              .m-b-2
              abstract(ref="abstract" :abstract= "{cn:pageData.post?.abstractCn, en:pageData.post?.abstractEn}" )
              .m-b-2
              key-word(ref="keyWord" :post= "pageData.post"  )
              .m-b-2
              author-info(ref="authorInfo" :author= "pageData.post?.authorInfos" )
              .m-b-2
              original(ref="original" :original="{wordLimit: pageData.originalWordLimit, state: pageData.post?.originState}" )
              .m-b-2
              investigation(ref="investigation" :data="pageData" )
              .m-b-2
              column(ref="column" :state="{userColumn: pageState.userColumn, columnPermission: pageState.columnPermission, column:pageState.userColumn || {}}" :data="{addedToColumn: pageData.addedToColumn, toColumn: pageData.toColumn}")
        .col-xs-12.col-md-3.box-shadow-panel 
          modify-submit( :notice="pageState.editorSettings?.notes" :data="pageData" @ready-data="readyData" @remove-editor="removeEditor")
  .hidden#state=objToStr( state ) 
  .hidden#data=objToStr({addedToColumn: data.addedToColumn, createSurveyPermission: data.createSurveyPermission, minorForumCount: data.minorForumCount, originalWordLimit: data.originalWordLimit, permissionInfo: data.permissionInfo, allowedAnonymousForumsId: data.allowedAnonymousForumsId, havePermissionToSendAnonymousPost: data.havePermissionToSendAnonymousPost, post: data.post, thread: data.thread, mainForums: data.mainForums, type: data.type, forum: data.forum, draftId: data.draftId, oldDraft: data.oldDraft, websiteCode: data.websiteCode, toColumn: !!data.toColumn, threadCategories: data.threadCategories})
block scripts
  include ../publicModules/forumSelector/forumSelector
  +includeJS("/editor/editor copy.js")
