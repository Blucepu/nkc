!function a(o,n,c){function i(t,e){if(!n[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(d)return d(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=n[t]={exports:{}},o[t][0].call(r.exports,function(e){return i(o[t][1][e]||e)},r,r.exports,a,o,n,c)}return n[t].exports}for(var d="function"==typeof require&&require,e=0;e<c.length;e++)i(c[e]);return i}({1:[function(e,t,r){"use strict";var u=new NKC.modules.CommonModal,a=new NKC.modules.ShopShip,m=new NKC.modules.ShopModifyPrice,o=new NKC.modules.Transfer;window.transfer=function(e){o.open(function(){},e)},window.modifySellMessage=function(r,a){var o=$("tr[data-order-id='".concat(a,"'] .data-sell-message"));u.open(function(e){var t=e[0].value;nkcAPI("/shop/manage/"+r+"/order/editSellMessage","PUT",{sellMessage:t,orderId:a}).then(function(){o.text(t),u.close(),sweetSuccess("保存成功")}).catch(sweetWarning)},{title:"修改备注",data:[{value:o.text(),dom:"textarea"}]})},window.getNumber=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e=(e+="").replace("￥",""),e=(e=parseFloat(e)).toFixed(t),parseFloat(e)},window.computeOrderPrice=function(e){for(var t=$("tr[data-order-id='".concat(e,"']")),r=t.find(".data-param-price"),a=t.find(".data-param-count"),e=t.find(".data-params-freight"),o=[],n=[],c=0;c<r.length;c++){var i=r.eq(c);o.push(getNumber(i.text(),2))}for(var d=0;d<a.length;d++){var u=a.eq(d);n.push(getNumber(u.text(),0))}if(o.length!==n.length)return sweetError("订单页面错误，请刷新页面");for(var m=0,s=0;s<o.length;s++)m+=o[s]*n[s];e=getNumber(e.text(),2);return t.find(".data-params-price").text("￥".concat(m.toFixed(2))),t.find(".data-order-price").text("￥".concat((m+e).toFixed(2))),{paramsPrice:m,freightPrice:e,orderPrice:m+e}},window.modifyParamPrice=function(a,o,n){var c=$("tr[data-order-id='".concat(o,"'][data-order-param-id='").concat(n,"'] .data-param-price")),e=$("tr[data-order-id='".concat(o,"'][data-order-param-id='").concat(n,"'] .data-param-count")),t=$("tr[data-order-id='".concat(o,"'] .data-params-freight")),i=getNumber(t.text(),2),t=getNumber(c.text(),2),d=getNumber(e.text(),0);return m.open(function(e){var t=e,r=NKC.methods.checkData.checkNumber;Promise.resolve().then(function(){return r(t,{name:"商品单价",min:.01,fractionDigits:2}),nkcAPI("/shop/manage/".concat(a,"/order/editCostRecord"),"PUT",{type:"modifyParam",costId:n,orderId:o,freightPrice:100*i,costObj:{singlePrice:100*t,count:d}})}).then(function(){c.text("￥".concat(t.toFixed(2))),computeOrderPrice(o),u.close()}).catch(sweetError)},t)},window.modifyParamCount=function(r,a,o){var n=$("tr[data-order-id='".concat(a,"'][data-order-param-id='").concat(o,"'] .data-param-count")),e=$("tr[data-order-id='".concat(a,"'][data-order-param-id='").concat(o,"'] .data-param-price")),t=$("tr[data-order-id='".concat(a,"'] .data-params-freight")),c=getNumber(t.text(),2),i=getNumber(e.text(),2),e=getNumber(n.text(),0);u.open(function(e){var t=getNumber(e[0].value,2);Promise.resolve().then(function(){return NKC.methods.checkData.checkNumber(t,{name:"商品数量",min:1}),nkcAPI("/shop/manage/".concat(r,"/order/editCostRecord"),"PUT",{type:"modifyParam",costId:o,orderId:a,freightPrice:100*c,costObj:{singlePrice:100*i,count:t}})}).then(function(){n.text("".concat(t)),computeOrderPrice(a),u.close()}).catch(sweetError)},{title:"修改数量",data:[{dom:"input",value:e}]})},window.modifyFreight=function(r,a){var o=$("tr[data-order-id='".concat(a,"'] .data-params-freight")),e=getNumber(o.text(),2);return m.open(function(e){var t=e;Promise.resolve().then(function(){return NKC.methods.checkData.checkNumber(t,{name:"运费",min:0,fractionDigits:2}),nkcAPI("/shop/manage/".concat(r,"/order/editCostRecord"),"PUT",{type:"modifyFreight",orderId:a,freightPrice:100*t})}).then(function(){o.text("￥".concat(t.toFixed(2))),computeOrderPrice(a),u.close()}).catch(sweetError)},e)},window.ship=function(e){a.open(function(){},{orderId:e})}},{}]},{},[1]);